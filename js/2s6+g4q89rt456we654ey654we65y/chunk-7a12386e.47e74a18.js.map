{"version":3,"sources":["webpack:///./src/components/QrEditor/QrPresets.vue?8067","webpack:///./src/components/QrEditor/ColorPicker.vue?d1dc","webpack:///./src/components/QrEditor/QrRender.vue?14c7","webpack:///../src/FileSaver.js","webpack:///./node_modules/core-js/modules/es.array.at.js","webpack:///../src/utils/methods.js","webpack:///../src/utils/utils.js","webpack:///../src/modules/core/namespaces.js","webpack:///../src/utils/window.js","webpack:///../src/types/Base.js","webpack:///../src/utils/adopter.js","webpack:///../src/modules/optional/arrange.js","webpack:///../src/modules/core/regex.js","webpack:///../src/modules/optional/class.js","webpack:///../src/modules/optional/css.js","webpack:///../src/modules/optional/data.js","webpack:///../src/modules/optional/memory.js","webpack:///../src/types/Color.js","webpack:///../src/types/Point.js","webpack:///../src/types/Matrix.js","webpack:///../src/modules/core/parser.js","webpack:///../src/types/Box.js","webpack:///../src/types/List.js","webpack:///../src/modules/core/selector.js","webpack:///../src/modules/core/event.js","webpack:///../src/types/EventTarget.js","webpack:///../src/modules/core/defaults.js","webpack:///../src/types/SVGArray.js","webpack:///../src/types/SVGNumber.js","webpack:///../src/modules/core/attr.js","webpack:///../src/elements/Dom.js","webpack:///../src/elements/Element.js","webpack:///../src/modules/optional/sugar.js","webpack:///../src/modules/optional/transform.js","webpack:///../src/elements/Container.js","webpack:///../src/elements/Defs.js","webpack:///../src/elements/Shape.js","webpack:///../src/modules/core/circled.js","webpack:///../src/elements/Ellipse.js","webpack:///../src/elements/Fragment.js","webpack:///../src/modules/core/gradiented.js","webpack:///../src/elements/Gradient.js","webpack:///../src/elements/Pattern.js","webpack:///../src/elements/Image.js","webpack:///../src/types/PointArray.js","webpack:///../src/modules/core/pointed.js","webpack:///../src/elements/Line.js","webpack:///../src/elements/Marker.js","webpack:///../src/animation/Controller.js","webpack:///../src/utils/pathParser.js","webpack:///../src/types/PathArray.js","webpack:///../src/animation/Morphable.js","webpack:///../src/elements/Path.js","webpack:///../src/modules/core/poly.js","webpack:///../src/elements/Polygon.js","webpack:///../src/elements/Polyline.js","webpack:///../src/elements/Rect.js","webpack:///../src/animation/Queue.js","webpack:///../src/animation/Animator.js","webpack:///../src/animation/Timeline.js","webpack:///../src/animation/Runner.js","webpack:///../src/elements/Svg.js","webpack:///../src/elements/Symbol.js","webpack:///../src/modules/core/textable.js","webpack:///../src/elements/Text.js","webpack:///../src/elements/Tspan.js","webpack:///../src/elements/Circle.js","webpack:///../src/elements/ClipPath.js","webpack:///../src/elements/ForeignObject.js","webpack:///../src/modules/core/containerGeometry.js","webpack:///../src/elements/G.js","webpack:///../src/elements/A.js","webpack:///../src/elements/Mask.js","webpack:///../src/elements/Stop.js","webpack:///../src/elements/Style.js","webpack:///../src/elements/TextPath.js","webpack:///../src/elements/Use.js","webpack:///../src/main.js","webpack:///./src/components/QrEditor/QrEditor.vue","webpack:///./node_modules/@ant-design/icons-vue/es/components/Icon.js","webpack:///./node_modules/@ant-design/icons-vue/es/components/IconFont.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/MinusOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/MinusOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/SettingFilled.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/SettingFilled.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/QrcodeOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/QrcodeOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/PushpinFilled.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/PushpinFilled.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/QuestionCircleOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/QuestionCircleOutlined.js","webpack:///./src/components/QrEditor/QrStatus.vue","webpack:///./src/components/QrEditor/QrStatus.vue?b8f1","webpack:///./src/components/QrEditor/QrPresets.vue","webpack:///./src/components/QrEditor/QrPresets.vue?2db8","webpack:///./src/components/QrEditor/QrShape.vue","webpack:///./src/components/QrEditor/QrShape.vue?0b3d","webpack:///./src/components/QrEditor/QrLogo.vue","webpack:///./node_modules/@ant-design/icons-svg/es/asn/MinusCircleOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/MinusCircleOutlined.js","webpack:///./src/components/QrEditor/QrLogo.vue?1209","webpack:///./src/components/QrEditor/QrFont.vue","webpack:///./src/components/QrEditor/ColorPicker.vue","webpack:///./src/components/QrEditor/ColorPicker.vue?3b47","webpack:///./node_modules/@ant-design/icons-svg/es/asn/BoldOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/BoldOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/ItalicOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/ItalicOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/UnderlineOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/UnderlineOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/AlignLeftOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/AlignLeftOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/AlignRightOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/AlignRightOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/AlignCenterOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/AlignCenterOutlined.js","webpack:///./src/components/QrEditor/QrFont.vue?901e","webpack:///./src/components/QrEditor/QrColor.vue","webpack:///./src/components/QrEditor/QrColor.vue?eca6","webpack:///./src/components/QrEditor/QrRender.vue","webpack:///./src/utils/qrcode.js","webpack:///./src/utils/CreateQr.js","webpack:///./src/components/QrEditor/QrRender.vue?3ee9","webpack:///./src/utils/fontdetect.js","webpack:///./src/hooks/useInitQrEditor.js","webpack:///./src/components/QrEditor/QrEditor.vue?1afd","webpack:///./node_modules/core-js/modules/es.string.replace-all.js","webpack:///./src/utils/functions.js","webpack:///./src/components/QrEditor/QrLogo.vue?6fef","webpack:///./src/components/QrEditor/QrEditor.vue?7eff","webpack:///./src/components/QrEditor/QrColor.vue?3001","webpack:///./node_modules/core-js/modules/es.string.at-alternative.js","webpack:////webpack/universalModuleDefinition","webpack:////webpack/bootstrap","webpack:////webpack/runtime/define property getters","webpack:////webpack/runtime/hasOwnProperty shorthand","webpack:////webpack/runtime/make namespace object","webpack:////src/js/utils/utils.js","webpack:////src/js/utils/color.js","webpack:////src/js/utils/hsvacolor.js","webpack:////src/js/libs/moveable.js","webpack:////src/js/libs/selectable.js","webpack:////src/js/template.js","webpack:////src/NanoPop.ts","webpack:////src/js/pickr.js","webpack:///./node_modules/canvas-toBlob/canvas-toBlob.js","webpack:///ls/webpack/universalModuleDefinition","webpack:///ls/webpack/bootstrap","webpack:///ls/webpack/runtime/define property getters","webpack:///ls/webpack/runtime/hasOwnProperty shorthand","webpack:///ls/src/helpers.ts","webpack:///ls/src/ls.ts"],"names":["b","a","autoBom","console","warn","test","type","Blob","c","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","$","toObject","lengthOfArrayLike","toIntegerOrInfinity","addToUnscopables","proto","at","index","O","this","len","relativeIndex","undefined","methods","names","registerMethods","Array","isArray","_name","addMethodNames","Object","getOwnPropertyNames","assign","getMethodsFor","getMethodNames","Set","_names","push","map","array","block","il","length","filter","radians","Math","PI","camelCase","s","toLowerCase","toUpperCase","unCamelCase","capitalize","charAt","slice","proportionalSize","element","width","height","box","bbox","getOrigin","o","ox","originX","oy","originY","x","y","condX","condY","includes","svg","html","xmlns","xlink","svgjs","globals","Base","elements","root","create","ns","createElementNS","makeInstance","isHTML","adopter","querySelector","wrapper","innerHTML","firstChild","removeChild","nodeOrNew","node","ownerDocument","defaultView","Node","adopt","instance","nodeName","Fragment","className","register","asRoot","getClass","did","eid","assignNewId","children","id","extend","modules","key","wrapWithAttrCheck","fn","args","constructor","apply","attr","siblings","parent","position","next","prev","forward","p","add","remove","backward","front","back","before","after","insertBefore","insertAfter","numberAndUnit","hex","rgb","reference","transforms","whitespace","isHex","isRgb","isBlank","isNumber","isImage","delimiter","isPathLetter","classes","trim","split","hasClass","indexOf","addClass","join","removeClass","toggleClass","css","style","val","ret","arguments","cssText","el","forEach","t","cased","show","hide","visible","data","v","r","attributes","JSON","parse","stringify","remember","memory","forget","_memory","sixDigitHex","substring","componentHex","component","integer","round","bounded","max","min","toString","is","object","space","getParameters","params","_a","_b","_c","_d","z","cieSpace","hueToRgb","q","Color","inputs","init","color","mode","u","random","sin","pi","grey","Error","cmyk","hsl","isGrey","delta","values","noWhitespace","exec","parseInt","hexParse","components","lab","xyz","lch","sqrt","atan2","dToR","cos","yL","xL","zL","ct","mx","nm","rU","gU","bU","pow","bd","toArray","toHex","_clamped","toRgb","rV","gV","bV","string","r255","g255","b255","rL","gL","bL","xU","yU","zU","format","Point","clone","base","source","transform","transformO","Matrix","isMatrixLike","point","screenCTM","inverse","closeEnough","threshold","abs","flipBoth","flip","flipX","flipY","skewX","skew","isFinite","skewY","scaleX","scale","scaleY","shear","theta","rotate","around","px","positionX","NaN","py","positionY","translate","tx","translateX","ty","translateY","relative","rx","relativeX","ry","relativeY","cx","cy","matrix","aroundO","dx","dy","translateO","lmultiplyO","decompose","determinant","ccw","sx","thetaRad","st","lam","sy","equals","other","comp","axis","flipO","scaleO","fromArray","Element","matrixify","parseFloat","call","inverseO","det","na","nb","nc","nd","ne","nf","lmultiply","matrixMultiply","multiply","multiplyO","rotateO","shearO","lx","skewO","tan","ly","formatTransforms","current","transformer","valueOf","ctm","getCTM","isRoot","rect","getScreenCTM","parser","nodes","size","path","parentNode","documentElement","addTo","isNulledBox","domContains","contains","Box","addOffset","pageXOffset","pageYOffset","left","top","w","x2","y2","isNulled","merge","xMin","Infinity","xMax","yMin","yMax","pts","getBox","getBBoxFn","retry","getBBox","rbox","getRBox","getBoundingClientRect","inside","viewbox","zoom","level","clientWidth","clientHeight","zoomX","zoomY","zoomAmount","Number","MAX_SAFE_INTEGER","List","arr","super","each","fnOrMethodName","concat","reserved","baseFind","query","querySelectorAll","find","findOne","reduce","obj","attrs","listenerId","windowEvents","getEvents","n","getEventHolder","events","getEventTarget","clearEvents","on","listener","binding","options","bind","bag","_svgjsListenerId","event","ev","addEventListener","off","namespace","removeEventListener","dispatch","Event","CustomEvent","detail","cancelable","EventTarget","defaultPrevented","fire","noop","timeline","duration","ease","delay","fill","stroke","opacity","offset","SVGArray","toSet","SVGNumber","convert","unit","value","divide","number","isNaN","match","minus","plus","times","toJSON","hooks","registerAttrHook","nodeValue","last","curr","removeAttribute","getAttribute","defaults","_val","hook","isColor","leading","setAttributeNS","setAttribute","rebuild","Dom","removeNamespace","SVGElement","appendChild","childNodes","put","clear","hasChildNodes","lastChild","deep","writeDataToDom","cloneNode","first","get","has","htmlOrFn","outerHTML","xml","matches","selector","matcher","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","putIn","removeElement","replaceChild","precision","factor","svgOrFn","outerSVG","words","text","textContent","wrap","xmlOrFn","outerXML","_this","well","fragment","createDocumentFragment","firstElementChild","dom","hasAttribute","setData","center","defs","dmove","move","parents","until","isSelector","keys","sugar","prefix","extension","mat","angle","direction","radius","_element","getTotalLength","pointAt","getPointAtLength","font","untransform","str","kv","reverse","toParent","pCtm","toRoot","decomposed","cleanRelative","Container","flatten","ungroup","Defs","Shape","Ellipse","circled","ellipse","from","fx","fy","x1","y1","to","Gradient","targets","url","update","gradiented","gradient","Pattern","pattern","patternUnits","Image","load","callback","img","src","image","PointArray","maxX","maxY","minX","minY","points","pop","toLine","MorphArray","Line","plot","pointed","line","Marker","orient","ref","makeSetterGetter","marker","easing","pos","bezier","steps","stepPosition","jumps","beforeFlag","step","floor","jumping","Stepper","done","Ease","Controller","stepper","dt","recalculate","_duration","overshoot","_overshoot","eps","os","log","zeta","wn","Spring","velocity","acceleration","newPosition","PID","windup","integral","_windup","P","I","D","segmentParameters","M","L","H","V","C","S","Q","T","A","Z","pathHandlers","p0","mlhvqtcsaz","jl","makeAbsolut","command","segment","segmentComplete","startNewSegment","token","inNumber","finalizeNumber","pathLetter","lastCommand","small","isSmall","inSegment","pointSeen","hasExponent","finalizeSegment","absolute","segments","isArcFlag","isArc","isExponential","lastToken","pathParser","toAbsolute","arrayToString","PathArray","getClassForType","NonMorphable","morphableTypes","ObjectBag","Morphable","_stepper","_from","_to","_type","_context","_morphObj","morph","complete","_set","align","toConsumable","TransformBag","sortByKey","splice","defaultObject","toDelete","objOrArr","entries","Type","sort","shift","num","registerMorphableType","makeMorphable","context","mapper","Path","_array","Polygon","polygon","poly","Polyline","polyline","Rect","Queue","_first","_last","item","Animator","nextDraw","frames","timeouts","immediates","timer","performance","Date","frame","run","requestAnimationFrame","_draw","timeout","time","now","immediate","cancelFrame","clearTimeout","cancelImmediate","nextTimeout","lastTimeout","nextFrame","lastFrame","nextImmediate","makeSchedule","runnerInfo","start","runner","end","defaultSource","Timeline","timeSource","_timeSource","_startTime","_speed","_persist","_nextFrame","_paused","_runners","_runnerIds","_lastRunnerId","_time","_lastSourceTime","_lastStepTime","_step","_stepFn","_stepImmediate","active","finish","getEndTimeOfTimeline","pause","getEndTime","lastRunnerInfo","getLastRunnerInfo","lastDuration","lastStartTime","endTimes","getRunnerInfoById","_continue","persist","dtOrForever","play","updateTime","yes","currentSpeed","speed","positive","schedule","when","absoluteStartTime","endTime","unschedule","info","seek","stop","immediateStep","dtSource","dtTime","dtToStart","reset","runnersLeft","finished","_timeline","Runner","_queue","_isDeclarative","_history","enabled","_lastTime","_reseted","transformId","_haveReversed","_reverse","_loopsDone","_swing","_wait","_times","_frameId","swing","wait","addTransform","animate","sanitise","loop","clearTransform","clearTransformsFromQueue","isTransform","during","queue","_prepareRunner","loops","loopDuration","loopsDone","relativeTime","whole","partial","swinging","backwards","uncliped","clipped","swingForward","forwards","progress","initFn","runFn","retargetFn","initialiser","retarget","initialised","running","_lastPosition","justStarted","justFinished","declarative","converged","_initialise","_run","needsIt","_rememberMorpher","method","morpher","caller","positionOrDt","allfinished","_tryRetarget","extra","FakeRunner","mergeWith","getRunnerTransform","mergeTransforms","runners","_transformationRunners","netTransform","RunnerArray","ids","clearBefore","deleteCnt","edit","newRunner","getByID","lastRunner","condition","by","_clearTransformRunnersBefore","currentRunner","_currentTransform","_addRunner","difference","styleAttr","nameOrAttrs","newToAttrs","newKeys","differences","addedFromAttrs","oldFromAttrs","oldToAttrs","newLevel","newPoint","affine","isMatrix","currentAngle","startTransform","setup","rTarget","rCurrent","possibilities","distances","shortest","affineParameters","newTransforms","_queueNumber","_queueNumberDelta","newTo","_queueObject","Svg","version","nested","Symbol","plain","_build","createTextNode","getComputedTextLength","ax","ay","amove","build","symbol","Text","_rebuild","blankLineOffset","fontSize","getComputedStyle","getPropertyValue","newLined","firstLine","nodeType","newLine","textable","Tspan","tspan","Circle","circle","ClipPath","unclip","clip","clipper","clipWith","ForeignObject","child","foreignObject","G","containerGeometry","group","link","unlink","linker","linkTo","Mask","unmask","mask","masker","maskWith","Stop","cssRule","rule","Style","addText","fontFamily","fontface","TextPath","track","pathArray","textPath","importNodes","Use","use","file","class","_createBlock","_component_a_row","gutter","_createVNode","_component_a_col","span","_createElementVNode","_component_a_collapse","activeKey","_ctx","$event","expand-icon-position","bordered","accordion","expandIcon","isActive","_component_MinusOutlined","_component_PlusOutlined","_component_a_collapse_panel","header","_component_QrcodeOutlined","_renderSlot","_component_PushpinFilled","_component_a_popover","placement","get-popup-container","trigger","parentElement","content","_component_QuestionCircleOutlined","_component_QrStatus","qrStatus","qrText","$props","textLength","_component_SettingFilled","_component_a_tabs","centered","tabBarGutter","_component_a_tab_pane","tab","_component_IconFont","_component_QrPresets","presets","selectedPreset","_component_QrShape","correctLevel","selectedElement","eyes","selectedEye","_component_QrLogo","logos","userLogos","onLogoUpload","$setup","onLogoDelete","selectedLogo","logoStyle","logoShadow","_component_QrFont","fonts","fontText","fontColor","fontStyle","textAlign","_component_QrColor","colors","gdColors","eyeOuter","eyeInner","_component_a_spin","spinning","_component_QrRender","qrConfig","resetPreset","onChangeQrStatus","_excluded","_objectSpread","ownKeys","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","enumerable","_defineProperty","defineProperty","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","sourceKeys","props","slots","_props$attrs","cls","Component","viewBox","spin","tabindex","onClick","restProps","hasChildren","slotsComponent","Boolean","classString","anticon","svgClassString","svgStyle","msTransform","innerSvgProps","renderInnerNode","iconTabIndex","String","ariaLabel","inheritAttrs","displayName","customCache","isValidCustomScriptUrl","scriptUrl","createScriptUrlElements","scriptUrls","currentScriptUrl","script","_options$extraCommonP","extraCommonProps","Iconfont","iconProps","AntdIcon","_component_a_result","subTitle","_toDisplayString","__exports__","_createElementBlock","_Fragment","_renderList","category","items","_component_a_card","hoverable","cover","blur","view","_component_a_card_meta","description","_component_a_tag","_hoisted_2","emits","changePreset","preset","emit","_component_a_form_item","label","labelCol","_component_a_radio_group","onChange","_component_a_radio","disabled","wrapperCol","_component_a_image","preview","placeholder","changeCorrectLevel","changeElement","changeEye","eye","_component_CloseCircleOutlined","_component_MinusCircleOutlined","_component_a_upload","list-type","show-upload-list","before-upload","_component_a_switch","checked","checked-children","un-checked-children","CloseCircleOutlined","PlusOutlined","MinusCircleOutlined","changeLogo","logo","changeLogoStyle","changeLogoShadow","shadow","logoUpload","logoDelete","_component_a_textarea","autoSize","minRows","maxRows","maxlength","showCount","allowClear","_component_a_select","_component_a_select_option","alias","_component_a_slider","marks","_component_a_checkbox_group","_component_a_checkbox","_component_BoldOutlined","_component_ItalicOutlined","_component_UnderlineOutlined","_component_ColorPicker","defaultColor","onColorChange","default","showActive","pickr","currentColor","toRefs","onMounted","Pickr","theme","container","defaultRepresentation","adjustableNumbers","palette","hue","interaction","input","save","cancel","i18n","setColor","toHEXA","watch","old","ColorPicker","BoldOutlined","ItalicOutlined","UnderlineOutlined","AlignLeftOutlined","AlignRightOutlined","AlignCenterOutlined","changeFontText","changeFontFamily","changeFontColor","changeFontSize","changeFontStyle","changeTextAlign","background","_hoisted_3","singleColor","computed","every","changeFill","changeEyeColor","_component_a_divider","dashed","labelAlign","_component_a_button","_normalizeProps","icon","_component_DownloadOutlined","_hoisted_4","_hoisted_5","danger","_hoisted_6","toUTF8Array","utf8","charcode","charCodeAt","QR8bitByte","QRMode","MODE_8BIT_BYTE","QRCode","typeNumber","errorCorrectLevel","isPattern","QRErrorCorrectLevel","moduleCount","dataCache","dataList","getLength","buffer","write","addData","newData","isDark","row","col","getModuleCount","make","rsBlocks","QRRSBlock","getRSBlocks","QRBitBuffer","totalDataCount","dataCount","QRUtil","getLengthInBits","makeImpl","getBestMaskPattern","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","minLostPoint","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","cs","dark","beginFill","moveTo","lineTo","endFill","getPatternPosition","bits","getBCHTypeNumber","mod","getBCHTypeInfo","inc","bitIndex","byteIndex","getMask","PAD0","PAD1","putBit","createBytes","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","rsPoly","getErrorCorrectPolynomial","rawPoly","QRPolynomial","modPoly","modIndex","totalCodeCount","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","errorCorrectLength","QRMath","gexp","qrCode","sameCount","count","darkCount","ratio","glog","LOG_TABLE","EXP_TABLE","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","CreateQr","ele","config","margin","eyeRotate","qrPosition","textPosition","rowWidth","qrEle","maxSize","qr","eleName","testSvg","paths","defaultElement","defaultEye","white","rectOuter","rectInner","roundOuter","roundInner","render","getRenderStep","clearRoot","dblog","showRunTime","renderEmpty","loadQrData","renderQrBody","renderQrEye","fillQr","renderLogo","renderText","renderRoot","temp","initRoot","family","anchor","rebuildText","rootW","rootH","bgColor","qrX","qrY","qrW","ceil","offsetX","offsetY","main","getLogoSize","logoW","logoH","logoX","logoY","textX","textY","initImageSize","svgStr","replaceAll","svgBlob","fileName","getTime","svgSrc","loadImage","imageBlob","imageToBlob","qrcode","Qrcode","initQr","qrMask","eyesMask","isArtQr","addQrElements","clearQrElements","addOrReplace","loopQrData","fun","rows","ro","rw","co","cr","hw","liquidBlackPath","liquidWhitePath","randomEle","artElement","addFillElements","fillWith","qrBody","eyesBody","initLogo","renderRectLogo","renderRoundLogo","renderOriginLogo","normalizeLogoImage","imageW","imageH","addLogoElements","outer","inner","padding","clipW","initText","centerX","centerY","textW","textH","weight","store","storeKey","isBlock","isBlack","setPatternValue","rowW","density","b22","b13","b31","b21","b12","randomBetween","d1","DownloadOutlined","Function","reactive","waiting","buttonStatus","async","downloadQrImage","getQrImage","Detector","baseFonts","testString","testSize","getElementsByTagName","defaultWidth","defaultHeight","offsetWidth","offsetHeight","detect","detected","matched","ls","encrypt","secret","presetKeys","resourceKeys","userConfigKeys","useInitQrEditor","qrTextRef","collections","shallowReactive","collectionRefs","applyPreset","presetId","countStr","notification","warning","message","addImage","checkImg","fileToSvg","encodeURIComponent","removeImage","initConfig","api","cache","resource","userConfig","expireTime","request","getSettings","home","fontDetector","FontDetect","nextTick","saveConfig","set","filterObj","unsupport","onBeforeUnmount","onbeforeunload","IconFont","createFromIconfontCN","MinusOutlined","SettingFilled","QrcodeOutlined","PushpinFilled","QuestionCircleOutlined","QrStatus","QrPresets","QrShape","QrLogo","QrFont","QrColor","QrRender","activeCollapse","activeSettingsTab","showHelp","changeQrStatus","toRef","uncurryThis","requireObjectCoercible","isCallable","isRegExp","getMethod","getRegExpFlags","getSubstitution","wellKnownSymbol","IS_PURE","REPLACE","TypeError","stringSlice","stringIndexOf","searchValue","fromIndex","replaceValue","IS_REG_EXP","flags","replacer","searchString","functionalReplace","searchLength","advanceBy","replacement","endOfLastMatch","filteredObj","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","dragUpload","uploadFun","tip","ondragenter","preventDefault","ondragover","ondragleave","ondrop","dataTransfer","files","unDragUpload","isUrl","isBase64Image","startsWith","readFileAsUrl","Promise","resolve","reject","reader","silent","resizeImage","originWidth","originHeight","fileToImage","globalCanvas","initGlobalCanvas","imageDataToCanvas","imageData","canvas","getContext","clearRect","putImageData","imageToCanvas","drawImage","mime","quality","toBlob","blob","imageToImageData","toSize","getImageData","base64","toDataURL","fails","FORCED","forced","factory","__webpack_require__","definition","prop","hasOwnProperty","toStringTag","eventListener","HTMLCollection","NodeList","capture","createElementFromString","div","createFromTemplate","con","subtree","sub","eventPath","evt","composedPath","resolveElement","pv","cv","ci","shadowRoot","adjustableInputNumbers","handleScroll","shiftKey","ctrlKey","deltaY","selectionStart","focus","setSelectionRange","passive","hsvToRgb","hsvToHsl","rgbToHsv","minVal","maxVal","dr","dg","db","cmykToHsv","hslToHsv","hexToHsv","parseToHSVA","ctx","fillStyle","regex","rgba","hsla","hsva","hexa","numarize","invalid","alphaValid","raw","HSVaColor","original","toFixed","that","toHSVA","toHSLA","toRGBA","toCMYK","padStart","alpha","clamp","Moveable","opt","lock","onchange","onstop","_keyboard","activeElement","up","right","down","xm","ym","_tapstart","_","_tapstop","_tapmove","touch","touches","clientX","clientY","destroy","Selectable","onTap","classList","stopPropagation","variantFlipOrder","middle","positionFlipOrder","bottom","reposition","popper","originalLeft","originalTop","refBox","popBox","positionStore","variantStore","vs","vm","ve","hs","hm","he","posKey","varKey","positions","variants","vertical","positionVal","positionKey","variantKey","positionSize","variantSize","positionMaximum","variantMaximum","positionMinimum","variantMinimum","variantVal","E","change","changestop","swatchselect","DEFAULT_OPTIONS","swatches","sliders","lockOpacity","_preBuild","_buildComponents","_bindEvents","_finalBuild","addSwatch","button","app","_root","_nanopop","baseOptions","[object Object]","_t","_setupAnimationFrame","cb","_rePositioningPicker","_representation","setColorRepresentation","showAlways","_initializingActive","_emit","useAsButton","inline","appClass","hidden","int","nextSibling","disable","comparison","transition","lastColor","inst","repeat","so","sh","getColor","_color","_lastColor","picker","_recalc","_updateOutput","cssRGBaString","setProperty","_swatchColors","slider","backgroundColor","selectable","_components","eventBindings","_clearColor","setHSVA","applyColor","stopImmediatePropagation","ck","closeWithKey","isOpen","code","some","ranges","range","getColorRepresentation","nv","toPrecision","autoReposition","closeOnScroll","rs","_eventBindings","eb","innerHeight","innerWidth","eventSource","outputPrecision","_parseLocalColor","alphaMakesAChange","I18N_DEFAULTS","_eventListener","callBacks","removeSwatch","swatchColor","cancelAnimationFrame","destroyAndRemove","recalc","utype","click","getSelectedColor","getRoot","enable","VERSION","base64_ranks","Uint8Array","HTMLCanvasElement","canvas_proto","is_base64_regex","to_data_url","decode_base64","rank","undef","outptr","state","toBlobHD","mozGetAsFile","msToBlob","dataURI","header_end","is_base64","fake","encoding","decodeURIComponent","toDataURLHD","NOOP","isObject","hasLS","supportsLS","localStorage","flush","APX","fromCharCode","obfus","ttl","encrypter","decrypter","force","getItem","removeItem","localConfig","_conf","setItem","hasTTL","decrypt"],"mappings":"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","file":"js/chunk-7a12386e.47e74a18.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./QrPresets.vue?vue&type=style&index=0&id=64ccdc4e&lang=less&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ColorPicker.vue?vue&type=style&index=0&id=3e5eb627&lang=less\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./QrRender.vue?vue&type=style&index=0&id=2195d8b0&lang=less&scoped=true\"","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.at` method\n// https://github.com/tc39/proposal-relative-indexing-method\n$({ target: 'Array', proto: true }, {\n  at: function at(index) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : O[k];\n  }\n});\n\naddToUnscopables('at');\n","const methods = {}\r\nconst names = []\r\n\r\nexport function registerMethods (name, m) {\r\n  if (Array.isArray(name)) {\r\n    for (const _name of name) {\r\n      registerMethods(_name, m)\r\n    }\r\n    return\r\n  }\r\n\r\n  if (typeof name === 'object') {\r\n    for (const _name in name) {\r\n      registerMethods(_name, name[_name])\r\n    }\r\n    return\r\n  }\r\n\r\n  addMethodNames(Object.getOwnPropertyNames(m))\r\n  methods[name] = Object.assign(methods[name] || {}, m)\r\n}\r\n\r\nexport function getMethodsFor (name) {\r\n  return methods[name] || {}\r\n}\r\n\r\nexport function getMethodNames () {\r\n  return [ ...new Set(names) ]\r\n}\r\n\r\nexport function addMethodNames (_names) {\r\n  names.push(..._names)\r\n}\r\n","// Map function\r\nexport function map (array, block) {\r\n  let i\r\n  const il = array.length\r\n  const result = []\r\n\r\n  for (i = 0; i < il; i++) {\r\n    result.push(block(array[i]))\r\n  }\r\n\r\n  return result\r\n}\r\n\r\n// Filter function\r\nexport function filter (array, block) {\r\n  let i\r\n  const il = array.length\r\n  const result = []\r\n\r\n  for (i = 0; i < il; i++) {\r\n    if (block(array[i])) {\r\n      result.push(array[i])\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\n// Degrees to radians\r\nexport function radians (d) {\r\n  return d % 360 * Math.PI / 180\r\n}\r\n\r\n// Radians to degrees\r\nexport function degrees (r) {\r\n  return r * 180 / Math.PI % 360\r\n}\r\n\r\n// Convert dash-separated-string to camelCase\r\nexport function camelCase (s) {\r\n  return s.toLowerCase().replace(/-(.)/g, function (m, g) {\r\n    return g.toUpperCase()\r\n  })\r\n}\r\n\r\n// Convert camel cased string to dash separated\r\nexport function unCamelCase (s) {\r\n  return s.replace(/([A-Z])/g, function (m, g) {\r\n    return '-' + g.toLowerCase()\r\n  })\r\n}\r\n\r\n// Capitalize first letter of a string\r\nexport function capitalize (s) {\r\n  return s.charAt(0).toUpperCase() + s.slice(1)\r\n}\r\n\r\n// Calculate proportional width and height values when necessary\r\nexport function proportionalSize (element, width, height, box) {\r\n  if (width == null || height == null) {\r\n    box = box || element.bbox()\r\n\r\n    if (width == null) {\r\n      width = box.width / box.height * height\r\n    } else if (height == null) {\r\n      height = box.height / box.width * width\r\n    }\r\n  }\r\n\r\n  return {\r\n    width: width,\r\n    height: height\r\n  }\r\n}\r\n\r\n/**\r\n * This function adds support for string origins.\r\n * It searches for an origin in o.origin o.ox and o.originX.\r\n * This way, origin: {x: 'center', y: 50} can be passed as well as ox: 'center', oy: 50\r\n**/\r\nexport function getOrigin (o, element) {\r\n  const origin = o.origin\r\n  // First check if origin is in ox or originX\r\n  let ox = o.ox != null\n    ? o.ox\r\n    : o.originX != null\n      ? o.originX\r\n      : 'center'\r\n  let oy = o.oy != null\n    ? o.oy\r\n    : o.originY != null\n      ? o.originY\r\n      : 'center'\r\n\r\n  // Then check if origin was used and overwrite in that case\r\n  if (origin != null) {\r\n    [ ox, oy ] = Array.isArray(origin)\n      ? origin\r\n      : typeof origin === 'object'\n        ? [ origin.x, origin.y ]\r\n        : [ origin, origin ]\r\n  }\r\n\r\n  // Make sure to only call bbox when actually needed\r\n  const condX = typeof ox === 'string'\r\n  const condY = typeof oy === 'string'\r\n  if (condX || condY) {\r\n    const { height, width, x, y } = element.bbox()\r\n\r\n    // And only overwrite if string was passed for this specific axis\r\n    if (condX) {\r\n      ox = ox.includes('left')\n        ? x\r\n        : ox.includes('right')\n          ? x + width\r\n          : x + width / 2\r\n    }\r\n\r\n    if (condY) {\r\n      oy = oy.includes('top')\n        ? y\r\n        : oy.includes('bottom')\n          ? y + height\r\n          : y + height / 2\r\n    }\r\n  }\r\n\r\n  // Return the origin as it is if it wasn't a string\r\n  return [ ox, oy ]\r\n}\r\n","// Default namespaces\nexport const svg = 'http://www.w3.org/2000/svg'\nexport const html = 'http://www.w3.org/1999/xhtml'\nexport const xmlns = 'http://www.w3.org/2000/xmlns/'\nexport const xlink = 'http://www.w3.org/1999/xlink'\nexport const svgjs = 'http://svgjs.dev/svgjs'\n","export const globals = {\r\n  window: typeof window === 'undefined' ? null : window,\r\n  document: typeof document === 'undefined' ? null : document\r\n}\r\n\r\nexport function registerWindow (win = null, doc = null) {\r\n  globals.window = win\r\n  globals.document = doc\r\n}\r\n\r\nconst save = {}\r\n\r\nexport function saveWindow () {\r\n  save.window = globals.window\r\n  save.document = globals.document\r\n}\r\n\r\nexport function restoreWindow () {\r\n  globals.window = save.window\r\n  globals.document = save.document\r\n}\r\n\r\nexport function withWindow (win, fn) {\r\n  saveWindow()\r\n  registerWindow(win, win.document)\r\n  fn(win, win.document)\r\n  restoreWindow()\r\n}\r\n\r\nexport function getWindow () {\r\n  return globals.window\r\n}\r\n","export default class Base {\r\n  // constructor (node/*, {extensions = []} */) {\r\n  //   // this.tags = []\r\n  //   //\r\n  //   // for (let extension of extensions) {\r\n  //   //   extension.setup.call(this, node)\r\n  //   //   this.tags.push(extension.name)\r\n  //   // }\r\n  // }\r\n}\r\n","import { addMethodNames } from './methods.js'\nimport { capitalize } from './utils.js'\nimport { svg } from '../modules/core/namespaces.js'\nimport { globals } from '../utils/window.js'\nimport Base from '../types/Base.js'\n\nconst elements = {}\nexport const root = '___SYMBOL___ROOT___'\n\n// Method for element creation\nexport function create (name, ns = svg) {\n  // create element\n  return globals.document.createElementNS(ns, name)\n}\n\nexport function makeInstance (element, isHTML = false) {\n  if (element instanceof Base) return element\n\n  if (typeof element === 'object') {\n    return adopter(element)\n  }\n\n  if (element == null) {\n    return new elements[root]()\n  }\n\n  if (typeof element === 'string' && element.charAt(0) !== '<') {\n    return adopter(globals.document.querySelector(element))\n  }\n\n  // Make sure, that HTML elements are created with the correct namespace\n  const wrapper = isHTML ? globals.document.createElement('div') : create('svg')\n  wrapper.innerHTML = element\n\n  // We can use firstChild here because we know,\n  // that the first char is < and thus an element\n  element = adopter(wrapper.firstChild)\n\n  // make sure, that element doesnt have its wrapper attached\n  wrapper.removeChild(wrapper.firstChild)\n  return element\n}\n\nexport function nodeOrNew (name, node) {\n  return (node && node.ownerDocument && node instanceof node.ownerDocument.defaultView.Node) ? node : create(name)\n}\n\n// Adopt existing svg elements\nexport function adopt (node) {\n  // check for presence of node\n  if (!node) return null\n\n  // make sure a node isn't already adopted\n  if (node.instance instanceof Base) return node.instance\n\n  if (node.nodeName === '#document-fragment') {\n    return new elements.Fragment(node)\n  }\n\n  // initialize variables\n  let className = capitalize(node.nodeName || 'Dom')\n\n  // Make sure that gradients are adopted correctly\n  if (className === 'LinearGradient' || className === 'RadialGradient') {\n    className = 'Gradient'\n\n  // Fallback to Dom if element is not known\n  } else if (!elements[className]) {\n    className = 'Dom'\n  }\n\n  return new elements[className](node)\n}\n\nlet adopter = adopt\n\nexport function mockAdopt (mock = adopt) {\n  adopter = mock\n}\n\nexport function register (element, name = element.name, asRoot = false) {\n  elements[name] = element\n  if (asRoot) elements[root] = element\n\n  addMethodNames(Object.getOwnPropertyNames(element.prototype))\n\n  return element\n}\n\nexport function getClass (name) {\n  return elements[name]\n}\n\n// Element id sequence\nlet did = 1000\n\n// Get next named element id\nexport function eid (name) {\n  return 'Svgjs' + capitalize(name) + (did++)\n}\n\n// Deep new id assignment\nexport function assignNewId (node) {\n  // do the same for SVG child nodes as well\n  for (let i = node.children.length - 1; i >= 0; i--) {\n    assignNewId(node.children[i])\n  }\n\n  if (node.id) {\n    node.id = eid(node.nodeName)\n    return node\n  }\n\n  return node\n}\n\n// Method for extending objects\nexport function extend (modules, methods) {\n  let key, i\n\n  modules = Array.isArray(modules) ? modules : [ modules ]\n\n  for (i = modules.length - 1; i >= 0; i--) {\n    for (key in methods) {\n      modules[i].prototype[key] = methods[key]\n    }\n  }\n}\n\nexport function wrapWithAttrCheck (fn) {\n  return function (...args) {\n    const o = args[args.length - 1]\n\n    if (o && o.constructor === Object && !(o instanceof Array)) {\n      return fn.apply(this, args.slice(0, -1)).attr(o)\n    } else {\n      return fn.apply(this, args)\n    }\n  }\n}\n","import { makeInstance } from '../../utils/adopter.js'\r\nimport { registerMethods } from '../../utils/methods.js'\r\n\r\n// Get all siblings, including myself\r\nexport function siblings () {\r\n  return this.parent().children()\r\n}\r\n\r\n// Get the current position siblings\r\nexport function position () {\r\n  return this.parent().index(this)\r\n}\r\n\r\n// Get the next element (will return null if there is none)\r\nexport function next () {\r\n  return this.siblings()[this.position() + 1]\r\n}\r\n\r\n// Get the next element (will return null if there is none)\r\nexport function prev () {\r\n  return this.siblings()[this.position() - 1]\r\n}\r\n\r\n// Send given element one step forward\r\nexport function forward () {\r\n  const i = this.position()\r\n  const p = this.parent()\r\n\r\n  // move node one step forward\r\n  p.add(this.remove(), i + 1)\r\n\r\n  return this\r\n}\r\n\r\n// Send given element one step backward\r\nexport function backward () {\r\n  const i = this.position()\r\n  const p = this.parent()\r\n\r\n  p.add(this.remove(), i ? i - 1 : 0)\r\n\r\n  return this\r\n}\r\n\r\n// Send given element all the way to the front\r\nexport function front () {\r\n  const p = this.parent()\r\n\r\n  // Move node forward\r\n  p.add(this.remove())\r\n\r\n  return this\r\n}\r\n\r\n// Send given element all the way to the back\r\nexport function back () {\r\n  const p = this.parent()\r\n\r\n  // Move node back\r\n  p.add(this.remove(), 0)\r\n\r\n  return this\r\n}\r\n\r\n// Inserts a given element before the targeted element\r\nexport function before (element) {\r\n  element = makeInstance(element)\r\n  element.remove()\r\n\r\n  const i = this.position()\r\n\r\n  this.parent().add(element, i)\r\n\r\n  return this\r\n}\r\n\r\n// Inserts a given element after the targeted element\r\nexport function after (element) {\r\n  element = makeInstance(element)\r\n  element.remove()\r\n\r\n  const i = this.position()\r\n\r\n  this.parent().add(element, i + 1)\r\n\r\n  return this\r\n}\r\n\r\nexport function insertBefore (element) {\r\n  element = makeInstance(element)\r\n  element.before(this)\r\n  return this\r\n}\r\n\r\nexport function insertAfter (element) {\r\n  element = makeInstance(element)\r\n  element.after(this)\r\n  return this\r\n}\r\n\r\nregisterMethods('Dom', {\r\n  siblings,\r\n  position,\r\n  next,\r\n  prev,\r\n  forward,\r\n  backward,\r\n  front,\r\n  back,\r\n  before,\r\n  after,\r\n  insertBefore,\r\n  insertAfter\r\n})\r\n","// Parse unit value\r\nexport const numberAndUnit = /^([+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?)([a-z%]*)$/i\r\n\r\n// Parse hex value\r\nexport const hex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i\r\n\r\n// Parse rgb value\r\nexport const rgb = /rgb\\((\\d+),(\\d+),(\\d+)\\)/\r\n\r\n// Parse reference id\r\nexport const reference = /(#[a-z_][a-z0-9\\-_]*)/i\r\n\r\n// splits a transformation chain\r\nexport const transforms = /\\)\\s*,?\\s*/\r\n\r\n// Whitespace\r\nexport const whitespace = /\\s/g\r\n\r\n// Test hex value\r\nexport const isHex = /^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i\r\n\r\n// Test rgb value\r\nexport const isRgb = /^rgb\\(/\r\n\r\n// Test for blank string\r\nexport const isBlank = /^(\\s+)?$/\r\n\r\n// Test for numeric string\r\nexport const isNumber = /^[+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i\r\n\r\n// Test for image url\r\nexport const isImage = /\\.(jpg|jpeg|png|gif|svg)(\\?[^=]+.*)?/i\r\n\r\n// split at whitespace and comma\r\nexport const delimiter = /[\\s,]+/\r\n\r\n// Test for path letter\r\nexport const isPathLetter = /[MLHVCSQTAZ]/i\r\n","import { delimiter } from '../core/regex.js'\r\nimport { registerMethods } from '../../utils/methods.js'\r\n\r\n// Return array of classes on the node\r\nexport function classes () {\r\n  const attr = this.attr('class')\r\n  return attr == null ? [] : attr.trim().split(delimiter)\r\n}\r\n\r\n// Return true if class exists on the node, false otherwise\r\nexport function hasClass (name) {\r\n  return this.classes().indexOf(name) !== -1\r\n}\r\n\r\n// Add class to the node\r\nexport function addClass (name) {\r\n  if (!this.hasClass(name)) {\r\n    const array = this.classes()\r\n    array.push(name)\r\n    this.attr('class', array.join(' '))\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Remove class from the node\r\nexport function removeClass (name) {\r\n  if (this.hasClass(name)) {\r\n    this.attr('class', this.classes().filter(function (c) {\r\n      return c !== name\r\n    }).join(' '))\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Toggle the presence of a class on the node\r\nexport function toggleClass (name) {\r\n  return this.hasClass(name) ? this.removeClass(name) : this.addClass(name)\r\n}\r\n\r\nregisterMethods('Dom', {\r\n  classes, hasClass, addClass, removeClass, toggleClass\r\n})\r\n","import { camelCase } from '../../utils/utils.js'\r\nimport { isBlank } from '../core/regex.js'\r\nimport { registerMethods } from '../../utils/methods.js'\r\n\r\n// Dynamic style generator\r\nexport function css (style, val) {\r\n  const ret = {}\r\n  if (arguments.length === 0) {\r\n    // get full style as object\r\n    this.node.style.cssText.split(/\\s*;\\s*/)\r\n      .filter(function (el) {\r\n        return !!el.length\r\n      })\r\n      .forEach(function (el) {\r\n        const t = el.split(/\\s*:\\s*/)\r\n        ret[t[0]] = t[1]\r\n      })\r\n    return ret\r\n  }\r\n\r\n  if (arguments.length < 2) {\r\n    // get style properties as array\r\n    if (Array.isArray(style)) {\r\n      for (const name of style) {\r\n        const cased = camelCase(name)\r\n        ret[name] = this.node.style[cased]\r\n      }\r\n      return ret\r\n    }\r\n\r\n    // get style for property\r\n    if (typeof style === 'string') {\r\n      return this.node.style[camelCase(style)]\r\n    }\r\n\r\n    // set styles in object\r\n    if (typeof style === 'object') {\r\n      for (const name in style) {\r\n        // set empty string if null/undefined/'' was given\r\n        this.node.style[camelCase(name)]\r\n          = (style[name] == null || isBlank.test(style[name])) ? '' : style[name]\r\n      }\r\n    }\r\n  }\r\n\r\n  // set style for property\r\n  if (arguments.length === 2) {\r\n    this.node.style[camelCase(style)]\r\n      = (val == null || isBlank.test(val)) ? '' : val\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Show element\r\nexport function show () {\r\n  return this.css('display', '')\r\n}\r\n\r\n// Hide element\r\nexport function hide () {\r\n  return this.css('display', 'none')\r\n}\r\n\r\n// Is element visible?\r\nexport function visible () {\r\n  return this.css('display') !== 'none'\r\n}\r\n\r\nregisterMethods('Dom', {\r\n  css, show, hide, visible\r\n})\r\n","import { registerMethods } from '../../utils/methods.js'\r\nimport { filter, map } from '../../utils/utils.js'\r\n\r\n// Store data values on svg nodes\r\nexport function data (a, v, r) {\r\n  if (a == null) {\r\n    // get an object of attributes\r\n    return this.data(map(filter(this.node.attributes, (el) => el.nodeName.indexOf('data-') === 0), (el) => el.nodeName.slice(5)))\r\n  } else if (a instanceof Array) {\r\n    const data = {}\r\n    for (const key of a) {\r\n      data[key] = this.data(key)\r\n    }\r\n    return data\r\n  } else if (typeof a === 'object') {\r\n    for (v in a) {\r\n      this.data(v, a[v])\r\n    }\r\n  } else if (arguments.length < 2) {\r\n    try {\r\n      return JSON.parse(this.attr('data-' + a))\r\n    } catch (e) {\r\n      return this.attr('data-' + a)\r\n    }\r\n  } else {\r\n    this.attr('data-' + a,\r\n      v === null\n        ? null\r\n        : r === true || typeof v === 'string' || typeof v === 'number'\n          ? v\r\n          : JSON.stringify(v)\r\n    )\r\n  }\r\n\r\n  return this\r\n}\r\n\r\nregisterMethods('Dom', { data })\r\n","import { registerMethods } from '../../utils/methods.js'\r\n\r\n// Remember arbitrary data\r\nexport function remember (k, v) {\r\n  // remember every item in an object individually\r\n  if (typeof arguments[0] === 'object') {\r\n    for (const key in k) {\r\n      this.remember(key, k[key])\r\n    }\r\n  } else if (arguments.length === 1) {\r\n    // retrieve memory\r\n    return this.memory()[k]\r\n  } else {\r\n    // store memory\r\n    this.memory()[k] = v\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Erase a given memory\r\nexport function forget () {\r\n  if (arguments.length === 0) {\r\n    this._memory = {}\r\n  } else {\r\n    for (let i = arguments.length - 1; i >= 0; i--) {\r\n      delete this.memory()[arguments[i]]\r\n    }\r\n  }\r\n  return this\r\n}\r\n\r\n// This triggers creation of a new hidden class which is not performant\r\n// However, this function is not rarely used so it will not happen frequently\r\n// Return local memory object\r\nexport function memory () {\r\n  return (this._memory = this._memory || {})\r\n}\r\n\r\nregisterMethods('Dom', { remember, forget, memory })\r\n","\r\nimport { hex, isHex, isRgb, rgb, whitespace } from '../modules/core/regex.js'\r\n\r\nfunction sixDigitHex (hex) {\r\n  return hex.length === 4\r\n    ? [ '#',\r\n      hex.substring(1, 2), hex.substring(1, 2),\r\n      hex.substring(2, 3), hex.substring(2, 3),\r\n      hex.substring(3, 4), hex.substring(3, 4)\r\n    ].join('')\r\n    : hex\r\n}\r\n\r\nfunction componentHex (component) {\r\n  const integer = Math.round(component)\r\n  const bounded = Math.max(0, Math.min(255, integer))\r\n  const hex = bounded.toString(16)\r\n  return hex.length === 1 ? '0' + hex : hex\r\n}\r\n\r\nfunction is (object, space) {\r\n  for (let i = space.length; i--;) {\r\n    if (object[space[i]] == null) {\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\nfunction getParameters (a, b) {\r\n  const params = is(a, 'rgb')\n    ? { _a: a.r, _b: a.g, _c: a.b, _d: 0, space: 'rgb' }\r\n    : is(a, 'xyz')\n      ? { _a: a.x, _b: a.y, _c: a.z, _d: 0, space: 'xyz' }\r\n      : is(a, 'hsl')\n        ? { _a: a.h, _b: a.s, _c: a.l, _d: 0, space: 'hsl' }\r\n        : is(a, 'lab')\n          ? { _a: a.l, _b: a.a, _c: a.b, _d: 0, space: 'lab' }\r\n          : is(a, 'lch')\n            ? { _a: a.l, _b: a.c, _c: a.h, _d: 0, space: 'lch' }\r\n            : is(a, 'cmyk')\n              ? { _a: a.c, _b: a.m, _c: a.y, _d: a.k, space: 'cmyk' }\r\n              : { _a: 0, _b: 0, _c: 0, space: 'rgb' }\r\n\r\n  params.space = b || params.space\r\n  return params\r\n}\r\n\r\nfunction cieSpace (space) {\r\n  if (space === 'lab' || space === 'xyz' || space === 'lch') {\r\n    return true\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\nfunction hueToRgb (p, q, t) {\r\n  if (t < 0) t += 1\r\n  if (t > 1) t -= 1\r\n  if (t < 1 / 6) return p + (q - p) * 6 * t\r\n  if (t < 1 / 2) return q\r\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\r\n  return p\r\n}\r\n\r\nexport default class Color {\r\n  constructor (...inputs) {\r\n    this.init(...inputs)\r\n  }\r\n\r\n  // Test if given value is a color\n  static isColor (color) {\r\n    return color && (\r\n      color instanceof Color\r\n      || this.isRgb(color)\r\n      || this.test(color)\r\n    )\r\n  }\n\n  // Test if given value is an rgb object\n  static isRgb (color) {\r\n    return color && typeof color.r === 'number'\r\n      && typeof color.g === 'number'\r\n      && typeof color.b === 'number'\r\n  }\n\n  /*\r\n  Generating random colors\r\n  */\n  static random (mode = 'vibrant', t, u) {\r\n\r\n    // Get the math modules\r\n    const { random, round, sin, PI: pi } = Math\r\n\r\n    // Run the correct generator\r\n    if (mode === 'vibrant') {\r\n\r\n      const l = (81 - 57) * random() + 57\r\n      const c = (83 - 45) * random() + 45\r\n      const h = 360 * random()\r\n      const color = new Color(l, c, h, 'lch')\r\n      return color\r\n\r\n    } else if (mode === 'sine') {\r\n\r\n      t = t == null ? random() : t\r\n      const r = round(80 * sin(2 * pi * t / 0.5 + 0.01) + 150)\r\n      const g = round(50 * sin(2 * pi * t / 0.5 + 4.6) + 200)\r\n      const b = round(100 * sin(2 * pi * t / 0.5 + 2.3) + 150)\r\n      const color = new Color(r, g, b)\r\n      return color\r\n\r\n    } else if (mode === 'pastel') {\r\n\r\n      const l = (94 - 86) * random() + 86\r\n      const c = (26 - 9) * random() + 9\r\n      const h = 360 * random()\r\n      const color = new Color(l, c, h, 'lch')\r\n      return color\r\n\r\n    } else if (mode === 'dark') {\r\n\r\n      const l = 10 + 10 * random()\r\n      const c = (125 - 75) * random() + 86\r\n      const h = 360 * random()\r\n      const color = new Color(l, c, h, 'lch')\r\n      return color\r\n\r\n    } else if (mode === 'rgb') {\r\n\r\n      const r = 255 * random()\r\n      const g = 255 * random()\r\n      const b = 255 * random()\r\n      const color = new Color(r, g, b)\r\n      return color\r\n\r\n    } else if (mode === 'lab') {\r\n\r\n      const l = 100 * random()\r\n      const a = 256 * random() - 128\r\n      const b = 256 * random() - 128\r\n      const color = new Color(l, a, b, 'lab')\r\n      return color\r\n\r\n    } else if (mode === 'grey') {\r\n\r\n      const grey = 255 * random()\r\n      const color = new Color(grey, grey, grey)\r\n      return color\r\n\r\n    } else {\r\n\r\n      throw new Error('Unsupported random color mode')\r\n\r\n    }\r\n  }\n\n  // Test if given value is a color string\n  static test (color) {\r\n    return (typeof color === 'string')\r\n      && (isHex.test(color) || isRgb.test(color))\r\n  }\n\n  cmyk () {\r\n\r\n    // Get the rgb values for the current color\r\n    const { _a, _b, _c } = this.rgb()\r\n    const [ r, g, b ] = [ _a, _b, _c ].map(v => v / 255)\r\n\r\n    // Get the cmyk values in an unbounded format\r\n    const k = Math.min(1 - r, 1 - g, 1 - b)\r\n\r\n    if (k === 1) {\r\n      // Catch the black case\r\n      return new Color(0, 0, 0, 1, 'cmyk')\r\n    }\r\n\r\n    const c = (1 - r - k) / (1 - k)\r\n    const m = (1 - g - k) / (1 - k)\r\n    const y = (1 - b - k) / (1 - k)\r\n\r\n    // Construct the new color\r\n    const color = new Color(c, m, y, k, 'cmyk')\r\n    return color\r\n  }\n\n  hsl () {\r\n\r\n    // Get the rgb values\r\n    const { _a, _b, _c } = this.rgb()\r\n    const [ r, g, b ] = [ _a, _b, _c ].map(v => v / 255)\r\n\r\n    // Find the maximum and minimum values to get the lightness\r\n    const max = Math.max(r, g, b)\r\n    const min = Math.min(r, g, b)\r\n    const l = (max + min) / 2\r\n\r\n    // If the r, g, v values are identical then we are grey\r\n    const isGrey = max === min\r\n\r\n    // Calculate the hue and saturation\r\n    const delta = max - min\r\n    const s = isGrey\n      ? 0\r\n      : l > 0.5\n        ? delta / (2 - max - min)\r\n        : delta / (max + min)\r\n    const h = isGrey\n      ? 0\r\n      : max === r\n        ? ((g - b) / delta + (g < b ? 6 : 0)) / 6\r\n        : max === g\n          ? ((b - r) / delta + 2) / 6\r\n          : max === b\n            ? ((r - g) / delta + 4) / 6\r\n            : 0\r\n\r\n    // Construct and return the new color\r\n    const color = new Color(360 * h, 100 * s, 100 * l, 'hsl')\r\n    return color\r\n  }\n\n  init (a = 0, b = 0, c = 0, d = 0, space = 'rgb') {\r\n    // This catches the case when a falsy value is passed like ''\r\n    a = !a ? 0 : a\r\n\r\n    // Reset all values in case the init function is rerun with new color space\r\n    if (this.space) {\r\n      for (const component in this.space) {\r\n        delete this[this.space[component]]\r\n      }\r\n    }\r\n\r\n    if (typeof a === 'number') {\r\n      // Allow for the case that we don't need d...\r\n      space = typeof d === 'string' ? d : space\r\n      d = typeof d === 'string' ? 0 : d\r\n\r\n      // Assign the values straight to the color\r\n      Object.assign(this, { _a: a, _b: b, _c: c, _d: d, space })\r\n    // If the user gave us an array, make the color from it\r\n    } else if (a instanceof Array) {\r\n      this.space = b || (typeof a[3] === 'string' ? a[3] : a[4]) || 'rgb'\r\n      Object.assign(this, { _a: a[0], _b: a[1], _c: a[2], _d: a[3] || 0 })\r\n    } else if (a instanceof Object) {\r\n      // Set the object up and assign its values directly\r\n      const values = getParameters(a, b)\r\n      Object.assign(this, values)\r\n    } else if (typeof a === 'string') {\r\n      if (isRgb.test(a)) {\r\n        const noWhitespace = a.replace(whitespace, '')\r\n        const [ _a, _b, _c ] = rgb.exec(noWhitespace)\r\n          .slice(1, 4).map(v => parseInt(v))\r\n        Object.assign(this, { _a, _b, _c, _d: 0, space: 'rgb' })\r\n      } else if (isHex.test(a)) {\r\n        const hexParse = v => parseInt(v, 16)\r\n        const [ , _a, _b, _c ] = hex.exec(sixDigitHex(a)).map(hexParse)\r\n        Object.assign(this, { _a, _b, _c, _d: 0, space: 'rgb' })\r\n      } else throw Error('Unsupported string format, can\\'t construct Color')\r\n    }\r\n\r\n    // Now add the components as a convenience\r\n    const { _a, _b, _c, _d } = this\r\n    const components = this.space === 'rgb'\n      ? { r: _a, g: _b, b: _c }\r\n      : this.space === 'xyz'\n        ? { x: _a, y: _b, z: _c }\r\n        : this.space === 'hsl'\n          ? { h: _a, s: _b, l: _c }\r\n          : this.space === 'lab'\n            ? { l: _a, a: _b, b: _c }\r\n            : this.space === 'lch'\n              ? { l: _a, c: _b, h: _c }\r\n              : this.space === 'cmyk'\n                ? { c: _a, m: _b, y: _c, k: _d }\r\n                : {}\r\n    Object.assign(this, components)\r\n  }\r\n\r\n  lab () {\r\n    // Get the xyz color\r\n    const { x, y, z } = this.xyz()\r\n\r\n    // Get the lab components\r\n    const l = (116 * y) - 16\r\n    const a = 500 * (x - y)\r\n    const b = 200 * (y - z)\r\n\r\n    // Construct and return a new color\r\n    const color = new Color(l, a, b, 'lab')\r\n    return color\r\n  }\n\n  lch () {\r\n\r\n    // Get the lab color directly\r\n    const { l, a, b } = this.lab()\r\n\r\n    // Get the chromaticity and the hue using polar coordinates\r\n    const c = Math.sqrt(a ** 2 + b ** 2)\r\n    let h = 180 * Math.atan2(b, a) / Math.PI\r\n    if (h < 0) {\r\n      h *= -1\r\n      h = 360 - h\r\n    }\r\n\r\n    // Make a new color and return it\r\n    const color = new Color(l, c, h, 'lch')\r\n    return color\r\n  }\n  /*\r\n  Conversion Methods\r\n  */\r\n\r\n  rgb () {\r\n    if (this.space === 'rgb') {\r\n      return this\r\n    } else if (cieSpace(this.space)) {\r\n      // Convert to the xyz color space\r\n      let { x, y, z } = this\r\n      if (this.space === 'lab' || this.space === 'lch') {\r\n        // Get the values in the lab space\r\n        let { l, a, b } = this\r\n        if (this.space === 'lch') {\r\n          const { c, h } = this\r\n          const dToR = Math.PI / 180\r\n          a = c * Math.cos(dToR * h)\r\n          b = c * Math.sin(dToR * h)\r\n        }\r\n\r\n        // Undo the nonlinear function\r\n        const yL = (l + 16) / 116\r\n        const xL = a / 500 + yL\r\n        const zL = yL - b / 200\r\n\r\n        // Get the xyz values\r\n        const ct = 16 / 116\r\n        const mx = 0.008856\r\n        const nm = 7.787\r\n        x = 0.95047 * ((xL ** 3 > mx) ? xL ** 3 : (xL - ct) / nm)\r\n        y = 1.00000 * ((yL ** 3 > mx) ? yL ** 3 : (yL - ct) / nm)\r\n        z = 1.08883 * ((zL ** 3 > mx) ? zL ** 3 : (zL - ct) / nm)\r\n      }\r\n\r\n      // Convert xyz to unbounded rgb values\r\n      const rU = x * 3.2406 + y * -1.5372 + z * -0.4986\r\n      const gU = x * -0.9689 + y * 1.8758 + z * 0.0415\r\n      const bU = x * 0.0557 + y * -0.2040 + z * 1.0570\r\n\r\n      // Convert the values to true rgb values\r\n      const pow = Math.pow\r\n      const bd = 0.0031308\r\n      const r = (rU > bd) ? (1.055 * pow(rU, 1 / 2.4) - 0.055) : 12.92 * rU\r\n      const g = (gU > bd) ? (1.055 * pow(gU, 1 / 2.4) - 0.055) : 12.92 * gU\r\n      const b = (bU > bd) ? (1.055 * pow(bU, 1 / 2.4) - 0.055) : 12.92 * bU\r\n\r\n      // Make and return the color\r\n      const color = new Color(255 * r, 255 * g, 255 * b)\r\n      return color\r\n    } else if (this.space === 'hsl') {\r\n      // https://bgrins.github.io/TinyColor/docs/tinycolor.html\r\n      // Get the current hsl values\r\n      let { h, s, l } = this\r\n      h /= 360\r\n      s /= 100\r\n      l /= 100\r\n\r\n      // If we are grey, then just make the color directly\r\n      if (s === 0) {\r\n        l *= 255\r\n        const color = new Color(l, l, l)\r\n        return color\r\n      }\r\n\r\n      // TODO I have no idea what this does :D If you figure it out, tell me!\r\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s\r\n      const p = 2 * l - q\r\n\r\n      // Get the rgb values\r\n      const r = 255 * hueToRgb(p, q, h + 1 / 3)\r\n      const g = 255 * hueToRgb(p, q, h)\r\n      const b = 255 * hueToRgb(p, q, h - 1 / 3)\r\n\r\n      // Make a new color\r\n      const color = new Color(r, g, b)\r\n      return color\r\n    } else if (this.space === 'cmyk') {\r\n      // https://gist.github.com/felipesabino/5066336\r\n      // Get the normalised cmyk values\r\n      const { c, m, y, k } = this\r\n\r\n      // Get the rgb values\r\n      const r = 255 * (1 - Math.min(1, c * (1 - k) + k))\r\n      const g = 255 * (1 - Math.min(1, m * (1 - k) + k))\r\n      const b = 255 * (1 - Math.min(1, y * (1 - k) + k))\r\n\r\n      // Form the color and return it\r\n      const color = new Color(r, g, b)\r\n      return color\r\n    } else {\r\n      return this\r\n    }\r\n  }\r\n\n  toArray () {\r\n    const { _a, _b, _c, _d, space } = this\r\n    return [ _a, _b, _c, _d, space ]\r\n  }\n\n  toHex () {\r\n    const [ r, g, b ] = this._clamped().map(componentHex)\r\n    return `#${r}${g}${b}`\r\n  }\n\n  toRgb () {\r\n    const [ rV, gV, bV ] = this._clamped()\r\n    const string = `rgb(${rV},${gV},${bV})`\r\n    return string\r\n  }\n\n  toString () {\r\n    return this.toHex()\r\n  }\n\n  xyz () {\r\n\r\n    // Normalise the red, green and blue values\r\n    const { _a: r255, _b: g255, _c: b255 } = this.rgb()\r\n    const [ r, g, b ] = [ r255, g255, b255 ].map(v => v / 255)\r\n\r\n    // Convert to the lab rgb space\r\n    const rL = (r > 0.04045) ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92\r\n    const gL = (g > 0.04045) ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92\r\n    const bL = (b > 0.04045) ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92\r\n\r\n    // Convert to the xyz color space without bounding the values\r\n    const xU = (rL * 0.4124 + gL * 0.3576 + bL * 0.1805) / 0.95047\r\n    const yU = (rL * 0.2126 + gL * 0.7152 + bL * 0.0722) / 1.00000\r\n    const zU = (rL * 0.0193 + gL * 0.1192 + bL * 0.9505) / 1.08883\r\n\r\n    // Get the proper xyz values by applying the bounding\r\n    const x = (xU > 0.008856) ? Math.pow(xU, 1 / 3) : (7.787 * xU) + 16 / 116\r\n    const y = (yU > 0.008856) ? Math.pow(yU, 1 / 3) : (7.787 * yU) + 16 / 116\r\n    const z = (zU > 0.008856) ? Math.pow(zU, 1 / 3) : (7.787 * zU) + 16 / 116\r\n\r\n    // Make and return the color\r\n    const color = new Color(x, y, z, 'xyz')\r\n    return color\r\n  }\r\n\n  /*\r\n  Input and Output methods\r\n  */\r\n\r\n  _clamped () {\r\n    const { _a, _b, _c } = this.rgb()\r\n    const { max, min, round } = Math\r\n    const format = v => max(0, min(round(v), 255))\r\n    return [ _a, _b, _c ].map(format)\r\n  }\r\n\r\n  /*\r\n  Constructing colors\r\n  */\r\n\r\n}\r\n","import Matrix from './Matrix.js'\r\n\r\nexport default class Point {\r\n  // Initialize\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  // Clone point\n  clone () {\r\n    return new Point(this)\r\n  }\n\n  init (x, y) {\r\n    const base = { x: 0, y: 0 }\r\n\r\n    // ensure source as object\r\n    const source = Array.isArray(x)\n      ? { x: x[0], y: x[1] }\r\n      : typeof x === 'object'\n        ? { x: x.x, y: x.y }\r\n        : { x: x, y: y }\r\n\r\n    // merge source\r\n    this.x = source.x == null ? base.x : source.x\r\n    this.y = source.y == null ? base.y : source.y\r\n\r\n    return this\r\n  }\r\n\r\n  toArray () {\r\n    return [ this.x, this.y ]\r\n  }\n\n  transform (m) {\r\n    return this.clone().transformO(m)\r\n  }\r\n\r\n  // Transform point with matrix\r\n  transformO (m) {\r\n    if (!Matrix.isMatrixLike(m)) {\r\n      m = new Matrix(m)\r\n    }\r\n\r\n    const { x, y } = this\r\n\r\n    // Perform the matrix multiplication\r\n    this.x = m.a * x + m.c * y + m.e\r\n    this.y = m.b * x + m.d * y + m.f\r\n\r\n    return this\r\n  }\r\n\r\n}\r\n\r\nexport function point (x, y) {\r\n  return new Point(x, y).transform(this.screenCTM().inverse())\r\n}\r\n","import { delimiter } from '../modules/core/regex.js'\r\nimport { radians } from '../utils/utils.js'\r\nimport { register } from '../utils/adopter.js'\r\nimport Element from '../elements/Element.js'\r\nimport Point from './Point.js'\r\n\r\nfunction closeEnough (a, b, threshold) {\r\n  return Math.abs(b - a) < (threshold || 1e-6)\r\n}\r\n\r\nexport default class Matrix {\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  static formatTransforms (o) {\r\n    // Get all of the parameters required to form the matrix\r\n    const flipBoth = o.flip === 'both' || o.flip === true\r\n    const flipX = o.flip && (flipBoth || o.flip === 'x') ? -1 : 1\r\n    const flipY = o.flip && (flipBoth || o.flip === 'y') ? -1 : 1\r\n    const skewX = o.skew && o.skew.length\n      ? o.skew[0]\r\n      : isFinite(o.skew)\n        ? o.skew\r\n        : isFinite(o.skewX)\n          ? o.skewX\r\n          : 0\r\n    const skewY = o.skew && o.skew.length\n      ? o.skew[1]\r\n      : isFinite(o.skew)\n        ? o.skew\r\n        : isFinite(o.skewY)\n          ? o.skewY\r\n          : 0\r\n    const scaleX = o.scale && o.scale.length\n      ? o.scale[0] * flipX\r\n      : isFinite(o.scale)\n        ? o.scale * flipX\r\n        : isFinite(o.scaleX)\n          ? o.scaleX * flipX\r\n          : flipX\r\n    const scaleY = o.scale && o.scale.length\n      ? o.scale[1] * flipY\r\n      : isFinite(o.scale)\n        ? o.scale * flipY\r\n        : isFinite(o.scaleY)\n          ? o.scaleY * flipY\r\n          : flipY\r\n    const shear = o.shear || 0\r\n    const theta = o.rotate || o.theta || 0\r\n    const origin = new Point(o.origin || o.around || o.ox || o.originX, o.oy || o.originY)\r\n    const ox = origin.x\r\n    const oy = origin.y\r\n    // We need Point to be invalid if nothing was passed because we cannot default to 0 here. Thats why NaN\r\n    const position = new Point(o.position || o.px || o.positionX || NaN, o.py || o.positionY || NaN)\r\n    const px = position.x\r\n    const py = position.y\r\n    const translate = new Point(o.translate || o.tx || o.translateX, o.ty || o.translateY)\r\n    const tx = translate.x\r\n    const ty = translate.y\r\n    const relative = new Point(o.relative || o.rx || o.relativeX, o.ry || o.relativeY)\r\n    const rx = relative.x\r\n    const ry = relative.y\r\n\r\n    // Populate all of the values\r\n    return {\r\n      scaleX, scaleY, skewX, skewY, shear, theta, rx, ry, tx, ty, ox, oy, px, py\r\n    }\r\n  }\n\n  static fromArray (a) {\r\n    return { a: a[0], b: a[1], c: a[2], d: a[3], e: a[4], f: a[5] }\r\n  }\n\n  static isMatrixLike (o) {\r\n    return (\r\n      o.a != null\r\n      || o.b != null\r\n      || o.c != null\r\n      || o.d != null\r\n      || o.e != null\r\n      || o.f != null\r\n    )\r\n  }\n\n  // left matrix, right matrix, target matrix which is overwritten\n  static matrixMultiply (l, r, o) {\r\n    // Work out the product directly\r\n    const a = l.a * r.a + l.c * r.b\r\n    const b = l.b * r.a + l.d * r.b\r\n    const c = l.a * r.c + l.c * r.d\r\n    const d = l.b * r.c + l.d * r.d\r\n    const e = l.e + l.a * r.e + l.c * r.f\r\n    const f = l.f + l.b * r.e + l.d * r.f\r\n\r\n    // make sure to use local variables because l/r and o could be the same\r\n    o.a = a\r\n    o.b = b\r\n    o.c = c\r\n    o.d = d\r\n    o.e = e\r\n    o.f = f\r\n\r\n    return o\r\n  }\n\n  around (cx, cy, matrix) {\r\n    return this.clone().aroundO(cx, cy, matrix)\r\n  }\n\n  // Transform around a center point\n  aroundO (cx, cy, matrix) {\r\n    const dx = cx || 0\r\n    const dy = cy || 0\r\n    return this.translateO(-dx, -dy).lmultiplyO(matrix).translateO(dx, dy)\r\n  }\n\n  // Clones this matrix\n  clone () {\r\n    return new Matrix(this)\r\n  }\n\n  // Decomposes this matrix into its affine parameters\n  decompose (cx = 0, cy = 0) {\r\n    // Get the parameters from the matrix\r\n    const a = this.a\r\n    const b = this.b\r\n    const c = this.c\r\n    const d = this.d\r\n    const e = this.e\r\n    const f = this.f\r\n\r\n    // Figure out if the winding direction is clockwise or counterclockwise\r\n    const determinant = a * d - b * c\r\n    const ccw = determinant > 0 ? 1 : -1\r\n\r\n    // Since we only shear in x, we can use the x basis to get the x scale\r\n    // and the rotation of the resulting matrix\r\n    const sx = ccw * Math.sqrt(a * a + b * b)\r\n    const thetaRad = Math.atan2(ccw * b, ccw * a)\r\n    const theta = 180 / Math.PI * thetaRad\r\n    const ct = Math.cos(thetaRad)\r\n    const st = Math.sin(thetaRad)\r\n\r\n    // We can then solve the y basis vector simultaneously to get the other\r\n    // two affine parameters directly from these parameters\r\n    const lam = (a * c + b * d) / determinant\r\n    const sy = ((c * sx) / (lam * a - b)) || ((d * sx) / (lam * b + a))\r\n\r\n    // Use the translations\r\n    const tx = e - cx + cx * ct * sx + cy * (lam * ct * sx - st * sy)\r\n    const ty = f - cy + cx * st * sx + cy * (lam * st * sx + ct * sy)\r\n\r\n    // Construct the decomposition and return it\r\n    return {\r\n      // Return the affine parameters\r\n      scaleX: sx,\r\n      scaleY: sy,\r\n      shear: lam,\r\n      rotate: theta,\r\n      translateX: tx,\r\n      translateY: ty,\r\n      originX: cx,\r\n      originY: cy,\r\n\r\n      // Return the matrix parameters\r\n      a: this.a,\r\n      b: this.b,\r\n      c: this.c,\r\n      d: this.d,\r\n      e: this.e,\r\n      f: this.f\r\n    }\r\n  }\n\n  // Check if two matrices are equal\n  equals (other) {\r\n    if (other === this) return true\r\n    const comp = new Matrix(other)\r\n    return closeEnough(this.a, comp.a) && closeEnough(this.b, comp.b)\r\n      && closeEnough(this.c, comp.c) && closeEnough(this.d, comp.d)\r\n      && closeEnough(this.e, comp.e) && closeEnough(this.f, comp.f)\r\n  }\n\n  // Flip matrix on x or y, at a given offset\n  flip (axis, around) {\r\n    return this.clone().flipO(axis, around)\r\n  }\n\n  flipO (axis, around) {\r\n    return axis === 'x'\n      ? this.scaleO(-1, 1, around, 0)\r\n      : axis === 'y'\n        ? this.scaleO(1, -1, 0, around)\r\n        : this.scaleO(-1, -1, axis, around || axis) // Define an x, y flip point\r\n  }\n\n  // Initialize\r\n  init (source) {\r\n    const base = Matrix.fromArray([ 1, 0, 0, 1, 0, 0 ])\r\n\r\n    // ensure source as object\r\n    source = source instanceof Element\n      ? source.matrixify()\r\n      : typeof source === 'string'\n        ? Matrix.fromArray(source.split(delimiter).map(parseFloat))\r\n        : Array.isArray(source)\n          ? Matrix.fromArray(source)\r\n          : (typeof source === 'object' && Matrix.isMatrixLike(source))\n            ? source\r\n            : (typeof source === 'object')\n              ? new Matrix().transform(source)\r\n              : arguments.length === 6\n                ? Matrix.fromArray([].slice.call(arguments))\r\n                : base\r\n\r\n    // Merge the source matrix with the base matrix\r\n    this.a = source.a != null ? source.a : base.a\r\n    this.b = source.b != null ? source.b : base.b\r\n    this.c = source.c != null ? source.c : base.c\r\n    this.d = source.d != null ? source.d : base.d\r\n    this.e = source.e != null ? source.e : base.e\r\n    this.f = source.f != null ? source.f : base.f\r\n\r\n    return this\r\n  }\r\n\n  inverse () {\r\n    return this.clone().inverseO()\r\n  }\n\n  // Inverses matrix\n  inverseO () {\r\n    // Get the current parameters out of the matrix\r\n    const a = this.a\r\n    const b = this.b\r\n    const c = this.c\r\n    const d = this.d\r\n    const e = this.e\r\n    const f = this.f\r\n\r\n    // Invert the 2x2 matrix in the top left\r\n    const det = a * d - b * c\r\n    if (!det) throw new Error('Cannot invert ' + this)\r\n\r\n    // Calculate the top 2x2 matrix\r\n    const na = d / det\r\n    const nb = -b / det\r\n    const nc = -c / det\r\n    const nd = a / det\r\n\r\n    // Apply the inverted matrix to the top right\r\n    const ne = -(na * e + nc * f)\r\n    const nf = -(nb * e + nd * f)\r\n\r\n    // Construct the inverted matrix\r\n    this.a = na\r\n    this.b = nb\r\n    this.c = nc\r\n    this.d = nd\r\n    this.e = ne\r\n    this.f = nf\r\n\r\n    return this\r\n  }\n\n  lmultiply (matrix) {\r\n    return this.clone().lmultiplyO(matrix)\r\n  }\n\n  lmultiplyO (matrix) {\r\n    const r = this\r\n    const l = matrix instanceof Matrix\r\n      ? matrix\r\n      : new Matrix(matrix)\r\n\r\n    return Matrix.matrixMultiply(l, r, this)\r\n  }\n\n  // Left multiplies by the given matrix\n  multiply (matrix) {\r\n    return this.clone().multiplyO(matrix)\r\n  }\n\n  multiplyO (matrix) {\r\n    // Get the matrices\r\n    const l = this\r\n    const r = matrix instanceof Matrix\r\n      ? matrix\r\n      : new Matrix(matrix)\r\n\r\n    return Matrix.matrixMultiply(l, r, this)\r\n  }\n\n  // Rotate matrix\n  rotate (r, cx, cy) {\r\n    return this.clone().rotateO(r, cx, cy)\r\n  }\n\n  rotateO (r, cx = 0, cy = 0) {\r\n    // Convert degrees to radians\r\n    r = radians(r)\r\n\r\n    const cos = Math.cos(r)\r\n    const sin = Math.sin(r)\r\n\r\n    const { a, b, c, d, e, f } = this\r\n\r\n    this.a = a * cos - b * sin\r\n    this.b = b * cos + a * sin\r\n    this.c = c * cos - d * sin\r\n    this.d = d * cos + c * sin\r\n    this.e = e * cos - f * sin + cy * sin - cx * cos + cx\r\n    this.f = f * cos + e * sin - cx * sin - cy * cos + cy\r\n\r\n    return this\r\n  }\n\n  // Scale matrix\n  scale (x, y, cx, cy) {\r\n    return this.clone().scaleO(...arguments)\r\n  }\n\n  scaleO (x, y = x, cx = 0, cy = 0) {\r\n    // Support uniform scaling\r\n    if (arguments.length === 3) {\r\n      cy = cx\r\n      cx = y\r\n      y = x\r\n    }\r\n\r\n    const { a, b, c, d, e, f } = this\r\n\r\n    this.a = a * x\r\n    this.b = b * y\r\n    this.c = c * x\r\n    this.d = d * y\r\n    this.e = e * x - cx * x + cx\r\n    this.f = f * y - cy * y + cy\r\n\r\n    return this\r\n  }\n\n  // Shear matrix\n  shear (a, cx, cy) {\r\n    return this.clone().shearO(a, cx, cy)\r\n  }\n\n  shearO (lx, cx = 0, cy = 0) {\r\n    const { a, b, c, d, e, f } = this\r\n\r\n    this.a = a + b * lx\r\n    this.c = c + d * lx\r\n    this.e = e + f * lx - cy * lx\r\n\r\n    return this\r\n  }\n\n  // Skew Matrix\n  skew (x, y, cx, cy) {\r\n    return this.clone().skewO(...arguments)\r\n  }\n\n  skewO (x, y = x, cx = 0, cy = 0) {\r\n    // support uniformal skew\r\n    if (arguments.length === 3) {\r\n      cy = cx\r\n      cx = y\r\n      y = x\r\n    }\r\n\r\n    // Convert degrees to radians\r\n    x = radians(x)\r\n    y = radians(y)\r\n\r\n    const lx = Math.tan(x)\r\n    const ly = Math.tan(y)\r\n\r\n    const { a, b, c, d, e, f } = this\r\n\r\n    this.a = a + b * lx\r\n    this.b = b + a * ly\r\n    this.c = c + d * lx\r\n    this.d = d + c * ly\r\n    this.e = e + f * lx - cy * lx\r\n    this.f = f + e * ly - cx * ly\r\n\r\n    return this\r\n  }\n\n  // SkewX\n  skewX (x, cx, cy) {\r\n    return this.skew(x, 0, cx, cy)\r\n  }\n\n  // SkewY\n  skewY (y, cx, cy) {\r\n    return this.skew(0, y, cx, cy)\r\n  }\n\n  toArray () {\r\n    return [ this.a, this.b, this.c, this.d, this.e, this.f ]\r\n  }\n\n  // Convert matrix to string\n  toString () {\r\n    return 'matrix(' + this.a + ',' + this.b + ',' + this.c + ',' + this.d + ',' + this.e + ',' + this.f + ')'\r\n  }\n\n  // Transform a matrix into another matrix by manipulating the space\r\n  transform (o) {\r\n    // Check if o is a matrix and then left multiply it directly\r\n    if (Matrix.isMatrixLike(o)) {\r\n      const matrix = new Matrix(o)\r\n      return matrix.multiplyO(this)\r\n    }\r\n\r\n    // Get the proposed transformations and the current transformations\r\n    const t = Matrix.formatTransforms(o)\r\n    const current = this\r\n    const { x: ox, y: oy } = new Point(t.ox, t.oy).transform(current)\r\n\r\n    // Construct the resulting matrix\r\n    const transformer = new Matrix()\r\n      .translateO(t.rx, t.ry)\r\n      .lmultiplyO(current)\r\n      .translateO(-ox, -oy)\r\n      .scaleO(t.scaleX, t.scaleY)\r\n      .skewO(t.skewX, t.skewY)\r\n      .shearO(t.shear)\r\n      .rotateO(t.theta)\r\n      .translateO(ox, oy)\r\n\r\n    // If we want the origin at a particular place, we force it there\r\n    if (isFinite(t.px) || isFinite(t.py)) {\r\n      const origin = new Point(ox, oy).transform(transformer)\r\n      // TODO: Replace t.px with isFinite(t.px)\r\n      // Doesnt work because t.px is also 0 if it wasnt passed\r\n      const dx = isFinite(t.px) ? t.px - origin.x : 0\r\n      const dy = isFinite(t.py) ? t.py - origin.y : 0\r\n      transformer.translateO(dx, dy)\r\n    }\r\n\r\n    // Translate now after positioning\r\n    transformer.translateO(t.tx, t.ty)\r\n    return transformer\r\n  }\r\n\n  // Translate matrix\r\n  translate (x, y) {\r\n    return this.clone().translateO(x, y)\r\n  }\r\n\n  translateO (x, y) {\r\n    this.e += x || 0\r\n    this.f += y || 0\r\n    return this\r\n  }\r\n\n  valueOf () {\r\n    return {\r\n      a: this.a,\r\n      b: this.b,\r\n      c: this.c,\r\n      d: this.d,\r\n      e: this.e,\r\n      f: this.f\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function ctm () {\r\n  return new Matrix(this.node.getCTM())\r\n}\r\n\r\nexport function screenCTM () {\r\n  /* https://bugzilla.mozilla.org/show_bug.cgi?id=1344537\r\n     This is needed because FF does not return the transformation matrix\r\n     for the inner coordinate system when getScreenCTM() is called on nested svgs.\r\n     However all other Browsers do that */\r\n  if (typeof this.isRoot === 'function' && !this.isRoot()) {\r\n    const rect = this.rect(1, 1)\r\n    const m = rect.node.getScreenCTM()\r\n    rect.remove()\r\n    return new Matrix(m)\r\n  }\r\n  return new Matrix(this.node.getScreenCTM())\r\n}\r\n\r\nregister(Matrix, 'Matrix')\r\n","import { globals } from '../../utils/window.js'\r\nimport { makeInstance } from '../../utils/adopter.js'\r\n\r\nexport default function parser () {\r\n  // Reuse cached element if possible\r\n  if (!parser.nodes) {\r\n    const svg = makeInstance().size(2, 0)\r\n    svg.node.style.cssText = [\r\n      'opacity: 0',\r\n      'position: absolute',\r\n      'left: -100%',\r\n      'top: -100%',\r\n      'overflow: hidden'\r\n    ].join(';')\r\n\r\n    svg.attr('focusable', 'false')\r\n    svg.attr('aria-hidden', 'true')\r\n\r\n    const path = svg.path().node\r\n\r\n    parser.nodes = { svg, path }\r\n  }\r\n\r\n  if (!parser.nodes.svg.node.parentNode) {\r\n    const b = globals.document.body || globals.document.documentElement\r\n    parser.nodes.svg.addTo(b)\r\n  }\r\n\r\n  return parser.nodes\r\n}\r\n","import { delimiter } from '../modules/core/regex.js'\r\nimport { globals } from '../utils/window.js'\r\nimport { register } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Matrix from './Matrix.js'\r\nimport Point from './Point.js'\r\nimport parser from '../modules/core/parser.js'\r\n\r\nexport function isNulledBox (box) {\r\n  return !box.width && !box.height && !box.x && !box.y\r\n}\r\n\r\nexport function domContains (node) {\r\n  return node === globals.document\r\n    || (globals.document.documentElement.contains || function (node) {\r\n      // This is IE - it does not support contains() for top-level SVGs\r\n      while (node.parentNode) {\r\n        node = node.parentNode\r\n      }\r\n      return node === globals.document\r\n    }).call(globals.document.documentElement, node)\r\n}\r\n\r\nexport default class Box {\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  addOffset () {\r\n    // offset by window scroll position, because getBoundingClientRect changes when window is scrolled\r\n    this.x += globals.window.pageXOffset\r\n    this.y += globals.window.pageYOffset\r\n    return new Box(this)\r\n  }\r\n\r\n  init (source) {\r\n    const base = [ 0, 0, 0, 0 ]\r\n    source = typeof source === 'string'\n      ? source.split(delimiter).map(parseFloat)\r\n      : Array.isArray(source)\n        ? source\r\n        : typeof source === 'object'\n          ? [ source.left != null\n            ? source.left\r\n            : source.x, source.top != null ? source.top : source.y, source.width, source.height ]\r\n          : arguments.length === 4\n            ? [].slice.call(arguments)\r\n            : base\r\n\r\n    this.x = source[0] || 0\r\n    this.y = source[1] || 0\r\n    this.width = this.w = source[2] || 0\r\n    this.height = this.h = source[3] || 0\r\n\r\n    // Add more bounding box properties\r\n    this.x2 = this.x + this.w\r\n    this.y2 = this.y + this.h\r\n    this.cx = this.x + this.w / 2\r\n    this.cy = this.y + this.h / 2\r\n\r\n    return this\r\n  }\r\n\r\n  isNulled () {\r\n    return isNulledBox(this)\r\n  }\r\n\r\n  // Merge rect box with another, return a new instance\r\n  merge (box) {\r\n    const x = Math.min(this.x, box.x)\r\n    const y = Math.min(this.y, box.y)\r\n    const width = Math.max(this.x + this.width, box.x + box.width) - x\r\n    const height = Math.max(this.y + this.height, box.y + box.height) - y\r\n\r\n    return new Box(x, y, width, height)\r\n  }\r\n\r\n  toArray () {\r\n    return [ this.x, this.y, this.width, this.height ]\r\n  }\r\n\r\n  toString () {\r\n    return this.x + ' ' + this.y + ' ' + this.width + ' ' + this.height\r\n  }\r\n\r\n  transform (m) {\r\n    if (!(m instanceof Matrix)) {\r\n      m = new Matrix(m)\r\n    }\r\n\r\n    let xMin = Infinity\r\n    let xMax = -Infinity\r\n    let yMin = Infinity\r\n    let yMax = -Infinity\r\n\r\n    const pts = [\r\n      new Point(this.x, this.y),\r\n      new Point(this.x2, this.y),\r\n      new Point(this.x, this.y2),\r\n      new Point(this.x2, this.y2)\r\n    ]\r\n\r\n    pts.forEach(function (p) {\r\n      p = p.transform(m)\r\n      xMin = Math.min(xMin, p.x)\r\n      xMax = Math.max(xMax, p.x)\r\n      yMin = Math.min(yMin, p.y)\r\n      yMax = Math.max(yMax, p.y)\r\n    })\r\n\r\n    return new Box(\r\n      xMin, yMin,\r\n      xMax - xMin,\r\n      yMax - yMin\r\n    )\r\n  }\r\n\r\n}\r\n\r\nfunction getBox (el, getBBoxFn, retry) {\r\n  let box\r\n\r\n  try {\r\n    // Try to get the box with the provided function\r\n    box = getBBoxFn(el.node)\r\n\r\n    // If the box is worthless and not even in the dom, retry\r\n    // by throwing an error here...\r\n    if (isNulledBox(box) && !domContains(el.node)) {\r\n      throw new Error('Element not in the dom')\r\n    }\r\n  } catch (e) {\r\n    // ... and calling the retry handler here\r\n    box = retry(el)\r\n  }\r\n\r\n  return box\r\n}\r\n\r\nexport function bbox () {\r\n  // Function to get bbox is getBBox()\r\n  const getBBox = (node) => node.getBBox()\r\n\r\n  // Take all measures so that a stupid browser renders the element\r\n  // so we can get the bbox from it when we try again\r\n  const retry = (el) => {\r\n    try {\r\n      const clone = el.clone().addTo(parser().svg).show()\r\n      const box = clone.node.getBBox()\r\n      clone.remove()\r\n      return box\r\n    } catch (e) {\r\n      // We give up...\r\n      throw new Error(`Getting bbox of element \"${el.node.nodeName}\" is not possible: ${e.toString()}`)\r\n    }\r\n  }\r\n\r\n  const box = getBox(this, getBBox, retry)\r\n  const bbox = new Box(box)\r\n\r\n  return bbox\r\n}\r\n\r\nexport function rbox (el) {\r\n  const getRBox = (node) => node.getBoundingClientRect()\r\n  const retry = (el) => {\r\n    // There is no point in trying tricks here because if we insert the element into the dom ourselves\r\n    // it obviously will be at the wrong position\r\n    throw new Error(`Getting rbox of element \"${el.node.nodeName}\" is not possible`)\r\n  }\r\n\r\n  const box = getBox(this, getRBox, retry)\r\n  const rbox = new Box(box)\r\n\r\n  // If an element was passed, we want the bbox in the coordinate system of that element\r\n  if (el) {\r\n    return rbox.transform(el.screenCTM().inverseO())\r\n  }\r\n\r\n  // Else we want it in absolute screen coordinates\r\n  // Therefore we need to add the scrollOffset\r\n  return rbox.addOffset()\r\n}\r\n\r\n// Checks whether the given point is inside the bounding box\r\nexport function inside (x, y) {\r\n  const box = this.bbox()\r\n\r\n  return x > box.x\r\n    && y > box.y\r\n    && x < box.x + box.width\r\n    && y < box.y + box.height\r\n}\r\n\r\nregisterMethods({\r\n  viewbox: {\r\n    viewbox (x, y, width, height) {\r\n      // act as getter\r\n      if (x == null) return new Box(this.attr('viewBox'))\r\n\r\n      // act as setter\r\n      return this.attr('viewBox', new Box(x, y, width, height))\r\n    },\r\n\r\n    zoom (level, point) {\r\n      // Its best to rely on the attributes here and here is why:\r\n      // clientXYZ: Doesn't work on non-root svgs because they dont have a CSSBox (silly!)\r\n      // getBoundingClientRect: Doesn't work because Chrome just ignores width and height of nested svgs completely\r\n      //                        that means, their clientRect is always as big as the content.\r\n      //                        Furthermore this size is incorrect if the element is further transformed by its parents\r\n      // computedStyle: Only returns meaningful values if css was used with px. We dont go this route here!\r\n      // getBBox: returns the bounding box of its content - that doesnt help!\r\n      let { width, height } = this.attr([ 'width', 'height' ])\r\n\r\n      // Width and height is a string when a number with a unit is present which we can't use\r\n      // So we try clientXYZ\r\n      if ((!width && !height) || (typeof width === 'string' || typeof height === 'string')) {\r\n        width = this.node.clientWidth\r\n        height = this.node.clientHeight\r\n      }\r\n\r\n      // Giving up...\r\n      if (!width || !height) {\r\n        throw new Error('Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element')\r\n      }\r\n\r\n      const v = this.viewbox()\r\n\r\n      const zoomX = width / v.width\r\n      const zoomY = height / v.height\r\n      const zoom = Math.min(zoomX, zoomY)\r\n\r\n      if (level == null) {\r\n        return zoom\r\n      }\r\n\r\n      let zoomAmount = zoom / level\r\n\r\n      // Set the zoomAmount to the highest value which is safe to process and recover from\r\n      // The * 100 is a bit of wiggle room for the matrix transformation\r\n      if (zoomAmount === Infinity) zoomAmount = Number.MAX_SAFE_INTEGER / 100\r\n\r\n      point = point || new Point(width / 2 / zoomX + v.x, height / 2 / zoomY + v.y)\r\n\r\n      const box = new Box(v).transform(\r\n        new Matrix({ scale: zoomAmount, origin: point })\r\n      )\r\n\r\n      return this.viewbox(box)\r\n    }\r\n  }\r\n})\r\n\r\nregister(Box, 'Box')\r\n","import { extend } from '../utils/adopter.js'\r\n// import { subClassArray } from './ArrayPolyfill.js'\r\n\r\nclass List extends Array {\r\n  constructor (arr = [], ...args) {\r\n    super(arr, ...args)\r\n    if (typeof arr === 'number') return this\r\n    this.length = 0\r\n    this.push(...arr)\r\n  }\r\n}\r\n\r\n/* = subClassArray('List', Array, function (arr = []) {\r\n  // This catches the case, that native map tries to create an array with new Array(1)\r\n  if (typeof arr === 'number') return this\r\n  this.length = 0\r\n  this.push(...arr)\r\n}) */\r\n\r\nexport default List\r\n\r\nextend([ List ], {\r\n  each (fnOrMethodName, ...args) {\r\n    if (typeof fnOrMethodName === 'function') {\r\n      return this.map((el, i, arr) => {\r\n        return fnOrMethodName.call(el, el, i, arr)\r\n      })\r\n    } else {\r\n      return this.map(el => {\r\n        return el[fnOrMethodName](...args)\r\n      })\r\n    }\r\n  },\r\n\r\n  toArray () {\r\n    return Array.prototype.concat.apply([], this)\r\n  }\r\n})\r\n\r\nconst reserved = [ 'toArray', 'constructor', 'each' ]\r\n\r\nList.extend = function (methods) {\r\n  methods = methods.reduce((obj, name) => {\r\n    // Don't overwrite own methods\r\n    if (reserved.includes(name)) return obj\r\n\r\n    // Don't add private methods\r\n    if (name[0] === '_') return obj\r\n\r\n    // Relay every call to each()\r\n    obj[name] = function (...attrs) {\r\n      return this.each(name, ...attrs)\r\n    }\r\n    return obj\r\n  }, {})\r\n\r\n  extend([ List ], methods)\r\n}\r\n","import { adopt } from '../../utils/adopter.js'\r\nimport { globals } from '../../utils/window.js'\r\nimport { map } from '../../utils/utils.js'\r\nimport List from '../../types/List.js'\r\n\r\nexport default function baseFind (query, parent) {\r\n  return new List(map((parent || globals.document).querySelectorAll(query), function (node) {\r\n    return adopt(node)\r\n  }))\r\n}\r\n\r\n// Scoped find method\r\nexport function find (query) {\r\n  return baseFind(query, this.node)\r\n}\r\n\r\nexport function findOne (query) {\r\n  return adopt(this.node.querySelector(query))\r\n}\r\n","import { delimiter } from './regex.js'\r\nimport { makeInstance } from '../../utils/adopter.js'\r\nimport { globals } from '../../utils/window.js'\r\n\r\nlet listenerId = 0\r\nexport const windowEvents = {}\r\n\r\nexport function getEvents (instance) {\r\n  let n = instance.getEventHolder()\r\n\r\n  // We dont want to save events in global space\r\n  if (n === globals.window) n = windowEvents\r\n  if (!n.events) n.events = {}\r\n  return n.events\r\n}\r\n\r\nexport function getEventTarget (instance) {\r\n  return instance.getEventTarget()\r\n}\r\n\r\nexport function clearEvents (instance) {\r\n  let n = instance.getEventHolder()\r\n  if (n === globals.window) n = windowEvents\r\n  if (n.events) n.events = {}\r\n}\r\n\r\n// Add event binder in the SVG namespace\r\nexport function on (node, events, listener, binding, options) {\r\n  const l = listener.bind(binding || node)\r\n  const instance = makeInstance(node)\r\n  const bag = getEvents(instance)\r\n  const n = getEventTarget(instance)\r\n\r\n  // events can be an array of events or a string of events\r\n  events = Array.isArray(events) ? events : events.split(delimiter)\r\n\r\n  // add id to listener\r\n  if (!listener._svgjsListenerId) {\r\n    listener._svgjsListenerId = ++listenerId\r\n  }\r\n\r\n  events.forEach(function (event) {\r\n    const ev = event.split('.')[0]\r\n    const ns = event.split('.')[1] || '*'\r\n\r\n    // ensure valid object\r\n    bag[ev] = bag[ev] || {}\r\n    bag[ev][ns] = bag[ev][ns] || {}\r\n\r\n    // reference listener\r\n    bag[ev][ns][listener._svgjsListenerId] = l\r\n\r\n    // add listener\r\n    n.addEventListener(ev, l, options || false)\r\n  })\r\n}\r\n\r\n// Add event unbinder in the SVG namespace\r\nexport function off (node, events, listener, options) {\r\n  const instance = makeInstance(node)\r\n  const bag = getEvents(instance)\r\n  const n = getEventTarget(instance)\r\n\r\n  // listener can be a function or a number\r\n  if (typeof listener === 'function') {\r\n    listener = listener._svgjsListenerId\r\n    if (!listener) return\r\n  }\r\n\r\n  // events can be an array of events or a string or undefined\r\n  events = Array.isArray(events) ? events : (events || '').split(delimiter)\r\n\r\n  events.forEach(function (event) {\r\n    const ev = event && event.split('.')[0]\r\n    const ns = event && event.split('.')[1]\r\n    let namespace, l\r\n\r\n    if (listener) {\r\n      // remove listener reference\r\n      if (bag[ev] && bag[ev][ns || '*']) {\r\n        // removeListener\r\n        n.removeEventListener(ev, bag[ev][ns || '*'][listener], options || false)\r\n\r\n        delete bag[ev][ns || '*'][listener]\r\n      }\r\n    } else if (ev && ns) {\r\n      // remove all listeners for a namespaced event\r\n      if (bag[ev] && bag[ev][ns]) {\r\n        for (l in bag[ev][ns]) {\r\n          off(n, [ ev, ns ].join('.'), l)\r\n        }\r\n\r\n        delete bag[ev][ns]\r\n      }\r\n    } else if (ns) {\r\n      // remove all listeners for a specific namespace\r\n      for (event in bag) {\r\n        for (namespace in bag[event]) {\r\n          if (ns === namespace) {\r\n            off(n, [ event, ns ].join('.'))\r\n          }\r\n        }\r\n      }\r\n    } else if (ev) {\r\n      // remove all listeners for the event\r\n      if (bag[ev]) {\r\n        for (namespace in bag[ev]) {\r\n          off(n, [ ev, namespace ].join('.'))\r\n        }\r\n\r\n        delete bag[ev]\r\n      }\r\n    } else {\r\n      // remove all listeners on a given node\r\n      for (event in bag) {\r\n        off(n, event)\r\n      }\r\n\r\n      clearEvents(instance)\r\n    }\r\n  })\r\n}\r\n\r\nexport function dispatch (node, event, data, options) {\r\n  const n = getEventTarget(node)\r\n\r\n  // Dispatch event\r\n  if (event instanceof globals.window.Event) {\r\n    n.dispatchEvent(event)\r\n  } else {\r\n    event = new globals.window.CustomEvent(event, { detail: data, cancelable: true, ...options })\r\n    n.dispatchEvent(event)\r\n  }\r\n  return event\r\n}\r\n","import { dispatch, off, on } from '../modules/core/event.js'\nimport { register } from '../utils/adopter.js'\nimport Base from './Base.js'\n\nexport default class EventTarget extends Base {\n  addEventListener () {}\n\n  dispatch (event, data, options) {\n    return dispatch(this, event, data, options)\n  }\n\n  dispatchEvent (event) {\n    const bag = this.getEventHolder().events\n    if (!bag) return true\n\n    const events = bag[event.type]\n\n    for (const i in events) {\n      for (const j in events[i]) {\n        events[i][j](event)\n      }\n    }\n\n    return !event.defaultPrevented\n  }\n\n  // Fire given event\n  fire (event, data, options) {\n    this.dispatch(event, data, options)\n    return this\n  }\n\n  getEventHolder () {\n    return this\n  }\n\n  getEventTarget () {\n    return this\n  }\n\n  // Unbind event from listener\n  off (event, listener, options) {\n    off(this, event, listener, options)\n    return this\n  }\n\n  // Bind given event to listener\n  on (event, listener, binding, options) {\n    on(this, event, listener, binding, options)\n    return this\n  }\n\n  removeEventListener () {}\n}\n\nregister(EventTarget, 'EventTarget')\n","\r\nexport function noop () {}\r\n\r\n// Default animation values\r\nexport const timeline = {\r\n  duration: 400,\r\n  ease: '>',\r\n  delay: 0\r\n}\r\n\r\n// Default attribute values\r\nexport const attrs = {\r\n\r\n  // fill and stroke\r\n  'fill-opacity': 1,\r\n  'stroke-opacity': 1,\r\n  'stroke-width': 0,\r\n  'stroke-linejoin': 'miter',\r\n  'stroke-linecap': 'butt',\r\n  fill: '#000000',\r\n  stroke: '#000000',\r\n  opacity: 1,\r\n\r\n  // position\r\n  x: 0,\r\n  y: 0,\r\n  cx: 0,\r\n  cy: 0,\r\n\r\n  // size\r\n  width: 0,\r\n  height: 0,\r\n\r\n  // radius\r\n  r: 0,\r\n  rx: 0,\r\n  ry: 0,\r\n\r\n  // gradient\r\n  offset: 0,\r\n  'stop-opacity': 1,\r\n  'stop-color': '#000000',\r\n\r\n  // text\r\n  'text-anchor': 'start'\r\n}\r\n","import { delimiter } from '../modules/core/regex.js'\r\n\r\nexport default class SVGArray extends Array {\r\n  constructor (...args) {\r\n    super(...args)\r\n    this.init(...args)\r\n  }\r\n\r\n  clone () {\r\n    return new this.constructor(this)\r\n  }\n\n  init (arr) {\r\n    // This catches the case, that native map tries to create an array with new Array(1)\r\n    if (typeof arr === 'number') return this\r\n    this.length = 0\r\n    this.push(...this.parse(arr))\r\n    return this\r\n  }\r\n\r\n  // Parse whitespace separated string\n  parse (array = []) {\r\n    // If already is an array, no need to parse it\r\n    if (array instanceof Array) return array\r\n\r\n    return array.trim().split(delimiter).map(parseFloat)\r\n  }\n\n  toArray () {\r\n    return Array.prototype.concat.apply([], this)\r\n  }\r\n\r\n  toSet () {\r\n    return new Set(this)\r\n  }\n\n  toString () {\r\n    return this.join(' ')\r\n  }\r\n\r\n  // Flattens the array if needed\r\n  valueOf () {\r\n    const ret = []\r\n    ret.push(...this)\r\n    return ret\r\n  }\r\n\r\n}\r\n","import { numberAndUnit } from '../modules/core/regex.js'\r\n\r\n// Module for unit conversions\r\nexport default class SVGNumber {\r\n  // Initialize\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  convert (unit) {\r\n    return new SVGNumber(this.value, unit)\r\n  }\r\n\r\n  // Divide number\r\n  divide (number) {\r\n    number = new SVGNumber(number)\r\n    return new SVGNumber(this / number, this.unit || number.unit)\r\n  }\r\n\r\n  init (value, unit) {\r\n    unit = Array.isArray(value) ? value[1] : unit\r\n    value = Array.isArray(value) ? value[0] : value\r\n\r\n    // initialize defaults\r\n    this.value = 0\r\n    this.unit = unit || ''\r\n\r\n    // parse value\r\n    if (typeof value === 'number') {\r\n      // ensure a valid numeric value\r\n      this.value = isNaN(value) ? 0 : !isFinite(value) ? (value < 0 ? -3.4e+38 : +3.4e+38) : value\r\n    } else if (typeof value === 'string') {\r\n      unit = value.match(numberAndUnit)\r\n\r\n      if (unit) {\r\n        // make value numeric\r\n        this.value = parseFloat(unit[1])\r\n\r\n        // normalize\r\n        if (unit[5] === '%') {\r\n          this.value /= 100\r\n        } else if (unit[5] === 's') {\r\n          this.value *= 1000\r\n        }\r\n\r\n        // store unit\r\n        this.unit = unit[5]\r\n      }\r\n    } else {\r\n      if (value instanceof SVGNumber) {\r\n        this.value = value.valueOf()\r\n        this.unit = value.unit\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Subtract number\r\n  minus (number) {\r\n    number = new SVGNumber(number)\r\n    return new SVGNumber(this - number, this.unit || number.unit)\r\n  }\r\n\r\n  // Add number\r\n  plus (number) {\r\n    number = new SVGNumber(number)\r\n    return new SVGNumber(this + number, this.unit || number.unit)\r\n  }\r\n\r\n  // Multiply number\r\n  times (number) {\r\n    number = new SVGNumber(number)\r\n    return new SVGNumber(this * number, this.unit || number.unit)\r\n  }\r\n\r\n  toArray () {\r\n    return [ this.value, this.unit ]\r\n  }\r\n\r\n  toJSON () {\r\n    return this.toString()\r\n  }\r\n\r\n  toString () {\r\n    return (this.unit === '%'\n      ? ~~(this.value * 1e8) / 1e6\r\n      : this.unit === 's'\n        ? this.value / 1e3\r\n        : this.value\r\n    ) + this.unit\r\n  }\r\n\r\n  valueOf () {\r\n    return this.value\r\n  }\r\n\r\n}\r\n","import { attrs as defaults } from './defaults.js'\r\nimport { isNumber } from './regex.js'\r\nimport Color from '../../types/Color.js'\r\nimport SVGArray from '../../types/SVGArray.js'\r\nimport SVGNumber from '../../types/SVGNumber.js'\r\n\r\nconst hooks = []\r\nexport function registerAttrHook (fn) {\r\n  hooks.push(fn)\r\n}\r\n\r\n// Set svg element attribute\r\nexport default function attr (attr, val, ns) {\r\n  // act as full getter\r\n  if (attr == null) {\r\n    // get an object of attributes\r\n    attr = {}\r\n    val = this.node.attributes\r\n\r\n    for (const node of val) {\r\n      attr[node.nodeName] = isNumber.test(node.nodeValue)\r\n        ? parseFloat(node.nodeValue)\r\n        : node.nodeValue\r\n    }\r\n\r\n    return attr\r\n  } else if (attr instanceof Array) {\r\n    // loop through array and get all values\r\n    return attr.reduce((last, curr) => {\r\n      last[curr] = this.attr(curr)\r\n      return last\r\n    }, {})\r\n  } else if (typeof attr === 'object' && attr.constructor === Object) {\r\n    // apply every attribute individually if an object is passed\r\n    for (val in attr) this.attr(val, attr[val])\r\n  } else if (val === null) {\r\n    // remove value\r\n    this.node.removeAttribute(attr)\r\n  } else if (val == null) {\r\n    // act as a getter if the first and only argument is not an object\r\n    val = this.node.getAttribute(attr)\r\n    return val == null\n      ? defaults[attr]\r\n      : isNumber.test(val)\n        ? parseFloat(val)\r\n        : val\r\n  } else {\r\n    // Loop through hooks and execute them to convert value\r\n    val = hooks.reduce((_val, hook) => {\r\n      return hook(attr, _val, this)\r\n    }, val)\r\n\r\n    // ensure correct numeric values (also accepts NaN and Infinity)\r\n    if (typeof val === 'number') {\r\n      val = new SVGNumber(val)\r\n    } else if (Color.isColor(val)) {\r\n      // ensure full hex color\r\n      val = new Color(val)\r\n    } else if (val.constructor === Array) {\r\n      // Check for plain arrays and parse array values\r\n      val = new SVGArray(val)\r\n    }\r\n\r\n    // if the passed attribute is leading...\r\n    if (attr === 'leading') {\r\n      // ... call the leading method instead\r\n      if (this.leading) {\r\n        this.leading(val)\r\n      }\r\n    } else {\r\n      // set given attribute on node\r\n      typeof ns === 'string'\n        ? this.node.setAttributeNS(ns, attr, val.toString())\r\n        : this.node.setAttribute(attr, val.toString())\r\n    }\r\n\r\n    // rebuild if required\r\n    if (this.rebuild && (attr === 'font-size' || attr === 'x')) {\r\n      this.rebuild()\r\n    }\r\n  }\r\n\r\n  return this\r\n}\r\n","import {\r\n  adopt,\r\n  assignNewId,\r\n  eid,\r\n  extend,\r\n  makeInstance,\r\n  create,\r\n  register\r\n} from '../utils/adopter.js'\r\nimport { find, findOne } from '../modules/core/selector.js'\r\nimport { globals } from '../utils/window.js'\r\nimport { map } from '../utils/utils.js'\r\nimport { svg, html } from '../modules/core/namespaces.js'\r\nimport EventTarget from '../types/EventTarget.js'\r\nimport List from '../types/List.js'\r\nimport attr from '../modules/core/attr.js'\r\n\r\nexport default class Dom extends EventTarget {\r\n  constructor (node, attrs) {\r\n    super()\r\n    this.node = node\r\n    this.type = node.nodeName\r\n\r\n    if (attrs && node !== attrs) {\r\n      this.attr(attrs)\r\n    }\r\n  }\r\n\r\n  // Add given element at a position\r\n  add (element, i) {\r\n    element = makeInstance(element)\r\n\r\n    // If non-root svg nodes are added we have to remove their namespaces\r\n    if (element.removeNamespace && this.node instanceof globals.window.SVGElement) {\r\n      element.removeNamespace()\r\n    }\r\n\r\n    if (i == null) {\r\n      this.node.appendChild(element.node)\r\n    } else if (element.node !== this.node.childNodes[i]) {\r\n      this.node.insertBefore(element.node, this.node.childNodes[i])\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Add element to given container and return self\r\n  addTo (parent, i) {\r\n    return makeInstance(parent).put(this, i)\r\n  }\r\n\r\n  // Returns all child elements\r\n  children () {\r\n    return new List(map(this.node.children, function (node) {\r\n      return adopt(node)\r\n    }))\r\n  }\r\n\r\n  // Remove all elements in this container\r\n  clear () {\r\n    // remove children\r\n    while (this.node.hasChildNodes()) {\r\n      this.node.removeChild(this.node.lastChild)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Clone element\r\n  clone (deep = true) {\r\n    // write dom data to the dom so the clone can pickup the data\r\n    this.writeDataToDom()\r\n\r\n    // clone element and assign new id\r\n    return new this.constructor(assignNewId(this.node.cloneNode(deep)))\r\n  }\r\n\r\n  // Iterates over all children and invokes a given block\r\n  each (block, deep) {\r\n    const children = this.children()\r\n    let i, il\r\n\r\n    for (i = 0, il = children.length; i < il; i++) {\r\n      block.apply(children[i], [ i, children ])\r\n\r\n      if (deep) {\r\n        children[i].each(block, deep)\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  element (nodeName, attrs) {\r\n    return this.put(new Dom(create(nodeName), attrs))\r\n  }\r\n\r\n  // Get first child\r\n  first () {\r\n    return adopt(this.node.firstChild)\r\n  }\r\n\r\n  // Get a element at the given index\r\n  get (i) {\r\n    return adopt(this.node.childNodes[i])\r\n  }\r\n\r\n  getEventHolder () {\r\n    return this.node\r\n  }\r\n\r\n  getEventTarget () {\r\n    return this.node\r\n  }\r\n\r\n  // Checks if the given element is a child\r\n  has (element) {\r\n    return this.index(element) >= 0\r\n  }\r\n\r\n  html (htmlOrFn, outerHTML) {\r\n    return this.xml(htmlOrFn, outerHTML, html)\r\n  }\r\n\r\n  // Get / set id\r\n  id (id) {\r\n    // generate new id if no id set\r\n    if (typeof id === 'undefined' && !this.node.id) {\r\n      this.node.id = eid(this.type)\r\n    }\r\n\r\n    // don't set directly with this.node.id to make `null` work correctly\r\n    return this.attr('id', id)\r\n  }\r\n\r\n  // Gets index of given element\r\n  index (element) {\r\n    return [].slice.call(this.node.childNodes).indexOf(element.node)\r\n  }\r\n\r\n  // Get the last child\r\n  last () {\r\n    return adopt(this.node.lastChild)\r\n  }\r\n\r\n  // matches the element vs a css selector\r\n  matches (selector) {\r\n    const el = this.node\r\n    const matcher = el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector || null\r\n    return matcher && matcher.call(el, selector)\r\n  }\r\n\r\n  // Returns the parent element instance\r\n  parent (type) {\r\n    let parent = this\r\n\r\n    // check for parent\r\n    if (!parent.node.parentNode) return null\r\n\r\n    // get parent element\r\n    parent = adopt(parent.node.parentNode)\r\n\r\n    if (!type) return parent\r\n\r\n    // loop trough ancestors if type is given\r\n    do {\r\n      if (typeof type === 'string' ? parent.matches(type) : parent instanceof type) return parent\r\n    } while ((parent = adopt(parent.node.parentNode)))\r\n\r\n    return parent\r\n  }\r\n\r\n  // Basically does the same as `add()` but returns the added element instead\r\n  put (element, i) {\r\n    element = makeInstance(element)\r\n    this.add(element, i)\r\n    return element\r\n  }\r\n\r\n  // Add element to given container and return container\r\n  putIn (parent, i) {\r\n    return makeInstance(parent).add(this, i)\r\n  }\r\n\r\n  // Remove element\r\n  remove () {\r\n    if (this.parent()) {\r\n      this.parent().removeElement(this)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Remove a given child\r\n  removeElement (element) {\r\n    this.node.removeChild(element.node)\r\n\r\n    return this\r\n  }\r\n\r\n  // Replace this with element\r\n  replace (element) {\r\n    element = makeInstance(element)\r\n\r\n    if (this.node.parentNode) {\r\n      this.node.parentNode.replaceChild(element.node, this.node)\r\n    }\r\n\r\n    return element\r\n  }\r\n\r\n  round (precision = 2, map = null) {\r\n    const factor = 10 ** precision\r\n    const attrs = this.attr(map)\r\n\r\n    for (const i in attrs) {\r\n      if (typeof attrs[i] === 'number') {\r\n        attrs[i] = Math.round(attrs[i] * factor) / factor\r\n      }\r\n    }\r\n\r\n    this.attr(attrs)\r\n    return this\r\n  }\r\n\r\n  // Import / Export raw svg\r\n  svg (svgOrFn, outerSVG) {\r\n    return this.xml(svgOrFn, outerSVG, svg)\r\n  }\r\n\r\n  // Return id on string conversion\r\n  toString () {\r\n    return this.id()\r\n  }\r\n\r\n  words (text) {\r\n    // This is faster than removing all children and adding a new one\r\n    this.node.textContent = text\r\n    return this\r\n  }\r\n\r\n  wrap (node) {\r\n    const parent = this.parent()\r\n\r\n    if (!parent) {\r\n      return this.addTo(node)\r\n    }\r\n\r\n    const position = parent.index(this)\r\n    return parent.put(node, position).put(this)\r\n  }\r\n\r\n  // write svgjs data to the dom\r\n  writeDataToDom () {\r\n    // dump variables recursively\r\n    this.each(function () {\r\n      this.writeDataToDom()\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  // Import / Export raw svg\r\n  xml (xmlOrFn, outerXML, ns) {\r\n    if (typeof xmlOrFn === 'boolean') {\r\n      ns = outerXML\r\n      outerXML = xmlOrFn\r\n      xmlOrFn = null\r\n    }\r\n\r\n    // act as getter if no svg string is given\r\n    if (xmlOrFn == null || typeof xmlOrFn === 'function') {\r\n      // The default for exports is, that the outerNode is included\r\n      outerXML = outerXML == null ? true : outerXML\r\n\r\n      // write svgjs data to the dom\r\n      this.writeDataToDom()\r\n      let current = this\r\n\r\n      // An export modifier was passed\r\n      if (xmlOrFn != null) {\r\n        current = adopt(current.node.cloneNode(true))\r\n\r\n        // If the user wants outerHTML we need to process this node, too\r\n        if (outerXML) {\r\n          const result = xmlOrFn(current)\r\n          current = result || current\r\n\r\n          // The user does not want this node? Well, then he gets nothing\r\n          if (result === false) return ''\r\n        }\r\n\r\n        // Deep loop through all children and apply modifier\r\n        current.each(function () {\r\n          const result = xmlOrFn(this)\r\n          const _this = result || this\r\n\r\n          // If modifier returns false, discard node\r\n          if (result === false) {\r\n            this.remove()\r\n\r\n            // If modifier returns new node, use it\r\n          } else if (result && this !== _this) {\r\n            this.replace(_this)\r\n          }\r\n        }, true)\r\n      }\r\n\r\n      // Return outer or inner content\r\n      return outerXML\r\n        ? current.node.outerHTML\r\n        : current.node.innerHTML\r\n    }\r\n\r\n    // Act as setter if we got a string\r\n\r\n    // The default for import is, that the current node is not replaced\r\n    outerXML = outerXML == null ? false : outerXML\r\n\r\n    // Create temporary holder\r\n    const well = create('wrapper', ns)\r\n    const fragment = globals.document.createDocumentFragment()\r\n\r\n    // Dump raw svg\r\n    well.innerHTML = xmlOrFn\r\n\r\n    // Transplant nodes into the fragment\r\n    for (let len = well.children.length; len--;) {\r\n      fragment.appendChild(well.firstElementChild)\r\n    }\r\n\r\n    const parent = this.parent()\r\n\r\n    // Add the whole fragment at once\r\n    return outerXML\r\n      ? this.replace(fragment) && parent\r\n      : this.add(fragment)\r\n  }\r\n}\r\n\r\nextend(Dom, { attr, find, findOne })\r\nregister(Dom, 'Dom')\r\n","import { bbox, rbox, inside } from '../types/Box.js'\nimport { ctm, screenCTM } from '../types/Matrix.js'\nimport {\n  extend,\n  getClass,\n  makeInstance,\n  register,\n  root\n} from '../utils/adopter.js'\nimport { globals } from '../utils/window.js'\nimport { point } from '../types/Point.js'\nimport { proportionalSize } from '../utils/utils.js'\nimport { reference } from '../modules/core/regex.js'\nimport Dom from './Dom.js'\nimport List from '../types/List.js'\nimport SVGNumber from '../types/SVGNumber.js'\n\nexport default class Element extends Dom {\n  constructor (node, attrs) {\n    super(node, attrs)\n\n    // initialize data object\n    this.dom = {}\n\n    // create circular reference\n    this.node.instance = this\n\n    if (node.hasAttribute('svgjs:data')) {\n      // pull svgjs data from the dom (getAttributeNS doesn't work in html5)\n      this.setData(JSON.parse(node.getAttribute('svgjs:data')) || {})\n    }\n  }\n\n  // Move element by its center\n  center (x, y) {\n    return this.cx(x).cy(y)\n  }\n\n  // Move by center over x-axis\n  cx (x) {\n    return x == null\n      ? this.x() + this.width() / 2\n      : this.x(x - this.width() / 2)\n  }\n\n  // Move by center over y-axis\n  cy (y) {\n    return y == null\n      ? this.y() + this.height() / 2\n      : this.y(y - this.height() / 2)\n  }\n\n  // Get defs\n  defs () {\n    const root = this.root()\n    return root && root.defs()\n  }\n\n  // Relative move over x and y axes\n  dmove (x, y) {\n    return this.dx(x).dy(y)\n  }\n\n  // Relative move over x axis\n  dx (x = 0) {\n    return this.x(new SVGNumber(x).plus(this.x()))\n  }\n\n  // Relative move over y axis\n  dy (y = 0) {\n    return this.y(new SVGNumber(y).plus(this.y()))\n  }\n\n  getEventHolder () {\n    return this\n  }\n\n  // Set height of element\n  height (height) {\n    return this.attr('height', height)\n  }\n\n  // Move element to given x and y values\n  move (x, y) {\n    return this.x(x).y(y)\n  }\n\n  // return array of all ancestors of given type up to the root svg\n  parents (until = this.root()) {\n    const isSelector = typeof until === 'string'\n    if (!isSelector) {\n      until = makeInstance(until)\n    }\n    const parents = new List()\n    let parent = this\n\n    while (\n      (parent = parent.parent())\n      && parent.node !== globals.document\n      && parent.nodeName !== '#document-fragment') {\n\n      parents.push(parent)\n\n      if (!isSelector && (parent.node === until.node)) {\n        break\n      }\n      if (isSelector && parent.matches(until)) {\n        break\n      }\n      if (parent.node === this.root().node) {\n        // We worked our way to the root and didn't match `until`\n        return null\n      }\n    }\n\n    return parents\n  }\n\n  // Get referenced element form attribute value\n  reference (attr) {\n    attr = this.attr(attr)\n    if (!attr) return null\n\n    const m = (attr + '').match(reference)\n    return m ? makeInstance(m[1]) : null\n  }\n\n  // Get parent document\n  root () {\n    const p = this.parent(getClass(root))\n    return p && p.root()\n  }\n\n  // set given data to the elements data property\n  setData (o) {\n    this.dom = o\n    return this\n  }\n\n  // Set element size to given width and height\n  size (width, height) {\n    const p = proportionalSize(this, width, height)\n\n    return this\n      .width(new SVGNumber(p.width))\n      .height(new SVGNumber(p.height))\n  }\n\n  // Set width of element\n  width (width) {\n    return this.attr('width', width)\n  }\n\n  // write svgjs data to the dom\n  writeDataToDom () {\n    // remove previously set data\n    this.node.removeAttribute('svgjs:data')\n\n    if (Object.keys(this.dom).length) {\n      this.node.setAttribute('svgjs:data', JSON.stringify(this.dom)) // see #428\n    }\n\n    return super.writeDataToDom()\n  }\n\n  // Move over x-axis\n  x (x) {\n    return this.attr('x', x)\n  }\n\n  // Move over y-axis\n  y (y) {\n    return this.attr('y', y)\n  }\n}\n\nextend(Element, {\n  bbox, rbox, inside, point, ctm, screenCTM\n})\n\nregister(Element, 'Element')\n","import { registerMethods } from '../../utils/methods.js'\r\nimport Color from '../../types/Color.js'\r\nimport Element from '../../elements/Element.js'\r\nimport Matrix from '../../types/Matrix.js'\r\nimport Point from '../../types/Point.js'\r\nimport SVGNumber from '../../types/SVGNumber.js'\r\n\r\n// Define list of available attributes for stroke and fill\r\nconst sugar = {\r\n  stroke: [ 'color', 'width', 'opacity', 'linecap', 'linejoin', 'miterlimit', 'dasharray', 'dashoffset' ],\r\n  fill: [ 'color', 'opacity', 'rule' ],\r\n  prefix: function (t, a) {\r\n    return a === 'color' ? t : t + '-' + a\r\n  }\r\n}\r\n\r\n// Add sugar for fill and stroke\r\n;[ 'fill', 'stroke' ].forEach(function (m) {\r\n  const extension = {}\r\n  let i\r\n\r\n  extension[m] = function (o) {\r\n    if (typeof o === 'undefined') {\r\n      return this.attr(m)\r\n    }\r\n    if (typeof o === 'string' || o instanceof Color || Color.isRgb(o) || (o instanceof Element)) {\r\n      this.attr(m, o)\r\n    } else {\r\n      // set all attributes from sugar.fill and sugar.stroke list\r\n      for (i = sugar[m].length - 1; i >= 0; i--) {\r\n        if (o[sugar[m][i]] != null) {\r\n          this.attr(sugar.prefix(m, sugar[m][i]), o[sugar[m][i]])\r\n        }\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  registerMethods([ 'Element', 'Runner' ], extension)\r\n})\r\n\r\nregisterMethods([ 'Element', 'Runner' ], {\r\n  // Let the user set the matrix directly\r\n  matrix: function (mat, b, c, d, e, f) {\r\n    // Act as a getter\r\n    if (mat == null) {\r\n      return new Matrix(this)\r\n    }\r\n\r\n    // Act as a setter, the user can pass a matrix or a set of numbers\r\n    return this.attr('transform', new Matrix(mat, b, c, d, e, f))\r\n  },\r\n\r\n  // Map rotation to transform\r\n  rotate: function (angle, cx, cy) {\r\n    return this.transform({ rotate: angle, ox: cx, oy: cy }, true)\r\n  },\r\n\r\n  // Map skew to transform\r\n  skew: function (x, y, cx, cy) {\r\n    return arguments.length === 1 || arguments.length === 3\r\n      ? this.transform({ skew: x, ox: y, oy: cx }, true)\r\n      : this.transform({ skew: [ x, y ], ox: cx, oy: cy }, true)\r\n  },\r\n\r\n  shear: function (lam, cx, cy) {\r\n    return this.transform({ shear: lam, ox: cx, oy: cy }, true)\r\n  },\r\n\r\n  // Map scale to transform\r\n  scale: function (x, y, cx, cy) {\r\n    return arguments.length === 1 || arguments.length === 3\r\n      ? this.transform({ scale: x, ox: y, oy: cx }, true)\r\n      : this.transform({ scale: [ x, y ], ox: cx, oy: cy }, true)\r\n  },\r\n\r\n  // Map translate to transform\r\n  translate: function (x, y) {\r\n    return this.transform({ translate: [ x, y ] }, true)\r\n  },\r\n\r\n  // Map relative translations to transform\r\n  relative: function (x, y) {\r\n    return this.transform({ relative: [ x, y ] }, true)\r\n  },\r\n\r\n  // Map flip to transform\r\n  flip: function (direction = 'both', origin = 'center') {\r\n    if ('xybothtrue'.indexOf(direction) === -1) {\r\n      origin = direction\r\n      direction = 'both'\r\n    }\r\n\r\n    return this.transform({ flip: direction, origin: origin }, true)\r\n  },\r\n\r\n  // Opacity\r\n  opacity: function (value) {\r\n    return this.attr('opacity', value)\r\n  }\r\n})\r\n\r\nregisterMethods('radius', {\r\n  // Add x and y radius\r\n  radius: function (x, y = x) {\r\n    const type = (this._element || this).type\r\n    return type === 'radialGradient'\r\n      ? this.attr('r', new SVGNumber(x))\r\n      : this.rx(x).ry(y)\r\n  }\r\n})\r\n\r\nregisterMethods('Path', {\r\n  // Get path length\r\n  length: function () {\r\n    return this.node.getTotalLength()\r\n  },\r\n  // Get point at length\r\n  pointAt: function (length) {\r\n    return new Point(this.node.getPointAtLength(length))\r\n  }\r\n})\r\n\r\nregisterMethods([ 'Element', 'Runner' ], {\r\n  // Set font\r\n  font: function (a, v) {\r\n    if (typeof a === 'object') {\r\n      for (v in a) this.font(v, a[v])\r\n      return this\r\n    }\r\n\r\n    return a === 'leading'\r\n      ? this.leading(v)\r\n      : a === 'anchor'\r\n        ? this.attr('text-anchor', v)\r\n        : a === 'size' || a === 'family' || a === 'weight' || a === 'stretch' || a === 'variant' || a === 'style'\r\n          ? this.attr('font-' + a, v)\r\n          : this.attr(a, v)\r\n  }\r\n})\r\n\r\n// Add events to elements\r\nconst methods = [ 'click',\r\n  'dblclick',\r\n  'mousedown',\r\n  'mouseup',\r\n  'mouseover',\r\n  'mouseout',\r\n  'mousemove',\r\n  'mouseenter',\r\n  'mouseleave',\r\n  'touchstart',\r\n  'touchmove',\r\n  'touchleave',\r\n  'touchend',\r\n  'touchcancel' ].reduce(function (last, event) {\r\n  // add event to Element\r\n  const fn = function (f) {\r\n    if (f === null) {\r\n      this.off(event)\r\n    } else {\r\n      this.on(event, f)\r\n    }\r\n    return this\r\n  }\r\n\r\n  last[event] = fn\r\n  return last\r\n}, {})\r\n\r\nregisterMethods('Element', methods)\r\n","import { getOrigin } from '../../utils/utils.js'\r\nimport { delimiter, transforms } from '../core/regex.js'\r\nimport { registerMethods } from '../../utils/methods.js'\r\nimport Matrix from '../../types/Matrix.js'\r\n\r\n// Reset all transformations\r\nexport function untransform () {\r\n  return this.attr('transform', null)\r\n}\r\n\r\n// merge the whole transformation chain into one matrix and returns it\r\nexport function matrixify () {\r\n  const matrix = (this.attr('transform') || '')\r\n    // split transformations\r\n    .split(transforms).slice(0, -1).map(function (str) {\r\n      // generate key => value pairs\r\n      const kv = str.trim().split('(')\r\n      return [ kv[0],\r\n        kv[1].split(delimiter)\r\n          .map(function (str) {\r\n            return parseFloat(str)\r\n          })\r\n      ]\r\n    })\r\n    .reverse()\r\n    // merge every transformation into one matrix\r\n    .reduce(function (matrix, transform) {\r\n      if (transform[0] === 'matrix') {\r\n        return matrix.lmultiply(Matrix.fromArray(transform[1]))\r\n      }\r\n      return matrix[transform[0]].apply(matrix, transform[1])\r\n    }, new Matrix())\r\n\r\n  return matrix\r\n}\r\n\r\n// add an element to another parent without changing the visual representation on the screen\r\nexport function toParent (parent, i) {\r\n  if (this === parent) return this\r\n  const ctm = this.screenCTM()\r\n  const pCtm = parent.screenCTM().inverse()\r\n\r\n  this.addTo(parent, i).untransform().transform(pCtm.multiply(ctm))\r\n\r\n  return this\r\n}\r\n\r\n// same as above with parent equals root-svg\r\nexport function toRoot (i) {\r\n  return this.toParent(this.root(), i)\r\n}\r\n\r\n// Add transformations\r\nexport function transform (o, relative) {\r\n  // Act as a getter if no object was passed\r\n  if (o == null || typeof o === 'string') {\r\n    const decomposed = new Matrix(this).decompose()\r\n    return o == null ? decomposed : decomposed[o]\r\n  }\r\n\r\n  if (!Matrix.isMatrixLike(o)) {\r\n    // Set the origin according to the defined transform\r\n    o = { ...o, origin: getOrigin(o, this) }\r\n  }\r\n\r\n  // The user can pass a boolean, an Element or an Matrix or nothing\r\n  const cleanRelative = relative === true ? this : (relative || false)\r\n  const result = new Matrix(cleanRelative).transform(o)\r\n  return this.attr('transform', result)\r\n}\r\n\r\nregisterMethods('Element', {\r\n  untransform, matrixify, toParent, toRoot, transform\r\n})\r\n","import { register } from '../utils/adopter.js'\r\nimport Element from './Element.js'\r\n\r\nexport default class Container extends Element {\r\n  flatten (parent = this, index) {\r\n    this.each(function () {\r\n      if (this instanceof Container) {\r\n        return this.flatten().ungroup()\r\n      }\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  ungroup (parent = this.parent(), index = parent.index(this)) {\r\n    // when parent != this, we want append all elements to the end\r\n    index = index === -1 ? parent.children().length : index\r\n\r\n    this.each(function (i, children) {\r\n      // reverse each\r\n      return children[children.length - i - 1].toParent(parent, index)\r\n    })\r\n\r\n    return this.remove()\r\n  }\r\n}\r\n\r\nregister(Container, 'Container')\r\n","import { nodeOrNew, register } from '../utils/adopter.js'\r\nimport Container from './Container.js'\r\n\r\nexport default class Defs extends Container {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('defs', node), attrs)\r\n  }\r\n\r\n  flatten () {\r\n    return this\r\n  }\r\n\r\n  ungroup () {\r\n    return this\r\n  }\r\n}\r\n\r\nregister(Defs, 'Defs')\r\n","import { register } from '../utils/adopter.js'\r\nimport Element from './Element.js'\r\n\r\nexport default class Shape extends Element {}\r\n\r\nregister(Shape, 'Shape')\r\n","import SVGNumber from '../../types/SVGNumber.js'\r\n\r\n// Radius x value\r\nexport function rx (rx) {\r\n  return this.attr('rx', rx)\r\n}\r\n\r\n// Radius y value\r\nexport function ry (ry) {\r\n  return this.attr('ry', ry)\r\n}\r\n\r\n// Move over x-axis\r\nexport function x (x) {\r\n  return x == null\r\n    ? this.cx() - this.rx()\r\n    : this.cx(x + this.rx())\r\n}\r\n\r\n// Move over y-axis\r\nexport function y (y) {\r\n  return y == null\r\n    ? this.cy() - this.ry()\r\n    : this.cy(y + this.ry())\r\n}\r\n\r\n// Move by center over x-axis\r\nexport function cx (x) {\r\n  return this.attr('cx', x)\r\n}\r\n\r\n// Move by center over y-axis\r\nexport function cy (y) {\r\n  return this.attr('cy', y)\r\n}\r\n\r\n// Set width of element\r\nexport function width (width) {\r\n  return width == null\r\n    ? this.rx() * 2\r\n    : this.rx(new SVGNumber(width).divide(2))\r\n}\r\n\r\n// Set height of element\r\nexport function height (height) {\r\n  return height == null\r\n    ? this.ry() * 2\r\n    : this.ry(new SVGNumber(height).divide(2))\r\n}\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { proportionalSize } from '../utils/utils.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport Shape from './Shape.js'\r\nimport * as circled from '../modules/core/circled.js'\r\n\r\nexport default class Ellipse extends Shape {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('ellipse', node), attrs)\r\n  }\r\n\r\n  size (width, height) {\r\n    const p = proportionalSize(this, width, height)\r\n\r\n    return this\r\n      .rx(new SVGNumber(p.width).divide(2))\r\n      .ry(new SVGNumber(p.height).divide(2))\r\n  }\r\n}\r\n\r\nextend(Ellipse, circled)\r\n\r\nregisterMethods('Container', {\r\n  // Create an ellipse\r\n  ellipse: wrapWithAttrCheck(function (width = 0, height = width) {\r\n    return this.put(new Ellipse()).size(width, height).move(0, 0)\r\n  })\r\n})\r\n\r\nregister(Ellipse, 'Ellipse')\r\n","import Dom from './Dom.js'\nimport { globals } from '../utils/window.js'\nimport { register, create } from '../utils/adopter.js'\n\nclass Fragment extends Dom {\n  constructor (node = globals.document.createDocumentFragment()) {\n    super(node)\n  }\n\n  // Import / Export raw xml\n  xml (xmlOrFn, outerXML, ns) {\n    if (typeof xmlOrFn === 'boolean') {\n      ns = outerXML\n      outerXML = xmlOrFn\n      xmlOrFn = null\n    }\n\n    // because this is a fragment we have to put all elements into a wrapper first\n    // before we can get the innerXML from it\n    if (xmlOrFn == null || typeof xmlOrFn === 'function') {\n      const wrapper = new Dom(create('wrapper', ns))\n      wrapper.add(this.node.cloneNode(true))\n\n      return wrapper.xml(false, ns)\n    }\n\n    // Act as setter if we got a string\n    return super.xml(xmlOrFn, false, ns)\n  }\n\n}\n\nregister(Fragment, 'Fragment')\n\nexport default Fragment\n","import SVGNumber from '../../types/SVGNumber.js'\r\n\r\nexport function from (x, y) {\r\n  return (this._element || this).type === 'radialGradient'\r\n    ? this.attr({ fx: new SVGNumber(x), fy: new SVGNumber(y) })\r\n    : this.attr({ x1: new SVGNumber(x), y1: new SVGNumber(y) })\r\n}\r\n\r\nexport function to (x, y) {\r\n  return (this._element || this).type === 'radialGradient'\r\n    ? this.attr({ cx: new SVGNumber(x), cy: new SVGNumber(y) })\r\n    : this.attr({ x2: new SVGNumber(x), y2: new SVGNumber(y) })\r\n}\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Box from '../types/Box.js'\r\nimport Container from './Container.js'\r\nimport baseFind from '../modules/core/selector.js'\r\nimport * as gradiented from '../modules/core/gradiented.js'\r\n\r\nexport default class Gradient extends Container {\r\n  constructor (type, attrs) {\r\n    super(\r\n      nodeOrNew(type + 'Gradient', typeof type === 'string' ? null : type),\r\n      attrs\r\n    )\r\n  }\r\n\r\n  // custom attr to handle transform\r\n  attr (a, b, c) {\r\n    if (a === 'transform') a = 'gradientTransform'\r\n    return super.attr(a, b, c)\r\n  }\r\n\r\n  bbox () {\r\n    return new Box()\r\n  }\r\n\r\n  targets () {\r\n    return baseFind('svg [fill*=\"' + this.id() + '\"]')\r\n  }\r\n\r\n  // Alias string conversion to fill\r\n  toString () {\r\n    return this.url()\r\n  }\r\n\r\n  // Update gradient\r\n  update (block) {\r\n    // remove all stops\r\n    this.clear()\r\n\r\n    // invoke passed block\r\n    if (typeof block === 'function') {\r\n      block.call(this, this)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Return the fill id\r\n  url () {\r\n    return 'url(\"#' + this.id() + '\")'\r\n  }\r\n}\r\n\r\nextend(Gradient, gradiented)\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create gradient element in defs\r\n    gradient (...args) {\r\n      return this.defs().gradient(...args)\r\n    }\r\n  },\r\n  // define gradient\r\n  Defs: {\r\n    gradient: wrapWithAttrCheck(function (type, block) {\r\n      return this.put(new Gradient(type)).update(block)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Gradient, 'Gradient')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Box from '../types/Box.js'\r\nimport Container from './Container.js'\r\nimport baseFind from '../modules/core/selector.js'\r\n\r\nexport default class Pattern extends Container {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('pattern', node), attrs)\r\n  }\r\n\r\n  // custom attr to handle transform\r\n  attr (a, b, c) {\r\n    if (a === 'transform') a = 'patternTransform'\r\n    return super.attr(a, b, c)\r\n  }\r\n\r\n  bbox () {\r\n    return new Box()\r\n  }\r\n\r\n  targets () {\r\n    return baseFind('svg [fill*=\"' + this.id() + '\"]')\r\n  }\r\n\r\n  // Alias string conversion to fill\r\n  toString () {\r\n    return this.url()\r\n  }\r\n\r\n  // Update pattern by rebuilding\r\n  update (block) {\r\n    // remove content\r\n    this.clear()\r\n\r\n    // invoke passed block\r\n    if (typeof block === 'function') {\r\n      block.call(this, this)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Return the fill id\r\n  url () {\r\n    return 'url(\"#' + this.id() + '\")'\r\n  }\r\n\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create pattern element in defs\r\n    pattern (...args) {\r\n      return this.defs().pattern(...args)\r\n    }\r\n  },\r\n  Defs: {\r\n    pattern: wrapWithAttrCheck(function (width, height, block) {\r\n      return this.put(new Pattern()).update(block).attr({\r\n        x: 0,\r\n        y: 0,\r\n        width: width,\r\n        height: height,\r\n        patternUnits: 'userSpaceOnUse'\r\n      })\r\n    })\r\n  }\r\n})\r\n\r\nregister(Pattern, 'Pattern')\r\n","import { isImage } from '../modules/core/regex.js'\r\nimport { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { off, on } from '../modules/core/event.js'\r\nimport { registerAttrHook } from '../modules/core/attr.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { xlink } from '../modules/core/namespaces.js'\r\nimport Pattern from './Pattern.js'\r\nimport Shape from './Shape.js'\r\nimport { globals } from '../utils/window.js'\r\n\r\nexport default class Image extends Shape {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('image', node), attrs)\r\n  }\r\n\r\n  // (re)load image\r\n  load (url, callback) {\r\n    if (!url) return this\r\n\r\n    const img = new globals.window.Image()\r\n\r\n    on(img, 'load', function (e) {\r\n      const p = this.parent(Pattern)\r\n\r\n      // ensure image size\r\n      if (this.width() === 0 && this.height() === 0) {\r\n        this.size(img.width, img.height)\r\n      }\r\n\r\n      if (p instanceof Pattern) {\r\n        // ensure pattern size if not set\r\n        if (p.width() === 0 && p.height() === 0) {\r\n          p.size(this.width(), this.height())\r\n        }\r\n      }\r\n\r\n      if (typeof callback === 'function') {\r\n        callback.call(this, e)\r\n      }\r\n    }, this)\r\n\r\n    on(img, 'load error', function () {\r\n      // dont forget to unbind memory leaking events\r\n      off(img)\r\n    })\r\n\r\n    return this.attr('href', (img.src = url), xlink)\r\n  }\r\n}\r\n\r\nregisterAttrHook(function (attr, val, _this) {\r\n  // convert image fill and stroke to patterns\r\n  if (attr === 'fill' || attr === 'stroke') {\r\n    if (isImage.test(val)) {\r\n      val = _this.root().defs().image(val)\r\n    }\r\n  }\r\n\r\n  if (val instanceof Image) {\r\n    val = _this.root().defs().pattern(0, 0, (pattern) => {\r\n      pattern.add(val)\r\n    })\r\n  }\r\n\r\n  return val\r\n})\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // create image element, load image and set its size\r\n    image: wrapWithAttrCheck(function (source, callback) {\r\n      return this.put(new Image()).size(0, 0).load(source, callback)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Image, 'Image')\r\n","import { delimiter } from '../modules/core/regex.js'\r\nimport SVGArray from './SVGArray.js'\r\nimport Box from './Box.js'\r\nimport Matrix from './Matrix.js'\r\n\r\nexport default class PointArray extends SVGArray {\r\n  // Get bounding box of points\r\n  bbox () {\r\n    let maxX = -Infinity\r\n    let maxY = -Infinity\r\n    let minX = Infinity\r\n    let minY = Infinity\r\n    this.forEach(function (el) {\r\n      maxX = Math.max(el[0], maxX)\r\n      maxY = Math.max(el[1], maxY)\r\n      minX = Math.min(el[0], minX)\r\n      minY = Math.min(el[1], minY)\r\n    })\r\n    return new Box(minX, minY, maxX - minX, maxY - minY)\r\n  }\r\n\r\n  // Move point string\r\n  move (x, y) {\r\n    const box = this.bbox()\r\n\r\n    // get relative offset\r\n    x -= box.x\r\n    y -= box.y\r\n\r\n    // move every point\r\n    if (!isNaN(x) && !isNaN(y)) {\r\n      for (let i = this.length - 1; i >= 0; i--) {\r\n        this[i] = [ this[i][0] + x, this[i][1] + y ]\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Parse point string and flat array\r\n  parse (array = [ 0, 0 ]) {\r\n    const points = []\r\n\r\n    // if it is an array, we flatten it and therefore clone it to 1 depths\r\n    if (array instanceof Array) {\r\n      array = Array.prototype.concat.apply([], array)\r\n    } else { // Else, it is considered as a string\r\n      // parse points\r\n      array = array.trim().split(delimiter).map(parseFloat)\r\n    }\r\n\r\n    // validate points - https://svgwg.org/svg2-draft/shapes.html#DataTypePoints\r\n    // Odd number of coordinates is an error. In such cases, drop the last odd coordinate.\r\n    if (array.length % 2 !== 0) array.pop()\r\n\r\n    // wrap points in two-tuples\r\n    for (let i = 0, len = array.length; i < len; i = i + 2) {\r\n      points.push([ array[i], array[i + 1] ])\r\n    }\r\n\r\n    return points\r\n  }\r\n\r\n  // Resize poly string\r\n  size (width, height) {\r\n    let i\r\n    const box = this.bbox()\r\n\r\n    // recalculate position of all points according to new size\r\n    for (i = this.length - 1; i >= 0; i--) {\r\n      if (box.width) this[i][0] = ((this[i][0] - box.x) * width) / box.width + box.x\r\n      if (box.height) this[i][1] = ((this[i][1] - box.y) * height) / box.height + box.y\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Convert array to line object\r\n  toLine () {\r\n    return {\r\n      x1: this[0][0],\r\n      y1: this[0][1],\r\n      x2: this[1][0],\r\n      y2: this[1][1]\r\n    }\r\n  }\r\n\r\n  // Convert array to string\r\n  toString () {\r\n    const array = []\r\n    // convert to a poly point string\r\n    for (let i = 0, il = this.length; i < il; i++) {\r\n      array.push(this[i].join(','))\r\n    }\r\n\r\n    return array.join(' ')\r\n  }\r\n\r\n  transform (m) {\r\n    return this.clone().transformO(m)\r\n  }\r\n\r\n  // transform points with matrix (similar to Point.transform)\r\n  transformO (m) {\r\n    if (!Matrix.isMatrixLike(m)) {\r\n      m = new Matrix(m)\r\n    }\r\n\r\n    for (let i = this.length; i--;) {\r\n      // Perform the matrix multiplication\r\n      const [ x, y ] = this[i]\r\n      this[i][0] = m.a * x + m.c * y + m.e\r\n      this[i][1] = m.b * x + m.d * y + m.f\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n}\r\n","import PointArray from '../../types/PointArray.js'\r\n\r\nexport const MorphArray = PointArray\r\n\r\n// Move by left top corner over x-axis\r\nexport function x (x) {\r\n  return x == null ? this.bbox().x : this.move(x, this.bbox().y)\r\n}\r\n\r\n// Move by left top corner over y-axis\r\nexport function y (y) {\r\n  return y == null ? this.bbox().y : this.move(this.bbox().x, y)\r\n}\r\n\r\n// Set width of element\r\nexport function width (width) {\r\n  const b = this.bbox()\r\n  return width == null ? b.width : this.size(width, b.height)\r\n}\r\n\r\n// Set height of element\r\nexport function height (height) {\r\n  const b = this.bbox()\r\n  return height == null ? b.height : this.size(b.width, height)\r\n}\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { proportionalSize } from '../utils/utils.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport PointArray from '../types/PointArray.js'\r\nimport Shape from './Shape.js'\r\nimport * as pointed from '../modules/core/pointed.js'\r\n\r\nexport default class Line extends Shape {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('line', node), attrs)\r\n  }\r\n\r\n  // Get array\r\n  array () {\r\n    return new PointArray([\r\n      [ this.attr('x1'), this.attr('y1') ],\r\n      [ this.attr('x2'), this.attr('y2') ]\r\n    ])\r\n  }\r\n\r\n  // Move by left top corner\r\n  move (x, y) {\r\n    return this.attr(this.array().move(x, y).toLine())\r\n  }\r\n\r\n  // Overwrite native plot() method\r\n  plot (x1, y1, x2, y2) {\r\n    if (x1 == null) {\r\n      return this.array()\r\n    } else if (typeof y1 !== 'undefined') {\r\n      x1 = { x1, y1, x2, y2 }\r\n    } else {\r\n      x1 = new PointArray(x1).toLine()\r\n    }\r\n\r\n    return this.attr(x1)\r\n  }\r\n\r\n  // Set element size to given width and height\r\n  size (width, height) {\r\n    const p = proportionalSize(this, width, height)\r\n    return this.attr(this.array().size(p.width, p.height).toLine())\r\n  }\r\n}\r\n\r\nextend(Line, pointed)\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a line element\r\n    line: wrapWithAttrCheck(function (...args) {\r\n      // make sure plot is called as a setter\r\n      // x1 is not necessarily a number, it can also be an array, a string and a PointArray\r\n      return Line.prototype.plot.apply(\r\n        this.put(new Line())\r\n        , args[0] != null ? args : [ 0, 0, 0, 0 ]\r\n      )\r\n    })\r\n  }\r\n})\r\n\r\nregister(Line, 'Line')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\n\r\nexport default class Marker extends Container {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('marker', node), attrs)\r\n  }\r\n\r\n  // Set height of element\n  height (height) {\r\n    return this.attr('markerHeight', height)\r\n  }\n\n  orient (orient) {\r\n    return this.attr('orient', orient)\r\n  }\n\n  // Set marker refX and refY\n  ref (x, y) {\r\n    return this.attr('refX', x).attr('refY', y)\r\n  }\n\n  // Return the fill id\n  toString () {\r\n    return 'url(#' + this.id() + ')'\r\n  }\n\n  // Update marker\n  update (block) {\r\n    // remove all content\r\n    this.clear()\r\n\r\n    // invoke passed block\r\n    if (typeof block === 'function') {\r\n      block.call(this, this)\r\n    }\r\n\r\n    return this\r\n  }\n\n  // Set width of element\r\n  width (width) {\r\n    return this.attr('markerWidth', width)\r\n  }\r\n\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    marker (...args) {\r\n      // Create marker element in defs\r\n      return this.defs().marker(...args)\r\n    }\r\n  },\r\n  Defs: {\r\n    // Create marker\r\n    marker: wrapWithAttrCheck(function (width, height, block) {\r\n      // Set default viewbox to match the width and height, set ref to cx and cy and set orient to auto\r\n      return this.put(new Marker())\r\n        .size(width, height)\r\n        .ref(width / 2, height / 2)\r\n        .viewbox(0, 0, width, height)\r\n        .attr('orient', 'auto')\r\n        .update(block)\r\n    })\r\n  },\r\n  marker: {\r\n    // Create and attach markers\r\n    marker (marker, width, height, block) {\r\n      let attr = [ 'marker' ]\r\n\r\n      // Build attribute name\r\n      if (marker !== 'all') attr.push(marker)\r\n      attr = attr.join('-')\r\n\r\n      // Set marker attribute\r\n      marker = arguments[1] instanceof Marker\r\n        ? arguments[1]\r\n        : this.defs().marker(width, height, block)\r\n\r\n      return this.attr(attr, marker)\r\n    }\r\n  }\r\n})\r\n\r\nregister(Marker, 'Marker')\r\n","import { timeline } from '../modules/core/defaults.js'\r\nimport { extend } from '../utils/adopter.js'\r\n\r\n/***\r\nBase Class\r\n==========\r\nThe base stepper class that will be\r\n***/\r\n\r\nfunction makeSetterGetter (k, f) {\r\n  return function (v) {\r\n    if (v == null) return this[k]\r\n    this[k] = v\r\n    if (f) f.call(this)\r\n    return this\r\n  }\r\n}\r\n\r\nexport const easing = {\r\n  '-': function (pos) {\r\n    return pos\r\n  },\r\n  '<>': function (pos) {\r\n    return -Math.cos(pos * Math.PI) / 2 + 0.5\r\n  },\r\n  '>': function (pos) {\r\n    return Math.sin(pos * Math.PI / 2)\r\n  },\r\n  '<': function (pos) {\r\n    return -Math.cos(pos * Math.PI / 2) + 1\r\n  },\r\n  bezier: function (x1, y1, x2, y2) {\r\n    // see https://www.w3.org/TR/css-easing-1/#cubic-bezier-algo\r\n    return function (t) {\r\n      if (t < 0) {\r\n        if (x1 > 0) {\r\n          return y1 / x1 * t\r\n        } else if (x2 > 0) {\r\n          return y2 / x2 * t\r\n        } else {\r\n          return 0\r\n        }\r\n      } else if (t > 1) {\r\n        if (x2 < 1) {\r\n          return (1 - y2) / (1 - x2) * t + (y2 - x2) / (1 - x2)\r\n        } else if (x1 < 1) {\r\n          return (1 - y1) / (1 - x1) * t + (y1 - x1) / (1 - x1)\r\n        } else {\r\n          return 1\r\n        }\r\n      } else {\r\n        return 3 * t * (1 - t) ** 2 * y1 + 3 * t ** 2 * (1 - t) * y2 + t ** 3\r\n      }\r\n    }\r\n  },\r\n  // see https://www.w3.org/TR/css-easing-1/#step-timing-function-algo\r\n  steps: function (steps, stepPosition = 'end') {\r\n    // deal with \"jump-\" prefix\r\n    stepPosition = stepPosition.split('-').reverse()[0]\r\n\r\n    let jumps = steps\r\n    if (stepPosition === 'none') {\r\n      --jumps\r\n    } else if (stepPosition === 'both') {\r\n      ++jumps\r\n    }\r\n\r\n    // The beforeFlag is essentially useless\r\n    return (t, beforeFlag = false) => {\r\n      // Step is called currentStep in referenced url\r\n      let step = Math.floor(t * steps)\r\n      const jumping = (t * step) % 1 === 0\r\n\r\n      if (stepPosition === 'start' || stepPosition === 'both') {\r\n        ++step\r\n      }\r\n\r\n      if (beforeFlag && jumping) {\r\n        --step\r\n      }\r\n\r\n      if (t >= 0 && step < 0) {\r\n        step = 0\r\n      }\r\n\r\n      if (t <= 1 && step > jumps) {\r\n        step = jumps\r\n      }\r\n\r\n      return step / jumps\r\n    }\r\n  }\r\n}\r\n\r\nexport class Stepper {\r\n  done () {\r\n    return false\r\n  }\r\n}\r\n\r\n/***\r\nEasing Functions\r\n================\r\n***/\r\n\r\nexport class Ease extends Stepper {\r\n  constructor (fn = timeline.ease) {\r\n    super()\r\n    this.ease = easing[fn] || fn\r\n  }\r\n\r\n  step (from, to, pos) {\r\n    if (typeof from !== 'number') {\r\n      return pos < 1 ? from : to\r\n    }\r\n    return from + (to - from) * this.ease(pos)\r\n  }\r\n}\r\n\r\n/***\r\nController Types\r\n================\r\n***/\r\n\r\nexport class Controller extends Stepper {\r\n  constructor (fn) {\r\n    super()\r\n    this.stepper = fn\r\n  }\r\n\r\n  done (c) {\r\n    return c.done\r\n  }\n\n  step (current, target, dt, c) {\r\n    return this.stepper(current, target, dt, c)\r\n  }\r\n\r\n}\r\n\r\nfunction recalculate () {\r\n  // Apply the default parameters\r\n  const duration = (this._duration || 500) / 1000\r\n  const overshoot = this._overshoot || 0\r\n\r\n  // Calculate the PID natural response\r\n  const eps = 1e-10\r\n  const pi = Math.PI\r\n  const os = Math.log(overshoot / 100 + eps)\r\n  const zeta = -os / Math.sqrt(pi * pi + os * os)\r\n  const wn = 3.9 / (zeta * duration)\r\n\r\n  // Calculate the Spring values\r\n  this.d = 2 * zeta * wn\r\n  this.k = wn * wn\r\n}\r\n\r\nexport class Spring extends Controller {\r\n  constructor (duration = 500, overshoot = 0) {\r\n    super()\r\n    this.duration(duration)\r\n      .overshoot(overshoot)\r\n  }\r\n\r\n  step (current, target, dt, c) {\r\n    if (typeof current === 'string') return current\r\n    c.done = dt === Infinity\r\n    if (dt === Infinity) return target\r\n    if (dt === 0) return current\r\n\r\n    if (dt > 100) dt = 16\r\n\r\n    dt /= 1000\r\n\r\n    // Get the previous velocity\r\n    const velocity = c.velocity || 0\r\n\r\n    // Apply the control to get the new position and store it\r\n    const acceleration = -this.d * velocity - this.k * (current - target)\r\n    const newPosition = current\r\n      + velocity * dt\r\n      + acceleration * dt * dt / 2\r\n\r\n    // Store the velocity\r\n    c.velocity = velocity + acceleration * dt\r\n\r\n    // Figure out if we have converged, and if so, pass the value\r\n    c.done = Math.abs(target - newPosition) + Math.abs(velocity) < 0.002\r\n    return c.done ? target : newPosition\r\n  }\r\n}\r\n\r\nextend(Spring, {\r\n  duration: makeSetterGetter('_duration', recalculate),\r\n  overshoot: makeSetterGetter('_overshoot', recalculate)\r\n})\r\n\r\nexport class PID extends Controller {\r\n  constructor (p = 0.1, i = 0.01, d = 0, windup = 1000) {\r\n    super()\r\n    this.p(p).i(i).d(d).windup(windup)\r\n  }\r\n\r\n  step (current, target, dt, c) {\r\n    if (typeof current === 'string') return current\r\n    c.done = dt === Infinity\r\n\r\n    if (dt === Infinity) return target\r\n    if (dt === 0) return current\r\n\r\n    const p = target - current\r\n    let i = (c.integral || 0) + p * dt\r\n    const d = (p - (c.error || 0)) / dt\r\n    const windup = this._windup\r\n\r\n    // antiwindup\r\n    if (windup !== false) {\r\n      i = Math.max(-windup, Math.min(i, windup))\r\n    }\r\n\r\n    c.error = p\r\n    c.integral = i\r\n\r\n    c.done = Math.abs(p) < 0.001\r\n\r\n    return c.done ? target : current + (this.P * p + this.I * i + this.D * d)\r\n  }\r\n}\r\n\r\nextend(PID, {\r\n  windup: makeSetterGetter('_windup'),\r\n  p: makeSetterGetter('P'),\r\n  i: makeSetterGetter('I'),\r\n  d: makeSetterGetter('D')\r\n})\r\n","import { isPathLetter } from '../modules/core/regex.js'\r\nimport Point from '../types/Point.js'\r\n\r\nconst segmentParameters = { M: 2, L: 2, H: 1, V: 1, C: 6, S: 4, Q: 4, T: 2, A: 7, Z: 0 }\r\n\r\nconst pathHandlers = {\r\n  M: function (c, p, p0) {\r\n    p.x = p0.x = c[0]\r\n    p.y = p0.y = c[1]\r\n\r\n    return [ 'M', p.x, p.y ]\r\n  },\r\n  L: function (c, p) {\r\n    p.x = c[0]\r\n    p.y = c[1]\r\n    return [ 'L', c[0], c[1] ]\r\n  },\r\n  H: function (c, p) {\r\n    p.x = c[0]\r\n    return [ 'H', c[0] ]\r\n  },\r\n  V: function (c, p) {\r\n    p.y = c[0]\r\n    return [ 'V', c[0] ]\r\n  },\r\n  C: function (c, p) {\r\n    p.x = c[4]\r\n    p.y = c[5]\r\n    return [ 'C', c[0], c[1], c[2], c[3], c[4], c[5] ]\r\n  },\r\n  S: function (c, p) {\r\n    p.x = c[2]\r\n    p.y = c[3]\r\n    return [ 'S', c[0], c[1], c[2], c[3] ]\r\n  },\r\n  Q: function (c, p) {\r\n    p.x = c[2]\r\n    p.y = c[3]\r\n    return [ 'Q', c[0], c[1], c[2], c[3] ]\r\n  },\r\n  T: function (c, p) {\r\n    p.x = c[0]\r\n    p.y = c[1]\r\n    return [ 'T', c[0], c[1] ]\r\n  },\r\n  Z: function (c, p, p0) {\r\n    p.x = p0.x\r\n    p.y = p0.y\r\n    return [ 'Z' ]\r\n  },\r\n  A: function (c, p) {\r\n    p.x = c[5]\r\n    p.y = c[6]\r\n    return [ 'A', c[0], c[1], c[2], c[3], c[4], c[5], c[6] ]\r\n  }\r\n}\r\n\r\nconst mlhvqtcsaz = 'mlhvqtcsaz'.split('')\r\n\r\nfor (let i = 0, il = mlhvqtcsaz.length; i < il; ++i) {\r\n  pathHandlers[mlhvqtcsaz[i]] = (function (i) {\r\n    return function (c, p, p0) {\r\n      if (i === 'H') c[0] = c[0] + p.x\r\n      else if (i === 'V') c[0] = c[0] + p.y\r\n      else if (i === 'A') {\r\n        c[5] = c[5] + p.x\r\n        c[6] = c[6] + p.y\r\n      } else {\r\n        for (let j = 0, jl = c.length; j < jl; ++j) {\r\n          c[j] = c[j] + (j % 2 ? p.y : p.x)\r\n        }\r\n      }\r\n\r\n      return pathHandlers[i](c, p, p0)\r\n    }\r\n  })(mlhvqtcsaz[i].toUpperCase())\r\n}\r\n\r\nfunction makeAbsolut (parser) {\r\n  const command = parser.segment[0]\r\n  return pathHandlers[command](parser.segment.slice(1), parser.p, parser.p0)\r\n}\r\n\r\nfunction segmentComplete (parser) {\r\n  return parser.segment.length && parser.segment.length - 1 === segmentParameters[parser.segment[0].toUpperCase()]\r\n}\r\n\r\nfunction startNewSegment (parser, token) {\r\n  parser.inNumber && finalizeNumber(parser, false)\r\n  const pathLetter = isPathLetter.test(token)\r\n\r\n  if (pathLetter) {\r\n    parser.segment = [ token ]\r\n  } else {\r\n    const lastCommand = parser.lastCommand\r\n    const small = lastCommand.toLowerCase()\r\n    const isSmall = lastCommand === small\r\n    parser.segment = [ small === 'm' ? (isSmall ? 'l' : 'L') : lastCommand ]\r\n  }\r\n\r\n  parser.inSegment = true\r\n  parser.lastCommand = parser.segment[0]\r\n\r\n  return pathLetter\r\n}\r\n\r\nfunction finalizeNumber (parser, inNumber) {\r\n  if (!parser.inNumber) throw new Error('Parser Error')\r\n  parser.number && parser.segment.push(parseFloat(parser.number))\r\n  parser.inNumber = inNumber\r\n  parser.number = ''\r\n  parser.pointSeen = false\r\n  parser.hasExponent = false\r\n\r\n  if (segmentComplete(parser)) {\r\n    finalizeSegment(parser)\r\n  }\r\n}\r\n\r\nfunction finalizeSegment (parser) {\r\n  parser.inSegment = false\r\n  if (parser.absolute) {\r\n    parser.segment = makeAbsolut(parser)\r\n  }\r\n  parser.segments.push(parser.segment)\r\n}\r\n\r\nfunction isArcFlag (parser) {\r\n  if (!parser.segment.length) return false\r\n  const isArc = parser.segment[0].toUpperCase() === 'A'\r\n  const length = parser.segment.length\r\n\r\n  return isArc && (length === 4 || length === 5)\r\n}\r\n\r\nfunction isExponential (parser) {\r\n  return parser.lastToken.toUpperCase() === 'E'\r\n}\r\n\r\nexport function pathParser (d, toAbsolute = true) {\r\n\r\n  let index = 0\r\n  let token = ''\r\n  const parser = {\r\n    segment: [],\r\n    inNumber: false,\r\n    number: '',\r\n    lastToken: '',\r\n    inSegment: false,\r\n    segments: [],\r\n    pointSeen: false,\r\n    hasExponent: false,\r\n    absolute: toAbsolute,\r\n    p0: new Point(),\r\n    p: new Point()\r\n  }\r\n\r\n  while ((parser.lastToken = token, token = d.charAt(index++))) {\r\n    if (!parser.inSegment) {\r\n      if (startNewSegment(parser, token)) {\r\n        continue\r\n      }\r\n    }\r\n\r\n    if (token === '.') {\r\n      if (parser.pointSeen || parser.hasExponent) {\r\n        finalizeNumber(parser, false)\r\n        --index\r\n        continue\r\n      }\r\n      parser.inNumber = true\r\n      parser.pointSeen = true\r\n      parser.number += token\r\n      continue\r\n    }\r\n\r\n    if (!isNaN(parseInt(token))) {\r\n\r\n      if (parser.number === '0' || isArcFlag(parser)) {\r\n        parser.inNumber = true\r\n        parser.number = token\r\n        finalizeNumber(parser, true)\r\n        continue\r\n      }\r\n\r\n      parser.inNumber = true\r\n      parser.number += token\r\n      continue\r\n    }\r\n\r\n    if (token === ' ' || token === ',') {\r\n      if (parser.inNumber) {\r\n        finalizeNumber(parser, false)\r\n      }\r\n      continue\r\n    }\r\n\r\n    if (token === '-') {\r\n      if (parser.inNumber && !isExponential(parser)) {\r\n        finalizeNumber(parser, false)\r\n        --index\r\n        continue\r\n      }\r\n      parser.number += token\r\n      parser.inNumber = true\r\n      continue\r\n    }\r\n\r\n    if (token.toUpperCase() === 'E') {\r\n      parser.number += token\r\n      parser.hasExponent = true\r\n      continue\r\n    }\r\n\r\n    if (isPathLetter.test(token)) {\r\n      if (parser.inNumber) {\r\n        finalizeNumber(parser, false)\r\n      } else if (!segmentComplete(parser)) {\r\n        throw new Error('parser Error')\r\n      } else {\r\n        finalizeSegment(parser)\r\n      }\r\n      --index\r\n    }\r\n  }\r\n\r\n  if (parser.inNumber) {\r\n    finalizeNumber(parser, false)\r\n  }\r\n\r\n  if (parser.inSegment && segmentComplete(parser)) {\r\n    finalizeSegment(parser)\r\n  }\r\n\r\n  return parser.segments\r\n\r\n}\r\n","import SVGArray from './SVGArray.js'\r\nimport parser from '../modules/core/parser.js'\r\nimport Box from './Box.js'\r\nimport { pathParser } from '../utils/pathParser.js'\r\n\r\nfunction arrayToString (a) {\r\n  let s = ''\r\n  for (let i = 0, il = a.length; i < il; i++) {\r\n    s += a[i][0]\r\n\r\n    if (a[i][1] != null) {\r\n      s += a[i][1]\r\n\r\n      if (a[i][2] != null) {\r\n        s += ' '\r\n        s += a[i][2]\r\n\r\n        if (a[i][3] != null) {\r\n          s += ' '\r\n          s += a[i][3]\r\n          s += ' '\r\n          s += a[i][4]\r\n\r\n          if (a[i][5] != null) {\r\n            s += ' '\r\n            s += a[i][5]\r\n            s += ' '\r\n            s += a[i][6]\r\n\r\n            if (a[i][7] != null) {\r\n              s += ' '\r\n              s += a[i][7]\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return s + ' '\r\n}\r\n\r\nexport default class PathArray extends SVGArray {\r\n  // Get bounding box of path\r\n  bbox () {\r\n    parser().path.setAttribute('d', this.toString())\r\n    return new Box(parser.nodes.path.getBBox())\r\n  }\r\n\r\n  // Move path string\r\n  move (x, y) {\r\n    // get bounding box of current situation\r\n    const box = this.bbox()\r\n\r\n    // get relative offset\r\n    x -= box.x\r\n    y -= box.y\r\n\r\n    if (!isNaN(x) && !isNaN(y)) {\r\n      // move every point\r\n      for (let l, i = this.length - 1; i >= 0; i--) {\r\n        l = this[i][0]\r\n\r\n        if (l === 'M' || l === 'L' || l === 'T') {\r\n          this[i][1] += x\r\n          this[i][2] += y\r\n        } else if (l === 'H') {\r\n          this[i][1] += x\r\n        } else if (l === 'V') {\r\n          this[i][1] += y\r\n        } else if (l === 'C' || l === 'S' || l === 'Q') {\r\n          this[i][1] += x\r\n          this[i][2] += y\r\n          this[i][3] += x\r\n          this[i][4] += y\r\n\r\n          if (l === 'C') {\r\n            this[i][5] += x\r\n            this[i][6] += y\r\n          }\r\n        } else if (l === 'A') {\r\n          this[i][6] += x\r\n          this[i][7] += y\r\n        }\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Absolutize and parse path to array\r\n  parse (d = 'M0 0') {\r\n    if (Array.isArray(d)) {\r\n      d = Array.prototype.concat.apply([], d).toString()\r\n    }\r\n\r\n    return pathParser(d)\r\n  }\r\n\r\n  // Resize path string\r\n  size (width, height) {\r\n    // get bounding box of current situation\r\n    const box = this.bbox()\r\n    let i, l\r\n\r\n    // If the box width or height is 0 then we ignore\r\n    // transformations on the respective axis\r\n    box.width = box.width === 0 ? 1 : box.width\r\n    box.height = box.height === 0 ? 1 : box.height\r\n\r\n    // recalculate position of all points according to new size\r\n    for (i = this.length - 1; i >= 0; i--) {\r\n      l = this[i][0]\r\n\r\n      if (l === 'M' || l === 'L' || l === 'T') {\r\n        this[i][1] = ((this[i][1] - box.x) * width) / box.width + box.x\r\n        this[i][2] = ((this[i][2] - box.y) * height) / box.height + box.y\r\n      } else if (l === 'H') {\r\n        this[i][1] = ((this[i][1] - box.x) * width) / box.width + box.x\r\n      } else if (l === 'V') {\r\n        this[i][1] = ((this[i][1] - box.y) * height) / box.height + box.y\r\n      } else if (l === 'C' || l === 'S' || l === 'Q') {\r\n        this[i][1] = ((this[i][1] - box.x) * width) / box.width + box.x\r\n        this[i][2] = ((this[i][2] - box.y) * height) / box.height + box.y\r\n        this[i][3] = ((this[i][3] - box.x) * width) / box.width + box.x\r\n        this[i][4] = ((this[i][4] - box.y) * height) / box.height + box.y\r\n\r\n        if (l === 'C') {\r\n          this[i][5] = ((this[i][5] - box.x) * width) / box.width + box.x\r\n          this[i][6] = ((this[i][6] - box.y) * height) / box.height + box.y\r\n        }\r\n      } else if (l === 'A') {\r\n        // resize radii\r\n        this[i][1] = (this[i][1] * width) / box.width\r\n        this[i][2] = (this[i][2] * height) / box.height\r\n\r\n        // move position values\r\n        this[i][6] = ((this[i][6] - box.x) * width) / box.width + box.x\r\n        this[i][7] = ((this[i][7] - box.y) * height) / box.height + box.y\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Convert array to string\r\n  toString () {\r\n    return arrayToString(this)\r\n  }\r\n\r\n}\r\n","import { Ease } from './Controller.js'\nimport {\n  delimiter,\n  numberAndUnit,\n  isPathLetter\n} from '../modules/core/regex.js'\nimport { extend } from '../utils/adopter.js'\nimport Color from '../types/Color.js'\nimport PathArray from '../types/PathArray.js'\nimport SVGArray from '../types/SVGArray.js'\nimport SVGNumber from '../types/SVGNumber.js'\n\nconst getClassForType = (value) => {\n  const type = typeof value\n\n  if (type === 'number') {\n    return SVGNumber\n  } else if (type === 'string') {\n    if (Color.isColor(value)) {\n      return Color\n    } else if (delimiter.test(value)) {\n      return isPathLetter.test(value)\n        ? PathArray\n        : SVGArray\n    } else if (numberAndUnit.test(value)) {\n      return SVGNumber\n    } else {\n      return NonMorphable\n    }\n  } else if (morphableTypes.indexOf(value.constructor) > -1) {\n    return value.constructor\n  } else if (Array.isArray(value)) {\n    return SVGArray\n  } else if (type === 'object') {\n    return ObjectBag\n  } else {\n    return NonMorphable\n  }\n}\n\nexport default class Morphable {\n  constructor (stepper) {\n    this._stepper = stepper || new Ease('-')\n\n    this._from = null\n    this._to = null\n    this._type = null\n    this._context = null\n    this._morphObj = null\n  }\n\n  at (pos) {\n    return this._morphObj.morph(this._from, this._to, pos, this._stepper, this._context)\n\n  }\n\n  done () {\n    const complete = this._context\n      .map(this._stepper.done)\n      .reduce(function (last, curr) {\n        return last && curr\n      }, true)\n    return complete\n  }\n\n  from (val) {\n    if (val == null) {\n      return this._from\n    }\n\n    this._from = this._set(val)\n    return this\n  }\n\n  stepper (stepper) {\n    if (stepper == null) return this._stepper\n    this._stepper = stepper\n    return this\n  }\n\n  to (val) {\n    if (val == null) {\n      return this._to\n    }\n\n    this._to = this._set(val)\n    return this\n  }\n\n  type (type) {\n    // getter\n    if (type == null) {\n      return this._type\n    }\n\n    // setter\n    this._type = type\n    return this\n  }\n\n  _set (value) {\n    if (!this._type) {\n      this.type(getClassForType(value))\n    }\n\n    let result = (new this._type(value))\n    if (this._type === Color) {\n      result = this._to\n        ? result[this._to[4]]()\n        : this._from\n          ? result[this._from[4]]()\n          : result\n    }\n\n    if (this._type === ObjectBag) {\n      result = this._to\n        ? result.align(this._to)\n        : this._from\n          ? result.align(this._from)\n          : result\n    }\n\n    result = result.toConsumable()\n\n    this._morphObj = this._morphObj || new this._type()\n    this._context = this._context\n      || Array.apply(null, Array(result.length))\n        .map(Object)\n        .map(function (o) {\n          o.done = true\n          return o\n        })\n    return result\n  }\n\n}\n\nexport class NonMorphable {\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  init (val) {\n    val = Array.isArray(val) ? val[0] : val\n    this.value = val\n    return this\n  }\n\n  toArray () {\n    return [ this.value ]\n  }\n\n  valueOf () {\n    return this.value\n  }\n\n}\n\nexport class TransformBag {\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  init (obj) {\n    if (Array.isArray(obj)) {\n      obj = {\n        scaleX: obj[0],\n        scaleY: obj[1],\n        shear: obj[2],\n        rotate: obj[3],\n        translateX: obj[4],\n        translateY: obj[5],\n        originX: obj[6],\n        originY: obj[7]\n      }\n    }\n\n    Object.assign(this, TransformBag.defaults, obj)\n    return this\n  }\n\n  toArray () {\n    const v = this\n\n    return [\n      v.scaleX,\n      v.scaleY,\n      v.shear,\n      v.rotate,\n      v.translateX,\n      v.translateY,\n      v.originX,\n      v.originY\n    ]\n  }\n}\n\nTransformBag.defaults = {\n  scaleX: 1,\n  scaleY: 1,\n  shear: 0,\n  rotate: 0,\n  translateX: 0,\n  translateY: 0,\n  originX: 0,\n  originY: 0\n}\n\nconst sortByKey = (a, b) => {\n  return (a[0] < b[0] ? -1 : (a[0] > b[0] ? 1 : 0))\n}\n\nexport class ObjectBag {\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  align (other) {\n    const values = this.values\n    for (let i = 0, il = values.length; i < il; ++i) {\n\n      // If the type is the same we only need to check if the color is in the correct format\n      if (values[i + 1] === other[i + 1]) {\n        if (values[i + 1] === Color && other[i + 7] !== values[i + 7]) {\n          const space = other[i + 7]\n          const color = new Color(this.values.splice(i + 3, 5))[space]().toArray()\n          this.values.splice(i + 3, 0, ...color)\n        }\n\n        i += values[i + 2] + 2\n        continue\n      }\n\n      if (!other[i + 1]) {\n        return this\n      }\n\n      // The types differ, so we overwrite the new type with the old one\n      // And initialize it with the types default (e.g. black for color or 0 for number)\n      const defaultObject = new (other[i + 1])().toArray()\n\n      // Than we fix the values array\n      const toDelete = (values[i + 2]) + 3\n\n      values.splice(i, toDelete, other[i], other[i + 1], other[i + 2], ...defaultObject)\n\n      i += values[i + 2] + 2\n    }\n    return this\n  }\n\n  init (objOrArr) {\n    this.values = []\n\n    if (Array.isArray(objOrArr)) {\n      this.values = objOrArr.slice()\n      return\n    }\n\n    objOrArr = objOrArr || {}\n    const entries = []\n\n    for (const i in objOrArr) {\n      const Type = getClassForType(objOrArr[i])\n      const val = new Type(objOrArr[i]).toArray()\n      entries.push([ i, Type, val.length, ...val ])\n    }\n\n    entries.sort(sortByKey)\n\n    this.values = entries.reduce((last, curr) => last.concat(curr), [])\n    return this\n  }\n\n  toArray () {\n    return this.values\n  }\n\n  valueOf () {\n    const obj = {}\n    const arr = this.values\n\n    // for (var i = 0, len = arr.length; i < len; i += 2) {\n    while (arr.length) {\n      const key = arr.shift()\n      const Type = arr.shift()\n      const num = arr.shift()\n      const values = arr.splice(0, num)\n      obj[key] = new Type(values)// .valueOf()\n    }\n\n    return obj\n  }\n\n}\n\nconst morphableTypes = [\n  NonMorphable,\n  TransformBag,\n  ObjectBag\n]\n\nexport function registerMorphableType (type = []) {\n  morphableTypes.push(...[].concat(type))\n}\n\nexport function makeMorphable () {\n  extend(morphableTypes, {\n    to (val) {\n      return new Morphable()\n        .type(this.constructor)\n        .from(this.toArray())// this.valueOf())\n        .to(val)\n    },\n    fromArray (arr) {\n      this.init(arr)\n      return this\n    },\n    toConsumable () {\n      return this.toArray()\n    },\n    morph (from, to, pos, stepper, context) {\n      const mapper = function (i, index) {\n        return stepper.step(i, to[index], pos, context[index], context)\n      }\n\n      return this.fromArray(from.map(mapper))\n    }\n  })\n}\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { proportionalSize } from '../utils/utils.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport PathArray from '../types/PathArray.js'\r\nimport Shape from './Shape.js'\r\n\r\nexport default class Path extends Shape {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('path', node), attrs)\r\n  }\r\n\r\n  // Get array\r\n  array () {\r\n    return this._array || (this._array = new PathArray(this.attr('d')))\r\n  }\r\n\r\n  // Clear array cache\r\n  clear () {\r\n    delete this._array\r\n    return this\r\n  }\r\n\r\n  // Set height of element\r\n  height (height) {\r\n    return height == null ? this.bbox().height : this.size(this.bbox().width, height)\r\n  }\r\n\r\n  // Move by left top corner\r\n  move (x, y) {\r\n    return this.attr('d', this.array().move(x, y))\r\n  }\r\n\r\n  // Plot new path\r\n  plot (d) {\r\n    return (d == null)\n      ? this.array()\r\n      : this.clear().attr('d', typeof d === 'string' ? d : (this._array = new PathArray(d)))\r\n  }\r\n\r\n  // Set element size to given width and height\r\n  size (width, height) {\r\n    const p = proportionalSize(this, width, height)\r\n    return this.attr('d', this.array().size(p.width, p.height))\r\n  }\r\n\r\n  // Set width of element\r\n  width (width) {\r\n    return width == null ? this.bbox().width : this.size(width, this.bbox().height)\r\n  }\r\n\r\n  // Move by left top corner over x-axis\r\n  x (x) {\r\n    return x == null ? this.bbox().x : this.move(x, this.bbox().y)\r\n  }\r\n\r\n  // Move by left top corner over y-axis\r\n  y (y) {\r\n    return y == null ? this.bbox().y : this.move(this.bbox().x, y)\r\n  }\r\n\r\n}\r\n\r\n// Define morphable array\r\nPath.prototype.MorphArray = PathArray\r\n\r\n// Add parent method\r\nregisterMethods({\r\n  Container: {\r\n    // Create a wrapped path element\r\n    path: wrapWithAttrCheck(function (d) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new Path()).plot(d || new PathArray())\r\n    })\r\n  }\r\n})\r\n\r\nregister(Path, 'Path')\r\n","import { proportionalSize } from '../../utils/utils.js'\r\nimport PointArray from '../../types/PointArray.js'\r\n\r\n// Get array\r\nexport function array () {\r\n  return this._array || (this._array = new PointArray(this.attr('points')))\r\n}\r\n\r\n// Clear array cache\r\nexport function clear () {\r\n  delete this._array\r\n  return this\r\n}\r\n\r\n// Move by left top corner\r\nexport function move (x, y) {\r\n  return this.attr('points', this.array().move(x, y))\r\n}\r\n\r\n// Plot new path\r\nexport function plot (p) {\r\n  return (p == null)\n    ? this.array()\r\n    : this.clear().attr('points', typeof p === 'string'\n      ? p\r\n      : (this._array = new PointArray(p)))\r\n}\r\n\r\n// Set element size to given width and height\r\nexport function size (width, height) {\r\n  const p = proportionalSize(this, width, height)\r\n  return this.attr('points', this.array().size(p.width, p.height))\r\n}\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport PointArray from '../types/PointArray.js'\r\nimport Shape from './Shape.js'\r\nimport * as pointed from '../modules/core/pointed.js'\r\nimport * as poly from '../modules/core/poly.js'\r\n\r\nexport default class Polygon extends Shape {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('polygon', node), attrs)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a wrapped polygon element\r\n    polygon: wrapWithAttrCheck(function (p) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new Polygon()).plot(p || new PointArray())\r\n    })\r\n  }\r\n})\r\n\r\nextend(Polygon, pointed)\r\nextend(Polygon, poly)\r\nregister(Polygon, 'Polygon')\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport PointArray from '../types/PointArray.js'\r\nimport Shape from './Shape.js'\r\nimport * as pointed from '../modules/core/pointed.js'\r\nimport * as poly from '../modules/core/poly.js'\r\n\r\nexport default class Polyline extends Shape {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('polyline', node), attrs)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a wrapped polygon element\r\n    polyline: wrapWithAttrCheck(function (p) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new Polyline()).plot(p || new PointArray())\r\n    })\r\n  }\r\n})\r\n\r\nextend(Polyline, pointed)\r\nextend(Polyline, poly)\r\nregister(Polyline, 'Polyline')\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { rx, ry } from '../modules/core/circled.js'\r\nimport Shape from './Shape.js'\r\n\r\nexport default class Rect extends Shape {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('rect', node), attrs)\r\n  }\r\n}\r\n\r\nextend(Rect, { rx, ry })\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a rect element\r\n    rect: wrapWithAttrCheck(function (width, height) {\r\n      return this.put(new Rect()).size(width, height)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Rect, 'Rect')\r\n","export default class Queue {\r\n  constructor () {\r\n    this._first = null\r\n    this._last = null\r\n  }\r\n\r\n  // Shows us the first item in the list\n  first () {\r\n    return this._first && this._first.value\r\n  }\n\n  // Shows us the last item in the list\n  last () {\r\n    return this._last && this._last.value\r\n  }\n\n  push (value) {\r\n    // An item stores an id and the provided value\r\n    const item = typeof value.next !== 'undefined' ? value : { value: value, next: null, prev: null }\r\n\r\n    // Deal with the queue being empty or populated\r\n    if (this._last) {\r\n      item.prev = this._last\r\n      this._last.next = item\r\n      this._last = item\r\n    } else {\r\n      this._last = item\r\n      this._first = item\r\n    }\r\n\r\n    // Return the current item\r\n    return item\r\n  }\r\n\n  // Removes the item that was returned from the push\n  remove (item) {\r\n    // Relink the previous item\r\n    if (item.prev) item.prev.next = item.next\r\n    if (item.next) item.next.prev = item.prev\r\n    if (item === this._last) this._last = item.prev\r\n    if (item === this._first) this._first = item.next\r\n\r\n    // Invalidate item\r\n    item.prev = null\r\n    item.next = null\r\n  }\n\n  shift () {\r\n    // Check if we have a value\r\n    const remove = this._first\r\n    if (!remove) return null\r\n\r\n    // If we do, remove it and relink things\r\n    this._first = remove.next\r\n    if (this._first) this._first.prev = null\r\n    this._last = this._first ? this._last : null\r\n    return remove.value\r\n  }\r\n\r\n}\r\n","import { globals } from '../utils/window.js'\r\nimport Queue from './Queue.js'\r\n\r\nconst Animator = {\r\n  nextDraw: null,\r\n  frames: new Queue(),\r\n  timeouts: new Queue(),\r\n  immediates: new Queue(),\r\n  timer: () => globals.window.performance || globals.window.Date,\r\n  transforms: [],\r\n\r\n  frame (fn) {\r\n    // Store the node\r\n    const node = Animator.frames.push({ run: fn })\r\n\r\n    // Request an animation frame if we don't have one\r\n    if (Animator.nextDraw === null) {\r\n      Animator.nextDraw = globals.window.requestAnimationFrame(Animator._draw)\r\n    }\r\n\r\n    // Return the node so we can remove it easily\r\n    return node\r\n  },\r\n\r\n  timeout (fn, delay) {\r\n    delay = delay || 0\r\n\r\n    // Work out when the event should fire\r\n    const time = Animator.timer().now() + delay\r\n\r\n    // Add the timeout to the end of the queue\r\n    const node = Animator.timeouts.push({ run: fn, time: time })\r\n\r\n    // Request another animation frame if we need one\r\n    if (Animator.nextDraw === null) {\r\n      Animator.nextDraw = globals.window.requestAnimationFrame(Animator._draw)\r\n    }\r\n\r\n    return node\r\n  },\r\n\r\n  immediate (fn) {\r\n    // Add the immediate fn to the end of the queue\r\n    const node = Animator.immediates.push(fn)\r\n    // Request another animation frame if we need one\r\n    if (Animator.nextDraw === null) {\r\n      Animator.nextDraw = globals.window.requestAnimationFrame(Animator._draw)\r\n    }\r\n\r\n    return node\r\n  },\r\n\r\n  cancelFrame (node) {\r\n    node != null && Animator.frames.remove(node)\r\n  },\r\n\r\n  clearTimeout (node) {\r\n    node != null && Animator.timeouts.remove(node)\r\n  },\r\n\r\n  cancelImmediate (node) {\r\n    node != null && Animator.immediates.remove(node)\r\n  },\r\n\r\n  _draw (now) {\r\n    // Run all the timeouts we can run, if they are not ready yet, add them\r\n    // to the end of the queue immediately! (bad timeouts!!! [sarcasm])\r\n    let nextTimeout = null\r\n    const lastTimeout = Animator.timeouts.last()\r\n    while ((nextTimeout = Animator.timeouts.shift())) {\r\n      // Run the timeout if its time, or push it to the end\r\n      if (now >= nextTimeout.time) {\r\n        nextTimeout.run()\r\n      } else {\r\n        Animator.timeouts.push(nextTimeout)\r\n      }\r\n\r\n      // If we hit the last item, we should stop shifting out more items\r\n      if (nextTimeout === lastTimeout) break\r\n    }\r\n\r\n    // Run all of the animation frames\r\n    let nextFrame = null\r\n    const lastFrame = Animator.frames.last()\r\n    while ((nextFrame !== lastFrame) && (nextFrame = Animator.frames.shift())) {\r\n      nextFrame.run(now)\r\n    }\r\n\r\n    let nextImmediate = null\r\n    while ((nextImmediate = Animator.immediates.shift())) {\r\n      nextImmediate()\r\n    }\r\n\r\n    // If we have remaining timeouts or frames, draw until we don't anymore\r\n    Animator.nextDraw = Animator.timeouts.first() || Animator.frames.first()\r\n      ? globals.window.requestAnimationFrame(Animator._draw)\r\n      : null\r\n  }\r\n}\r\n\r\nexport default Animator\r\n","import { globals } from '../utils/window.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Animator from './Animator.js'\r\nimport EventTarget from '../types/EventTarget.js'\r\n\r\nconst makeSchedule = function (runnerInfo) {\r\n  const start = runnerInfo.start\r\n  const duration = runnerInfo.runner.duration()\r\n  const end = start + duration\r\n  return { start: start, duration: duration, end: end, runner: runnerInfo.runner }\r\n}\r\n\r\nconst defaultSource = function () {\r\n  const w = globals.window\r\n  return (w.performance || w.Date).now()\r\n}\r\n\r\nexport default class Timeline extends EventTarget {\r\n  // Construct a new timeline on the given element\r\n  constructor (timeSource = defaultSource) {\r\n    super()\r\n\r\n    this._timeSource = timeSource\r\n\r\n    // Store the timing variables\r\n    this._startTime = 0\r\n    this._speed = 1.0\r\n\r\n    // Determines how long a runner is hold in memory. Can be a dt or true/false\r\n    this._persist = 0\r\n\r\n    // Keep track of the running animations and their starting parameters\r\n    this._nextFrame = null\r\n    this._paused = true\r\n    this._runners = []\r\n    this._runnerIds = []\r\n    this._lastRunnerId = -1\r\n    this._time = 0\r\n    this._lastSourceTime = 0\r\n    this._lastStepTime = 0\r\n\r\n    // Make sure that step is always called in class context\r\n    this._step = this._stepFn.bind(this, false)\r\n    this._stepImmediate = this._stepFn.bind(this, true)\r\n  }\r\n\r\n  active () {\r\n    return !!this._nextFrame\r\n  }\r\n\r\n  finish () {\r\n    // Go to end and pause\r\n    this.time(this.getEndTimeOfTimeline() + 1)\r\n    return this.pause()\r\n  }\r\n\r\n  // Calculates the end of the timeline\r\n  getEndTime () {\r\n    const lastRunnerInfo = this.getLastRunnerInfo()\r\n    const lastDuration = lastRunnerInfo ? lastRunnerInfo.runner.duration() : 0\r\n    const lastStartTime = lastRunnerInfo ? lastRunnerInfo.start : this._time\r\n    return lastStartTime + lastDuration\r\n  }\r\n\r\n  getEndTimeOfTimeline () {\r\n    const endTimes = this._runners.map((i) => i.start + i.runner.duration())\r\n    return Math.max(0, ...endTimes)\r\n  }\r\n\r\n  getLastRunnerInfo () {\r\n    return this.getRunnerInfoById(this._lastRunnerId)\r\n  }\r\n\r\n  getRunnerInfoById (id) {\r\n    return this._runners[this._runnerIds.indexOf(id)] || null\r\n  }\r\n\r\n  pause () {\r\n    this._paused = true\r\n    return this._continue()\r\n  }\r\n\r\n  persist (dtOrForever) {\r\n    if (dtOrForever == null) return this._persist\r\n    this._persist = dtOrForever\r\n    return this\r\n  }\r\n\r\n  play () {\r\n    // Now make sure we are not paused and continue the animation\r\n    this._paused = false\r\n    return this.updateTime()._continue()\r\n  }\r\n\r\n  reverse (yes) {\r\n    const currentSpeed = this.speed()\r\n    if (yes == null) return this.speed(-currentSpeed)\r\n\r\n    const positive = Math.abs(currentSpeed)\r\n    return this.speed(yes ? -positive : positive)\r\n  }\r\n\r\n  // schedules a runner on the timeline\r\n  schedule (runner, delay, when) {\r\n    if (runner == null) {\r\n      return this._runners.map(makeSchedule)\r\n    }\r\n\r\n    // The start time for the next animation can either be given explicitly,\r\n    // derived from the current timeline time or it can be relative to the\r\n    // last start time to chain animations directly\r\n\r\n    let absoluteStartTime = 0\r\n    const endTime = this.getEndTime()\r\n    delay = delay || 0\r\n\r\n    // Work out when to start the animation\r\n    if (when == null || when === 'last' || when === 'after') {\r\n      // Take the last time and increment\r\n      absoluteStartTime = endTime\r\n    } else if (when === 'absolute' || when === 'start') {\r\n      absoluteStartTime = delay\r\n      delay = 0\r\n    } else if (when === 'now') {\r\n      absoluteStartTime = this._time\r\n    } else if (when === 'relative') {\r\n      const runnerInfo = this.getRunnerInfoById(runner.id)\r\n      if (runnerInfo) {\r\n        absoluteStartTime = runnerInfo.start + delay\r\n        delay = 0\r\n      }\r\n    } else if (when === 'with-last') {\r\n      const lastRunnerInfo = this.getLastRunnerInfo()\r\n      const lastStartTime = lastRunnerInfo ? lastRunnerInfo.start : this._time\r\n      absoluteStartTime = lastStartTime\r\n    } else {\r\n      throw new Error('Invalid value for the \"when\" parameter')\r\n    }\r\n\r\n    // Manage runner\r\n    runner.unschedule()\r\n    runner.timeline(this)\r\n\r\n    const persist = runner.persist()\r\n    const runnerInfo = {\r\n      persist: persist === null ? this._persist : persist,\r\n      start: absoluteStartTime + delay,\r\n      runner\r\n    }\r\n\r\n    this._lastRunnerId = runner.id\r\n\r\n    this._runners.push(runnerInfo)\r\n    this._runners.sort((a, b) => a.start - b.start)\r\n    this._runnerIds = this._runners.map(info => info.runner.id)\r\n\r\n    this.updateTime()._continue()\r\n    return this\r\n  }\r\n\r\n  seek (dt) {\r\n    return this.time(this._time + dt)\r\n  }\r\n\r\n  source (fn) {\r\n    if (fn == null) return this._timeSource\r\n    this._timeSource = fn\r\n    return this\r\n  }\r\n\r\n  speed (speed) {\r\n    if (speed == null) return this._speed\r\n    this._speed = speed\r\n    return this\r\n  }\r\n\r\n  stop () {\r\n    // Go to start and pause\r\n    this.time(0)\r\n    return this.pause()\r\n  }\r\n\r\n  time (time) {\r\n    if (time == null) return this._time\r\n    this._time = time\r\n    return this._continue(true)\r\n  }\r\n\r\n  // Remove the runner from this timeline\r\n  unschedule (runner) {\r\n    const index = this._runnerIds.indexOf(runner.id)\r\n    if (index < 0) return this\r\n\r\n    this._runners.splice(index, 1)\r\n    this._runnerIds.splice(index, 1)\r\n\r\n    runner.timeline(null)\r\n    return this\r\n  }\r\n\r\n  // Makes sure, that after pausing the time doesn't jump\r\n  updateTime () {\r\n    if (!this.active()) {\r\n      this._lastSourceTime = this._timeSource()\r\n    }\r\n    return this\r\n  }\r\n\r\n  // Checks if we are running and continues the animation\r\n  _continue (immediateStep = false) {\r\n    Animator.cancelFrame(this._nextFrame)\r\n    this._nextFrame = null\r\n\r\n    if (immediateStep) return this._stepImmediate()\r\n    if (this._paused) return this\r\n\r\n    this._nextFrame = Animator.frame(this._step)\r\n    return this\r\n  }\r\n\r\n  _stepFn (immediateStep = false) {\r\n    // Get the time delta from the last time and update the time\r\n    const time = this._timeSource()\r\n    let dtSource = time - this._lastSourceTime\r\n\r\n    if (immediateStep) dtSource = 0\r\n\r\n    const dtTime = this._speed * dtSource + (this._time - this._lastStepTime)\r\n    this._lastSourceTime = time\r\n\r\n    // Only update the time if we use the timeSource.\r\n    // Otherwise use the current time\r\n    if (!immediateStep) {\r\n      // Update the time\r\n      this._time += dtTime\r\n      this._time = this._time < 0 ? 0 : this._time\r\n    }\r\n    this._lastStepTime = this._time\r\n    this.fire('time', this._time)\r\n\r\n    // This is for the case that the timeline was seeked so that the time\r\n    // is now before the startTime of the runner. Thats why we need to set\r\n    // the runner to position 0\r\n\r\n    // FIXME:\r\n    // However, reseting in insertion order leads to bugs. Considering the case,\r\n    // where 2 runners change the same attribute but in different times,\r\n    // reseting both of them will lead to the case where the later defined\r\n    // runner always wins the reset even if the other runner started earlier\r\n    // and therefore should win the attribute battle\r\n    // this can be solved by reseting them backwards\r\n    for (let k = this._runners.length; k--;) {\r\n      // Get and run the current runner and ignore it if its inactive\r\n      const runnerInfo = this._runners[k]\r\n      const runner = runnerInfo.runner\r\n\r\n      // Make sure that we give the actual difference\r\n      // between runner start time and now\r\n      const dtToStart = this._time - runnerInfo.start\r\n\r\n      // Dont run runner if not started yet\r\n      // and try to reset it\r\n      if (dtToStart <= 0) {\r\n        runner.reset()\r\n      }\r\n    }\r\n\r\n    // Run all of the runners directly\r\n    let runnersLeft = false\r\n    for (let i = 0, len = this._runners.length; i < len; i++) {\r\n      // Get and run the current runner and ignore it if its inactive\r\n      const runnerInfo = this._runners[i]\r\n      const runner = runnerInfo.runner\r\n      let dt = dtTime\r\n\r\n      // Make sure that we give the actual difference\r\n      // between runner start time and now\r\n      const dtToStart = this._time - runnerInfo.start\r\n\r\n      // Dont run runner if not started yet\r\n      if (dtToStart <= 0) {\r\n        runnersLeft = true\r\n        continue\r\n      } else if (dtToStart < dt) {\r\n        // Adjust dt to make sure that animation is on point\r\n        dt = dtToStart\r\n      }\r\n\r\n      if (!runner.active()) continue\r\n\r\n      // If this runner is still going, signal that we need another animation\r\n      // frame, otherwise, remove the completed runner\r\n      const finished = runner.step(dt).done\r\n      if (!finished) {\r\n        runnersLeft = true\r\n        // continue\r\n      } else if (runnerInfo.persist !== true) {\r\n        // runner is finished. And runner might get removed\r\n        const endTime = runner.duration() - runner.time() + this._time\r\n\r\n        if (endTime + runnerInfo.persist < this._time) {\r\n          // Delete runner and correct index\r\n          runner.unschedule()\r\n          --i\r\n          --len\r\n        }\r\n      }\r\n    }\r\n\r\n    // Basically: we continue when there are runners right from us in time\r\n    // when -->, and when runners are left from us when <--\r\n    if ((runnersLeft && !(this._speed < 0 && this._time === 0)) || (this._runnerIds.length && this._speed < 0 && this._time > 0)) {\r\n      this._continue()\r\n    } else {\r\n      this.pause()\r\n      this.fire('finished')\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n}\r\n\r\nregisterMethods({\r\n  Element: {\r\n    timeline: function (timeline) {\r\n      if (timeline == null) {\r\n        this._timeline = (this._timeline || new Timeline())\r\n        return this._timeline\r\n      } else {\r\n        this._timeline = timeline\r\n        return this\r\n      }\r\n    }\r\n  }\r\n})\r\n","import { Controller, Ease, Stepper } from './Controller.js'\r\nimport { extend, register } from '../utils/adopter.js'\r\nimport { from, to } from '../modules/core/gradiented.js'\r\nimport { getOrigin } from '../utils/utils.js'\r\nimport { noop, timeline } from '../modules/core/defaults.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { rx, ry } from '../modules/core/circled.js'\r\nimport Animator from './Animator.js'\r\nimport Box from '../types/Box.js'\r\nimport EventTarget from '../types/EventTarget.js'\r\nimport Matrix from '../types/Matrix.js'\r\nimport Morphable, { TransformBag, ObjectBag } from './Morphable.js'\r\nimport Point from '../types/Point.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport Timeline from './Timeline.js'\r\n\r\nexport default class Runner extends EventTarget {\r\n  constructor (options) {\r\n    super()\r\n\r\n    // Store a unique id on the runner, so that we can identify it later\r\n    this.id = Runner.id++\r\n\r\n    // Ensure a default value\r\n    options = options == null\r\n      ? timeline.duration\r\n      : options\r\n\r\n    // Ensure that we get a controller\r\n    options = typeof options === 'function'\r\n      ? new Controller(options)\r\n      : options\r\n\r\n    // Declare all of the variables\r\n    this._element = null\r\n    this._timeline = null\r\n    this.done = false\r\n    this._queue = []\r\n\r\n    // Work out the stepper and the duration\r\n    this._duration = typeof options === 'number' && options\r\n    this._isDeclarative = options instanceof Controller\r\n    this._stepper = this._isDeclarative ? options : new Ease()\r\n\r\n    // We copy the current values from the timeline because they can change\r\n    this._history = {}\r\n\r\n    // Store the state of the runner\r\n    this.enabled = true\r\n    this._time = 0\r\n    this._lastTime = 0\r\n\r\n    // At creation, the runner is in reseted state\r\n    this._reseted = true\r\n\r\n    // Save transforms applied to this runner\r\n    this.transforms = new Matrix()\r\n    this.transformId = 1\r\n\r\n    // Looping variables\r\n    this._haveReversed = false\r\n    this._reverse = false\r\n    this._loopsDone = 0\r\n    this._swing = false\r\n    this._wait = 0\r\n    this._times = 1\r\n\r\n    this._frameId = null\r\n\r\n    // Stores how long a runner is stored after beeing done\r\n    this._persist = this._isDeclarative ? true : null\r\n  }\r\n\r\n  static sanitise (duration, delay, when) {\r\n    // Initialise the default parameters\r\n    let times = 1\r\n    let swing = false\r\n    let wait = 0\r\n    duration = duration || timeline.duration\r\n    delay = delay || timeline.delay\r\n    when = when || 'last'\r\n\r\n    // If we have an object, unpack the values\r\n    if (typeof duration === 'object' && !(duration instanceof Stepper)) {\r\n      delay = duration.delay || delay\r\n      when = duration.when || when\r\n      swing = duration.swing || swing\r\n      times = duration.times || times\r\n      wait = duration.wait || wait\r\n      duration = duration.duration || timeline.duration\r\n    }\r\n\r\n    return {\r\n      duration: duration,\r\n      delay: delay,\r\n      swing: swing,\r\n      times: times,\r\n      wait: wait,\r\n      when: when\r\n    }\r\n  }\r\n\r\n  active (enabled) {\r\n    if (enabled == null) return this.enabled\r\n    this.enabled = enabled\r\n    return this\r\n  }\r\n\r\n  /*\r\n  Private Methods\r\n  ===============\r\n  Methods that shouldn't be used externally\r\n  */\r\n  addTransform (transform, index) {\r\n    this.transforms.lmultiplyO(transform)\r\n    return this\r\n  }\r\n\r\n  after (fn) {\r\n    return this.on('finished', fn)\r\n  }\r\n\r\n  animate (duration, delay, when) {\r\n    const o = Runner.sanitise(duration, delay, when)\r\n    const runner = new Runner(o.duration)\r\n    if (this._timeline) runner.timeline(this._timeline)\r\n    if (this._element) runner.element(this._element)\r\n    return runner.loop(o).schedule(o.delay, o.when)\r\n  }\r\n\r\n  clearTransform () {\r\n    this.transforms = new Matrix()\r\n    return this\r\n  }\r\n\r\n  // TODO: Keep track of all transformations so that deletion is faster\r\n  clearTransformsFromQueue () {\r\n    if (!this.done || !this._timeline || !this._timeline._runnerIds.includes(this.id)) {\r\n      this._queue = this._queue.filter((item) => {\r\n        return !item.isTransform\r\n      })\r\n    }\r\n  }\r\n\r\n  delay (delay) {\r\n    return this.animate(0, delay)\r\n  }\r\n\r\n  duration () {\r\n    return this._times * (this._wait + this._duration) - this._wait\r\n  }\r\n\r\n  during (fn) {\r\n    return this.queue(null, fn)\r\n  }\r\n\r\n  ease (fn) {\r\n    this._stepper = new Ease(fn)\r\n    return this\r\n  }\r\n  /*\r\n  Runner Definitions\r\n  ==================\r\n  These methods help us define the runtime behaviour of the Runner or they\r\n  help us make new runners from the current runner\r\n  */\r\n\r\n  element (element) {\r\n    if (element == null) return this._element\r\n    this._element = element\r\n    element._prepareRunner()\r\n    return this\r\n  }\r\n\r\n  finish () {\r\n    return this.step(Infinity)\r\n  }\r\n\r\n  loop (times, swing, wait) {\r\n    // Deal with the user passing in an object\r\n    if (typeof times === 'object') {\r\n      swing = times.swing\r\n      wait = times.wait\r\n      times = times.times\r\n    }\r\n\r\n    // Sanitise the values and store them\r\n    this._times = times || Infinity\r\n    this._swing = swing || false\r\n    this._wait = wait || 0\r\n\r\n    // Allow true to be passed\r\n    if (this._times === true) { this._times = Infinity }\r\n\r\n    return this\r\n  }\r\n\r\n  loops (p) {\r\n    const loopDuration = this._duration + this._wait\r\n    if (p == null) {\r\n      const loopsDone = Math.floor(this._time / loopDuration)\r\n      const relativeTime = (this._time - loopsDone * loopDuration)\r\n      const position = relativeTime / this._duration\r\n      return Math.min(loopsDone + position, this._times)\r\n    }\r\n    const whole = Math.floor(p)\r\n    const partial = p % 1\r\n    const time = loopDuration * whole + this._duration * partial\r\n    return this.time(time)\r\n  }\r\n\r\n  persist (dtOrForever) {\r\n    if (dtOrForever == null) return this._persist\r\n    this._persist = dtOrForever\r\n    return this\r\n  }\r\n\r\n  position (p) {\r\n    // Get all of the variables we need\r\n    const x = this._time\r\n    const d = this._duration\r\n    const w = this._wait\r\n    const t = this._times\r\n    const s = this._swing\r\n    const r = this._reverse\r\n    let position\r\n\r\n    if (p == null) {\r\n      /*\r\n      This function converts a time to a position in the range [0, 1]\r\n      The full explanation can be found in this desmos demonstration\r\n        https://www.desmos.com/calculator/u4fbavgche\r\n      The logic is slightly simplified here because we can use booleans\r\n      */\r\n\r\n      // Figure out the value without thinking about the start or end time\r\n      const f = function (x) {\r\n        const swinging = s * Math.floor(x % (2 * (w + d)) / (w + d))\r\n        const backwards = (swinging && !r) || (!swinging && r)\r\n        const uncliped = Math.pow(-1, backwards) * (x % (w + d)) / d + backwards\r\n        const clipped = Math.max(Math.min(uncliped, 1), 0)\r\n        return clipped\r\n      }\r\n\r\n      // Figure out the value by incorporating the start time\r\n      const endTime = t * (w + d) - w\r\n      position = x <= 0\r\n        ? Math.round(f(1e-5))\r\n        : x < endTime\r\n          ? f(x)\r\n          : Math.round(f(endTime - 1e-5))\r\n      return position\r\n    }\r\n\r\n    // Work out the loops done and add the position to the loops done\r\n    const loopsDone = Math.floor(this.loops())\r\n    const swingForward = s && (loopsDone % 2 === 0)\r\n    const forwards = (swingForward && !r) || (r && swingForward)\r\n    position = loopsDone + (forwards ? p : 1 - p)\r\n    return this.loops(position)\r\n  }\r\n\r\n  progress (p) {\r\n    if (p == null) {\r\n      return Math.min(1, this._time / this.duration())\r\n    }\r\n    return this.time(p * this.duration())\r\n  }\r\n\r\n  /*\r\n  Basic Functionality\r\n  ===================\r\n  These methods allow us to attach basic functions to the runner directly\r\n  */\r\n  queue (initFn, runFn, retargetFn, isTransform) {\r\n    this._queue.push({\r\n      initialiser: initFn || noop,\r\n      runner: runFn || noop,\r\n      retarget: retargetFn,\r\n      isTransform: isTransform,\r\n      initialised: false,\r\n      finished: false\r\n    })\r\n    const timeline = this.timeline()\r\n    timeline && this.timeline()._continue()\r\n    return this\r\n  }\r\n\r\n  reset () {\r\n    if (this._reseted) return this\r\n    this.time(0)\r\n    this._reseted = true\r\n    return this\r\n  }\r\n\r\n  reverse (reverse) {\r\n    this._reverse = reverse == null ? !this._reverse : reverse\r\n    return this\r\n  }\r\n\r\n  schedule (timeline, delay, when) {\r\n    // The user doesn't need to pass a timeline if we already have one\r\n    if (!(timeline instanceof Timeline)) {\r\n      when = delay\r\n      delay = timeline\r\n      timeline = this.timeline()\r\n    }\r\n\r\n    // If there is no timeline, yell at the user...\r\n    if (!timeline) {\r\n      throw Error('Runner cannot be scheduled without timeline')\r\n    }\r\n\r\n    // Schedule the runner on the timeline provided\r\n    timeline.schedule(this, delay, when)\r\n    return this\r\n  }\r\n\r\n  step (dt) {\r\n    // If we are inactive, this stepper just gets skipped\r\n    if (!this.enabled) return this\r\n\r\n    // Update the time and get the new position\r\n    dt = dt == null ? 16 : dt\r\n    this._time += dt\r\n    const position = this.position()\r\n\r\n    // Figure out if we need to run the stepper in this frame\r\n    const running = this._lastPosition !== position && this._time >= 0\r\n    this._lastPosition = position\r\n\r\n    // Figure out if we just started\r\n    const duration = this.duration()\r\n    const justStarted = this._lastTime <= 0 && this._time > 0\r\n    const justFinished = this._lastTime < duration && this._time >= duration\r\n\r\n    this._lastTime = this._time\r\n    if (justStarted) {\r\n      this.fire('start', this)\r\n    }\r\n\r\n    // Work out if the runner is finished set the done flag here so animations\r\n    // know, that they are running in the last step (this is good for\r\n    // transformations which can be merged)\r\n    const declarative = this._isDeclarative\r\n    this.done = !declarative && !justFinished && this._time >= duration\r\n\r\n    // Runner is running. So its not in reseted state anymore\r\n    this._reseted = false\r\n\r\n    let converged = false\r\n    // Call initialise and the run function\r\n    if (running || declarative) {\r\n      this._initialise(running)\r\n\r\n      // clear the transforms on this runner so they dont get added again and again\r\n      this.transforms = new Matrix()\r\n      converged = this._run(declarative ? dt : position)\r\n\r\n      this.fire('step', this)\r\n    }\r\n    // correct the done flag here\r\n    // declaritive animations itself know when they converged\r\n    this.done = this.done || (converged && declarative)\r\n    if (justFinished) {\r\n      this.fire('finished', this)\r\n    }\r\n    return this\r\n  }\r\n\r\n  /*\r\n  Runner animation methods\r\n  ========================\r\n  Control how the animation plays\r\n  */\r\n  time (time) {\r\n    if (time == null) {\r\n      return this._time\r\n    }\r\n    const dt = time - this._time\r\n    this.step(dt)\r\n    return this\r\n  }\r\n\r\n  timeline (timeline) {\r\n    // check explicitly for undefined so we can set the timeline to null\r\n    if (typeof timeline === 'undefined') return this._timeline\r\n    this._timeline = timeline\r\n    return this\r\n  }\r\n\r\n  unschedule () {\r\n    const timeline = this.timeline()\r\n    timeline && timeline.unschedule(this)\r\n    return this\r\n  }\r\n\r\n  // Run each initialise function in the runner if required\r\n  _initialise (running) {\r\n    // If we aren't running, we shouldn't initialise when not declarative\r\n    if (!running && !this._isDeclarative) return\r\n\r\n    // Loop through all of the initialisers\r\n    for (let i = 0, len = this._queue.length; i < len; ++i) {\r\n      // Get the current initialiser\r\n      const current = this._queue[i]\r\n\r\n      // Determine whether we need to initialise\r\n      const needsIt = this._isDeclarative || (!current.initialised && running)\r\n      running = !current.finished\r\n\r\n      // Call the initialiser if we need to\r\n      if (needsIt && running) {\r\n        current.initialiser.call(this)\r\n        current.initialised = true\r\n      }\r\n    }\r\n  }\r\n\r\n  // Save a morpher to the morpher list so that we can retarget it later\r\n  _rememberMorpher (method, morpher) {\r\n    this._history[method] = {\r\n      morpher: morpher,\r\n      caller: this._queue[this._queue.length - 1]\r\n    }\r\n\r\n    // We have to resume the timeline in case a controller\r\n    // is already done without being ever run\r\n    // This can happen when e.g. this is done:\r\n    //    anim = el.animate(new SVG.Spring)\r\n    // and later\r\n    //    anim.move(...)\r\n    if (this._isDeclarative) {\r\n      const timeline = this.timeline()\r\n      timeline && timeline.play()\r\n    }\r\n  }\r\n\r\n  // Try to set the target for a morpher if the morpher exists, otherwise\r\n  // Run each run function for the position or dt given\r\n  _run (positionOrDt) {\r\n    // Run all of the _queue directly\r\n    let allfinished = true\r\n    for (let i = 0, len = this._queue.length; i < len; ++i) {\r\n      // Get the current function to run\r\n      const current = this._queue[i]\r\n\r\n      // Run the function if its not finished, we keep track of the finished\r\n      // flag for the sake of declarative _queue\r\n      const converged = current.runner.call(this, positionOrDt)\r\n      current.finished = current.finished || (converged === true)\r\n      allfinished = allfinished && current.finished\r\n    }\r\n\r\n    // We report when all of the constructors are finished\r\n    return allfinished\r\n  }\r\n\r\n  // do nothing and return false\r\n  _tryRetarget (method, target, extra) {\r\n    if (this._history[method]) {\r\n      // if the last method wasnt even initialised, throw it away\r\n      if (!this._history[method].caller.initialised) {\r\n        const index = this._queue.indexOf(this._history[method].caller)\r\n        this._queue.splice(index, 1)\r\n        return false\r\n      }\r\n\r\n      // for the case of transformations, we use the special retarget function\r\n      // which has access to the outer scope\r\n      if (this._history[method].caller.retarget) {\r\n        this._history[method].caller.retarget.call(this, target, extra)\r\n        // for everything else a simple morpher change is sufficient\r\n      } else {\r\n        this._history[method].morpher.to(target)\r\n      }\r\n\r\n      this._history[method].caller.finished = false\r\n      const timeline = this.timeline()\r\n      timeline && timeline.play()\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n}\r\n\r\nRunner.id = 0\r\n\r\nexport class FakeRunner {\r\n  constructor (transforms = new Matrix(), id = -1, done = true) {\r\n    this.transforms = transforms\r\n    this.id = id\r\n    this.done = done\r\n  }\r\n\r\n  clearTransformsFromQueue () { }\r\n}\r\n\r\nextend([ Runner, FakeRunner ], {\r\n  mergeWith (runner) {\r\n    return new FakeRunner(\r\n      runner.transforms.lmultiply(this.transforms),\r\n      runner.id\r\n    )\r\n  }\r\n})\r\n\r\n// FakeRunner.emptyRunner = new FakeRunner()\r\n\r\nconst lmultiply = (last, curr) => last.lmultiplyO(curr)\r\nconst getRunnerTransform = (runner) => runner.transforms\r\n\r\nfunction mergeTransforms () {\r\n  // Find the matrix to apply to the element and apply it\r\n  const runners = this._transformationRunners.runners\r\n  const netTransform = runners\r\n    .map(getRunnerTransform)\r\n    .reduce(lmultiply, new Matrix())\r\n\r\n  this.transform(netTransform)\r\n\r\n  this._transformationRunners.merge()\r\n\r\n  if (this._transformationRunners.length() === 1) {\r\n    this._frameId = null\r\n  }\r\n}\r\n\r\nexport class RunnerArray {\r\n  constructor () {\r\n    this.runners = []\r\n    this.ids = []\r\n  }\r\n\r\n  add (runner) {\r\n    if (this.runners.includes(runner)) return\r\n    const id = runner.id + 1\r\n\r\n    this.runners.push(runner)\r\n    this.ids.push(id)\r\n\r\n    return this\r\n  }\r\n\r\n  clearBefore (id) {\r\n    const deleteCnt = this.ids.indexOf(id + 1) || 1\r\n    this.ids.splice(0, deleteCnt, 0)\r\n    this.runners.splice(0, deleteCnt, new FakeRunner())\r\n      .forEach((r) => r.clearTransformsFromQueue())\r\n    return this\r\n  }\r\n\r\n  edit (id, newRunner) {\r\n    const index = this.ids.indexOf(id + 1)\r\n    this.ids.splice(index, 1, id + 1)\r\n    this.runners.splice(index, 1, newRunner)\r\n    return this\r\n  }\r\n\r\n  getByID (id) {\r\n    return this.runners[this.ids.indexOf(id + 1)]\r\n  }\r\n\r\n  length () {\r\n    return this.ids.length\r\n  }\r\n\r\n  merge () {\r\n    let lastRunner = null\r\n    for (let i = 0; i < this.runners.length; ++i) {\r\n      const runner = this.runners[i]\r\n\r\n      const condition = lastRunner\r\n        && runner.done && lastRunner.done\r\n        // don't merge runner when persisted on timeline\r\n        && (!runner._timeline || !runner._timeline._runnerIds.includes(runner.id))\r\n        && (!lastRunner._timeline || !lastRunner._timeline._runnerIds.includes(lastRunner.id))\r\n\r\n      if (condition) {\r\n        // the +1 happens in the function\r\n        this.remove(runner.id)\r\n        const newRunner = runner.mergeWith(lastRunner)\r\n        this.edit(lastRunner.id, newRunner)\r\n        lastRunner = newRunner\r\n        --i\r\n      } else {\r\n        lastRunner = runner\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  remove (id) {\r\n    const index = this.ids.indexOf(id + 1)\r\n    this.ids.splice(index, 1)\r\n    this.runners.splice(index, 1)\r\n    return this\r\n  }\r\n\r\n}\r\n\r\nregisterMethods({\r\n  Element: {\r\n    animate (duration, delay, when) {\r\n      const o = Runner.sanitise(duration, delay, when)\r\n      const timeline = this.timeline()\r\n      return new Runner(o.duration)\r\n        .loop(o)\r\n        .element(this)\r\n        .timeline(timeline.play())\r\n        .schedule(o.delay, o.when)\r\n    },\r\n\r\n    delay (by, when) {\r\n      return this.animate(0, by, when)\r\n    },\r\n\r\n    // this function searches for all runners on the element and deletes the ones\r\n    // which run before the current one. This is because absolute transformations\r\n    // overwfrite anything anyway so there is no need to waste time computing\r\n    // other runners\r\n    _clearTransformRunnersBefore (currentRunner) {\r\n      this._transformationRunners.clearBefore(currentRunner.id)\r\n    },\r\n\r\n    _currentTransform (current) {\r\n      return this._transformationRunners.runners\r\n        // we need the equal sign here to make sure, that also transformations\r\n        // on the same runner which execute before the current transformation are\r\n        // taken into account\r\n        .filter((runner) => runner.id <= current.id)\r\n        .map(getRunnerTransform)\r\n        .reduce(lmultiply, new Matrix())\r\n    },\r\n\r\n    _addRunner (runner) {\r\n      this._transformationRunners.add(runner)\r\n\r\n      // Make sure that the runner merge is executed at the very end of\r\n      // all Animator functions. Thats why we use immediate here to execute\r\n      // the merge right after all frames are run\r\n      Animator.cancelImmediate(this._frameId)\r\n      this._frameId = Animator.immediate(mergeTransforms.bind(this))\r\n    },\r\n\r\n    _prepareRunner () {\r\n      if (this._frameId == null) {\r\n        this._transformationRunners = new RunnerArray()\r\n          .add(new FakeRunner(new Matrix(this)))\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n// Will output the elements from array A that are not in the array B\r\nconst difference = (a, b) => a.filter(x => !b.includes(x))\r\n\r\nextend(Runner, {\r\n  attr (a, v) {\r\n    return this.styleAttr('attr', a, v)\r\n  },\r\n\r\n  // Add animatable styles\r\n  css (s, v) {\r\n    return this.styleAttr('css', s, v)\r\n  },\r\n\r\n  styleAttr (type, nameOrAttrs, val) {\r\n    if (typeof nameOrAttrs === 'string') {\r\n      return this.styleAttr(type, { [nameOrAttrs]: val })\r\n    }\r\n\r\n    let attrs = nameOrAttrs\r\n    if (this._tryRetarget(type, attrs)) return this\r\n\r\n    let morpher = new Morphable(this._stepper).to(attrs)\r\n    let keys = Object.keys(attrs)\r\n\r\n    this.queue(function () {\r\n      morpher = morpher.from(this.element()[type](keys))\r\n    }, function (pos) {\r\n      this.element()[type](morpher.at(pos).valueOf())\r\n      return morpher.done()\r\n    }, function (newToAttrs) {\r\n\r\n      // Check if any new keys were added\r\n      const newKeys = Object.keys(newToAttrs)\r\n      const differences = difference(newKeys, keys)\r\n\r\n      // If their are new keys, initialize them and add them to morpher\r\n      if (differences.length) {\r\n        // Get the values\r\n        const addedFromAttrs = this.element()[type](differences)\r\n\r\n        // Get the already initialized values\r\n        const oldFromAttrs = new ObjectBag(morpher.from()).valueOf()\r\n\r\n        // Merge old and new\r\n        Object.assign(oldFromAttrs, addedFromAttrs)\r\n        morpher.from(oldFromAttrs)\r\n      }\r\n\r\n      // Get the object from the morpher\r\n      const oldToAttrs = new ObjectBag(morpher.to()).valueOf()\r\n\r\n      // Merge in new attributes\r\n      Object.assign(oldToAttrs, newToAttrs)\r\n\r\n      // Change morpher target\r\n      morpher.to(oldToAttrs)\r\n\r\n      // Make sure that we save the work we did so we don't need it to do again\r\n      keys = newKeys\r\n      attrs = newToAttrs\r\n    })\r\n\r\n    this._rememberMorpher(type, morpher)\r\n    return this\r\n  },\r\n\r\n  zoom (level, point) {\r\n    if (this._tryRetarget('zoom', level, point)) return this\r\n\r\n    let morpher = new Morphable(this._stepper).to(new SVGNumber(level))\r\n\r\n    this.queue(function () {\r\n      morpher = morpher.from(this.element().zoom())\r\n    }, function (pos) {\r\n      this.element().zoom(morpher.at(pos), point)\r\n      return morpher.done()\r\n    }, function (newLevel, newPoint) {\r\n      point = newPoint\r\n      morpher.to(newLevel)\r\n    })\r\n\r\n    this._rememberMorpher('zoom', morpher)\r\n    return this\r\n  },\r\n\r\n  /**\r\n   ** absolute transformations\r\n   **/\r\n\r\n  //\r\n  // M v -----|-----(D M v = F v)------|----->  T v\r\n  //\r\n  // 1. define the final state (T) and decompose it (once)\r\n  //    t = [tx, ty, the, lam, sy, sx]\r\n  // 2. on every frame: pull the current state of all previous transforms\r\n  //    (M - m can change)\r\n  //   and then write this as m = [tx0, ty0, the0, lam0, sy0, sx0]\r\n  // 3. Find the interpolated matrix F(pos) = m + pos * (t - m)\r\n  //   - Note F(0) = M\r\n  //   - Note F(1) = T\r\n  // 4. Now you get the delta matrix as a result: D = F * inv(M)\r\n\r\n  transform (transforms, relative, affine) {\r\n    // If we have a declarative function, we should retarget it if possible\r\n    relative = transforms.relative || relative\r\n    if (this._isDeclarative && !relative && this._tryRetarget('transform', transforms)) {\r\n      return this\r\n    }\r\n\r\n    // Parse the parameters\r\n    const isMatrix = Matrix.isMatrixLike(transforms)\r\n    affine = transforms.affine != null\r\n      ? transforms.affine\r\n      : (affine != null ? affine : !isMatrix)\r\n\r\n    // Create a morepher and set its type\r\n    const morpher = new Morphable(this._stepper)\r\n      .type(affine ? TransformBag : Matrix)\r\n\r\n    let origin\r\n    let element\r\n    let current\r\n    let currentAngle\r\n    let startTransform\r\n\r\n    function setup () {\r\n      // make sure element and origin is defined\r\n      element = element || this.element()\r\n      origin = origin || getOrigin(transforms, element)\r\n\r\n      startTransform = new Matrix(relative ? undefined : element)\r\n\r\n      // add the runner to the element so it can merge transformations\r\n      element._addRunner(this)\r\n\r\n      // Deactivate all transforms that have run so far if we are absolute\r\n      if (!relative) {\r\n        element._clearTransformRunnersBefore(this)\r\n      }\r\n    }\r\n\r\n    function run (pos) {\r\n      // clear all other transforms before this in case something is saved\r\n      // on this runner. We are absolute. We dont need these!\r\n      if (!relative) this.clearTransform()\r\n\r\n      const { x, y } = new Point(origin).transform(element._currentTransform(this))\r\n\r\n      let target = new Matrix({ ...transforms, origin: [ x, y ] })\r\n      let start = this._isDeclarative && current\r\n        ? current\r\n        : startTransform\r\n\r\n      if (affine) {\r\n        target = target.decompose(x, y)\r\n        start = start.decompose(x, y)\r\n\r\n        // Get the current and target angle as it was set\r\n        const rTarget = target.rotate\r\n        const rCurrent = start.rotate\r\n\r\n        // Figure out the shortest path to rotate directly\r\n        const possibilities = [ rTarget - 360, rTarget, rTarget + 360 ]\r\n        const distances = possibilities.map(a => Math.abs(a - rCurrent))\r\n        const shortest = Math.min(...distances)\r\n        const index = distances.indexOf(shortest)\r\n        target.rotate = possibilities[index]\r\n      }\r\n\r\n      if (relative) {\r\n        // we have to be careful here not to overwrite the rotation\r\n        // with the rotate method of Matrix\r\n        if (!isMatrix) {\r\n          target.rotate = transforms.rotate || 0\r\n        }\r\n        if (this._isDeclarative && currentAngle) {\r\n          start.rotate = currentAngle\r\n        }\r\n      }\r\n\r\n      morpher.from(start)\r\n      morpher.to(target)\r\n\r\n      const affineParameters = morpher.at(pos)\r\n      currentAngle = affineParameters.rotate\r\n      current = new Matrix(affineParameters)\r\n\r\n      this.addTransform(current)\r\n      element._addRunner(this)\r\n      return morpher.done()\r\n    }\r\n\r\n    function retarget (newTransforms) {\r\n      // only get a new origin if it changed since the last call\r\n      if (\r\n        (newTransforms.origin || 'center').toString()\r\n        !== (transforms.origin || 'center').toString()\r\n      ) {\r\n        origin = getOrigin(newTransforms, element)\r\n      }\r\n\r\n      // overwrite the old transformations with the new ones\r\n      transforms = { ...newTransforms, origin }\r\n    }\r\n\r\n    this.queue(setup, run, retarget, true)\r\n    this._isDeclarative && this._rememberMorpher('transform', morpher)\r\n    return this\r\n  },\r\n\r\n  // Animatable x-axis\r\n  x (x, relative) {\r\n    return this._queueNumber('x', x)\r\n  },\r\n\r\n  // Animatable y-axis\r\n  y (y) {\r\n    return this._queueNumber('y', y)\r\n  },\r\n\r\n  dx (x = 0) {\r\n    return this._queueNumberDelta('x', x)\r\n  },\r\n\r\n  dy (y = 0) {\r\n    return this._queueNumberDelta('y', y)\r\n  },\r\n\r\n  dmove (x, y) {\r\n    return this.dx(x).dy(y)\r\n  },\r\n\r\n  _queueNumberDelta (method, to) {\r\n    to = new SVGNumber(to)\r\n\r\n    // Try to change the target if we have this method already registerd\r\n    if (this._tryRetarget(method, to)) return this\r\n\r\n    // Make a morpher and queue the animation\r\n    const morpher = new Morphable(this._stepper).to(to)\r\n    let from = null\r\n    this.queue(function () {\r\n      from = this.element()[method]()\r\n      morpher.from(from)\r\n      morpher.to(from + to)\r\n    }, function (pos) {\r\n      this.element()[method](morpher.at(pos))\r\n      return morpher.done()\r\n    }, function (newTo) {\r\n      morpher.to(from + new SVGNumber(newTo))\r\n    })\r\n\r\n    // Register the morpher so that if it is changed again, we can retarget it\r\n    this._rememberMorpher(method, morpher)\r\n    return this\r\n  },\r\n\r\n  _queueObject (method, to) {\r\n    // Try to change the target if we have this method already registerd\r\n    if (this._tryRetarget(method, to)) return this\r\n\r\n    // Make a morpher and queue the animation\r\n    const morpher = new Morphable(this._stepper).to(to)\r\n    this.queue(function () {\r\n      morpher.from(this.element()[method]())\r\n    }, function (pos) {\r\n      this.element()[method](morpher.at(pos))\r\n      return morpher.done()\r\n    })\r\n\r\n    // Register the morpher so that if it is changed again, we can retarget it\r\n    this._rememberMorpher(method, morpher)\r\n    return this\r\n  },\r\n\r\n  _queueNumber (method, value) {\r\n    return this._queueObject(method, new SVGNumber(value))\r\n  },\r\n\r\n  // Animatable center x-axis\r\n  cx (x) {\r\n    return this._queueNumber('cx', x)\r\n  },\r\n\r\n  // Animatable center y-axis\r\n  cy (y) {\r\n    return this._queueNumber('cy', y)\r\n  },\r\n\r\n  // Add animatable move\r\n  move (x, y) {\r\n    return this.x(x).y(y)\r\n  },\r\n\r\n  // Add animatable center\r\n  center (x, y) {\r\n    return this.cx(x).cy(y)\r\n  },\r\n\r\n  // Add animatable size\r\n  size (width, height) {\r\n    // animate bbox based size for all other elements\r\n    let box\r\n\r\n    if (!width || !height) {\r\n      box = this._element.bbox()\r\n    }\r\n\r\n    if (!width) {\r\n      width = box.width / box.height * height\r\n    }\r\n\r\n    if (!height) {\r\n      height = box.height / box.width * width\r\n    }\r\n\r\n    return this\r\n      .width(width)\r\n      .height(height)\r\n  },\r\n\r\n  // Add animatable width\r\n  width (width) {\r\n    return this._queueNumber('width', width)\r\n  },\r\n\r\n  // Add animatable height\r\n  height (height) {\r\n    return this._queueNumber('height', height)\r\n  },\r\n\r\n  // Add animatable plot\r\n  plot (a, b, c, d) {\r\n    // Lines can be plotted with 4 arguments\r\n    if (arguments.length === 4) {\r\n      return this.plot([ a, b, c, d ])\r\n    }\r\n\r\n    if (this._tryRetarget('plot', a)) return this\r\n\r\n    const morpher = new Morphable(this._stepper)\r\n      .type(this._element.MorphArray).to(a)\r\n\r\n    this.queue(function () {\r\n      morpher.from(this._element.array())\r\n    }, function (pos) {\r\n      this._element.plot(morpher.at(pos))\r\n      return morpher.done()\r\n    })\r\n\r\n    this._rememberMorpher('plot', morpher)\r\n    return this\r\n  },\r\n\r\n  // Add leading method\r\n  leading (value) {\r\n    return this._queueNumber('leading', value)\r\n  },\r\n\r\n  // Add animatable viewbox\r\n  viewbox (x, y, width, height) {\r\n    return this._queueObject('viewbox', new Box(x, y, width, height))\r\n  },\r\n\r\n  update (o) {\r\n    if (typeof o !== 'object') {\r\n      return this.update({\r\n        offset: arguments[0],\r\n        color: arguments[1],\r\n        opacity: arguments[2]\r\n      })\r\n    }\r\n\r\n    if (o.opacity != null) this.attr('stop-opacity', o.opacity)\r\n    if (o.color != null) this.attr('stop-color', o.color)\r\n    if (o.offset != null) this.attr('offset', o.offset)\r\n\r\n    return this\r\n  }\r\n})\r\n\r\nextend(Runner, { rx, ry, from, to })\r\nregister(Runner, 'Runner')\r\n","import {\r\n  adopt,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { svg, svgjs, xlink, xmlns } from '../modules/core/namespaces.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\nimport Defs from './Defs.js'\r\nimport { globals } from '../utils/window.js'\r\n\r\nexport default class Svg extends Container {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('svg', node), attrs)\r\n    this.namespace()\r\n  }\r\n\r\n  // Creates and returns defs element\r\n  defs () {\r\n    if (!this.isRoot()) return this.root().defs()\r\n\r\n    return adopt(this.node.querySelector('defs'))\r\n      || this.put(new Defs())\r\n  }\r\n\r\n  isRoot () {\r\n    return !this.node.parentNode\r\n      || (!(this.node.parentNode instanceof globals.window.SVGElement) && this.node.parentNode.nodeName !== '#document-fragment')\r\n  }\r\n\r\n  // Add namespaces\r\n  namespace () {\r\n    if (!this.isRoot()) return this.root().namespace()\r\n    return this\r\n      .attr({ xmlns: svg, version: '1.1' })\r\n      .attr('xmlns:xlink', xlink, xmlns)\r\n      .attr('xmlns:svgjs', svgjs, xmlns)\r\n  }\r\n\r\n  removeNamespace () {\r\n    return this.attr({ xmlns: null, version: null })\r\n      .attr('xmlns:xlink', null, xmlns)\r\n      .attr('xmlns:svgjs', null, xmlns)\r\n  }\r\n\r\n  // Check if this is a root svg\r\n  // If not, call root() from this element\r\n  root () {\r\n    if (this.isRoot()) return this\r\n    return super.root()\r\n  }\r\n\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create nested svg document\r\n    nested: wrapWithAttrCheck(function () {\r\n      return this.put(new Svg())\r\n    })\r\n  }\r\n})\r\n\r\nregister(Svg, 'Svg', true)\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\n\r\nexport default class Symbol extends Container {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('symbol', node), attrs)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    symbol: wrapWithAttrCheck(function () {\r\n      return this.put(new Symbol())\r\n    })\r\n  }\r\n})\r\n\r\nregister(Symbol, 'Symbol')\r\n","import { globals } from '../../utils/window.js'\r\n\r\n// Create plain text node\r\nexport function plain (text) {\r\n  // clear if build mode is disabled\r\n  if (this._build === false) {\r\n    this.clear()\r\n  }\r\n\r\n  // create text node\r\n  this.node.appendChild(globals.document.createTextNode(text))\r\n\r\n  return this\r\n}\r\n\r\n// Get length of text element\r\nexport function length () {\r\n  return this.node.getComputedTextLength()\r\n}\r\n\r\n// Move over x-axis\r\n// Text is moved by its bounding box\r\n// text-anchor does NOT matter\r\nexport function x (x, box = this.bbox()) {\r\n  if (x == null) {\r\n    return box.x\r\n  }\r\n\r\n  return this.attr('x', this.attr('x') + x - box.x)\r\n}\r\n\r\n// Move over y-axis\r\nexport function y (y, box = this.bbox()) {\r\n  if (y == null) {\r\n    return box.y\r\n  }\r\n\r\n  return this.attr('y', this.attr('y') + y - box.y)\r\n}\r\n\r\nexport function move (x, y, box = this.bbox()) {\r\n  return this.x(x, box).y(y, box)\r\n}\r\n\r\n// Move center over x-axis\r\nexport function cx (x, box = this.bbox()) {\r\n  if (x == null) {\r\n    return box.cx\r\n  }\r\n\r\n  return this.attr('x', this.attr('x') + x - box.cx)\r\n}\r\n\r\n// Move center over y-axis\r\nexport function cy (y, box = this.bbox()) {\r\n  if (y == null) {\r\n    return box.cy\r\n  }\r\n\r\n  return this.attr('y', this.attr('y') + y - box.cy)\r\n}\r\n\r\nexport function center (x, y, box = this.bbox()) {\r\n  return this.cx(x, box).cy(y, box)\r\n}\r\n\r\nexport function ax (x) {\r\n  return this.attr('x', x)\r\n}\r\n\r\nexport function ay (y) {\r\n  return this.attr('y', y)\r\n}\r\n\r\nexport function amove (x, y) {\r\n  return this.ax(x).ay(y)\r\n}\r\n\r\n// Enable / disable build mode\r\nexport function build (build) {\r\n  this._build = !!build\r\n  return this\r\n}\r\n","import {\r\n  adopt,\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport Shape from './Shape.js'\r\nimport { globals } from '../utils/window.js'\r\nimport * as textable from '../modules/core/textable.js'\r\n\r\nexport default class Text extends Shape {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('text', node), attrs)\r\n\r\n    this.dom.leading = new SVGNumber(1.3) // store leading value for rebuilding\r\n    this._rebuild = true // enable automatic updating of dy values\r\n    this._build = false // disable build mode for adding multiple lines\r\n  }\r\n\r\n  // Set / get leading\n  leading (value) {\r\n    // act as getter\r\n    if (value == null) {\r\n      return this.dom.leading\r\n    }\r\n\r\n    // act as setter\r\n    this.dom.leading = new SVGNumber(value)\r\n\r\n    return this.rebuild()\r\n  }\n\n  // Rebuild appearance type\n  rebuild (rebuild) {\r\n    // store new rebuild flag if given\r\n    if (typeof rebuild === 'boolean') {\r\n      this._rebuild = rebuild\r\n    }\r\n\r\n    // define position of all lines\r\n    if (this._rebuild) {\r\n      const self = this\r\n      let blankLineOffset = 0\r\n      const leading = this.dom.leading\r\n\r\n      this.each(function (i) {\r\n        const fontSize = globals.window.getComputedStyle(this.node)\r\n          .getPropertyValue('font-size')\r\n\r\n        const dy = leading * new SVGNumber(fontSize)\r\n\r\n        if (this.dom.newLined) {\r\n          this.attr('x', self.attr('x'))\r\n\r\n          if (this.text() === '\\n') {\r\n            blankLineOffset += dy\r\n          } else {\r\n            this.attr('dy', i ? dy + blankLineOffset : 0)\r\n            blankLineOffset = 0\r\n          }\r\n        }\r\n      })\r\n\r\n      this.fire('rebuild')\r\n    }\r\n\r\n    return this\r\n  }\n\n  // overwrite method from parent to set data properly\n  setData (o) {\r\n    this.dom = o\r\n    this.dom.leading = new SVGNumber(o.leading || 1.3)\r\n    return this\r\n  }\n\n  // Set the text content\r\n  text (text) {\r\n    // act as getter\r\n    if (text === undefined) {\r\n      const children = this.node.childNodes\r\n      let firstLine = 0\r\n      text = ''\r\n\r\n      for (let i = 0, len = children.length; i < len; ++i) {\r\n        // skip textPaths - they are no lines\r\n        if (children[i].nodeName === 'textPath') {\r\n          if (i === 0) firstLine = 1\r\n          continue\r\n        }\r\n\r\n        // add newline if its not the first child and newLined is set to true\r\n        if (i !== firstLine && children[i].nodeType !== 3 && adopt(children[i]).dom.newLined === true) {\r\n          text += '\\n'\r\n        }\r\n\r\n        // add content of this node\r\n        text += children[i].textContent\r\n      }\r\n\r\n      return text\r\n    }\r\n\r\n    // remove existing content\r\n    this.clear().build(true)\r\n\r\n    if (typeof text === 'function') {\r\n      // call block\r\n      text.call(this, this)\r\n    } else {\r\n      // store text and make sure text is not blank\r\n      text = (text + '').split('\\n')\r\n\r\n      // build new lines\r\n      for (let j = 0, jl = text.length; j < jl; j++) {\r\n        this.newLine(text[j])\r\n      }\r\n    }\r\n\r\n    // disable build mode and rebuild lines\r\n    return this.build(false).rebuild()\r\n  }\r\n\r\n}\r\n\r\nextend(Text, textable)\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create text element\r\n    text: wrapWithAttrCheck(function (text = '') {\r\n      return this.put(new Text()).text(text)\r\n    }),\r\n\r\n    // Create plain text element\r\n    plain: wrapWithAttrCheck(function (text = '') {\r\n      return this.put(new Text()).plain(text)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Text, 'Text')\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { globals } from '../utils/window.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport Shape from './Shape.js'\r\nimport Text from './Text.js'\r\nimport * as textable from '../modules/core/textable.js'\r\n\r\nexport default class Tspan extends Shape {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('tspan', node), attrs)\r\n    this._build = false // disable build mode for adding multiple lines\r\n  }\r\n\r\n  // Shortcut dx\n  dx (dx) {\r\n    return this.attr('dx', dx)\r\n  }\n\n  // Shortcut dy\n  dy (dy) {\r\n    return this.attr('dy', dy)\r\n  }\n\n  // Create new line\n  newLine () {\r\n    // mark new line\r\n    this.dom.newLined = true\r\n\r\n    // fetch parent\r\n    const text = this.parent()\r\n\r\n    // early return in case we are not in a text element\r\n    if (!(text instanceof Text)) {\r\n      return this\r\n    }\r\n\r\n    const i = text.index(this)\r\n\r\n    const fontSize = globals.window.getComputedStyle(this.node)\r\n      .getPropertyValue('font-size')\r\n    const dy = text.dom.leading * new SVGNumber(fontSize)\r\n\r\n    // apply new position\r\n    return this.dy(i ? dy : 0).attr('x', text.x())\r\n  }\n\n  // Set text content\r\n  text (text) {\r\n    if (text == null) return this.node.textContent + (this.dom.newLined ? '\\n' : '')\r\n\r\n    if (typeof text === 'function') {\r\n      this.clear().build(true)\r\n      text.call(this, this)\r\n      this.build(false)\r\n    } else {\r\n      this.plain(text)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n}\r\n\r\nextend(Tspan, textable)\r\n\r\nregisterMethods({\r\n  Tspan: {\r\n    tspan: wrapWithAttrCheck(function (text = '') {\r\n      const tspan = new Tspan()\r\n\r\n      // clear if build mode is disabled\r\n      if (!this._build) {\r\n        this.clear()\r\n      }\r\n\r\n      // add new tspan\r\n      return this.put(tspan).text(text)\r\n    })\r\n  },\r\n  Text: {\r\n    newLine: function (text = '') {\r\n      return this.tspan(text).newLine()\r\n    }\r\n  }\r\n})\r\n\r\nregister(Tspan, 'Tspan')\r\n","import { cx, cy, height, width, x, y } from '../modules/core/circled.js'\r\nimport {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport Shape from './Shape.js'\r\n\r\nexport default class Circle extends Shape {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('circle', node), attrs)\r\n  }\r\n\r\n  radius (r) {\r\n    return this.attr('r', r)\r\n  }\r\n\r\n  // Radius x value\r\n  rx (rx) {\r\n    return this.attr('r', rx)\r\n  }\r\n\r\n  // Alias radius x value\r\n  ry (ry) {\r\n    return this.rx(ry)\r\n  }\r\n\r\n  size (size) {\r\n    return this.radius(new SVGNumber(size).divide(2))\r\n  }\r\n}\r\n\r\nextend(Circle, { x, y, cx, cy, width, height })\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create circle element\r\n    circle: wrapWithAttrCheck(function (size = 0) {\r\n      return this.put(new Circle())\r\n        .size(size)\r\n        .move(0, 0)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Circle, 'Circle')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\nimport baseFind from '../modules/core/selector.js'\r\n\r\nexport default class ClipPath extends Container {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('clipPath', node), attrs)\r\n  }\r\n\r\n  // Unclip all clipped elements and remove itself\r\n  remove () {\r\n    // unclip all targets\r\n    this.targets().forEach(function (el) {\r\n      el.unclip()\r\n    })\r\n\r\n    // remove clipPath from parent\r\n    return super.remove()\r\n  }\r\n\r\n  targets () {\r\n    return baseFind('svg [clip-path*=\"' + this.id() + '\"]')\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create clipping element\r\n    clip: wrapWithAttrCheck(function () {\r\n      return this.defs().put(new ClipPath())\r\n    })\r\n  },\r\n  Element: {\r\n    // Distribute clipPath to svg element\r\n    clipper () {\r\n      return this.reference('clip-path')\r\n    },\r\n\r\n    clipWith (element) {\r\n      // use given clip or create a new one\r\n      const clipper = element instanceof ClipPath\r\n        ? element\r\n        : this.parent().clip().add(element)\r\n\r\n      // apply mask\r\n      return this.attr('clip-path', 'url(\"#' + clipper.id() + '\")')\r\n    },\r\n\r\n    // Unclip element\r\n    unclip () {\r\n      return this.attr('clip-path', null)\r\n    }\r\n  }\r\n})\r\n\r\nregister(ClipPath, 'ClipPath')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Element from './Element.js'\r\n\r\nexport default class ForeignObject extends Element {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('foreignObject', node), attrs)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    foreignObject: wrapWithAttrCheck(function (width, height) {\r\n      return this.put(new ForeignObject()).size(width, height)\r\n    })\r\n  }\r\n})\r\n\r\nregister(ForeignObject, 'ForeignObject')\r\n","import Matrix from '../../types/Matrix.js'\nimport Point from '../../types/Point.js'\nimport { proportionalSize } from '../../utils/utils.js'\n\nexport function dmove (dx, dy) {\n  this.children().forEach((child, i) => {\n\n    let bbox\n\n    // We have to wrap this for elements that dont have a bbox\n    // e.g. title and other descriptive elements\n    try {\n      // Get the childs bbox\n      bbox = child.bbox()\n    } catch (e) {\n      return\n    }\n\n    // Get childs matrix\n    const m = new Matrix(child)\n    // Translate childs matrix by amount and\n    // transform it back into parents space\n    const matrix = m.translate(dx, dy).transform(m.inverse())\n    // Calculate new x and y from old box\n    const p = new Point(bbox.x, bbox.y).transform(matrix)\n    // Move element\n    child.move(p.x, p.y)\n  })\n\n  return this\n}\n\nexport function dx (dx) {\n  return this.dmove(dx, 0)\n}\n\nexport function dy (dy) {\n  return this.dmove(0, dy)\n}\n\nexport function height (height, box = this.bbox()) {\n  if (height == null) return box.height\n  return this.size(box.width, height, box)\n}\n\nexport function move (x = 0, y = 0, box = this.bbox()) {\n  const dx = x - box.x\n  const dy = y - box.y\n\n  return this.dmove(dx, dy)\n}\n\nexport function size (width, height, box = this.bbox()) {\n  const p = proportionalSize(this, width, height, box)\n  const scaleX = p.width / box.width\n  const scaleY = p.height / box.height\n\n  this.children().forEach((child, i) => {\n    const o = new Point(box).transform(new Matrix(child).inverse())\n    child.scale(scaleX, scaleY, o.x, o.y)\n  })\n\n  return this\n}\n\nexport function width (width, box = this.bbox()) {\n  if (width == null) return box.width\n  return this.size(width, box.height, box)\n}\n\nexport function x (x, box = this.bbox()) {\n  if (x == null) return box.x\n  return this.move(x, box.y, box)\n}\n\nexport function y (y, box = this.bbox()) {\n  if (y == null) return box.y\n  return this.move(box.x, y, box)\n}\n","import { nodeOrNew, register, wrapWithAttrCheck, extend } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\nimport * as containerGeometry from '../modules/core/containerGeometry.js'\r\n\r\nexport default class G extends Container {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('g', node), attrs)\r\n  }\r\n}\r\n\r\nextend(G, containerGeometry)\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a group element\r\n    group: wrapWithAttrCheck(function () {\r\n      return this.put(new G())\r\n    })\r\n  }\r\n})\r\n\r\nregister(G, 'G')\r\n","import { nodeOrNew, register, wrapWithAttrCheck, extend } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { xlink } from '../modules/core/namespaces.js'\r\nimport Container from './Container.js'\r\nimport * as containerGeometry from '../modules/core/containerGeometry.js'\r\n\r\nexport default class A extends Container {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('a', node), attrs)\r\n  }\r\n\r\n  // Link target attribute\r\n  target (target) {\r\n    return this.attr('target', target)\r\n  }\r\n\r\n  // Link url\r\n  to (url) {\r\n    return this.attr('href', url, xlink)\r\n  }\r\n\r\n}\r\n\r\nextend(A, containerGeometry)\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a hyperlink element\r\n    link: wrapWithAttrCheck(function (url) {\r\n      return this.put(new A()).to(url)\r\n    })\r\n  },\r\n  Element: {\r\n    unlink () {\r\n      const link = this.linker()\r\n\r\n      if (!link) return this\r\n\r\n      const parent = link.parent()\r\n\r\n      if (!parent) {\r\n        return this.remove()\r\n      }\r\n\r\n      const index = parent.index(link)\r\n      parent.add(this, index)\r\n\r\n      link.remove()\r\n      return this\r\n    },\r\n    linkTo (url) {\r\n      // reuse old link if possible\r\n      let link = this.linker()\r\n\r\n      if (!link) {\r\n        link = new A()\r\n        this.wrap(link)\r\n      }\r\n\r\n      if (typeof url === 'function') {\r\n        url.call(link, link)\r\n      } else {\r\n        link.to(url)\r\n      }\r\n\r\n      return this\r\n    },\r\n    linker () {\r\n      const link = this.parent()\r\n      if (link && link.node.nodeName.toLowerCase() === 'a') {\r\n        return link\r\n      }\r\n\r\n      return null\r\n    }\r\n  }\r\n})\r\n\r\nregister(A, 'A')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\nimport baseFind from '../modules/core/selector.js'\r\n\r\nexport default class Mask extends Container {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('mask', node), attrs)\r\n  }\r\n\r\n  // Unmask all masked elements and remove itself\r\n  remove () {\r\n    // unmask all targets\r\n    this.targets().forEach(function (el) {\r\n      el.unmask()\r\n    })\r\n\r\n    // remove mask from parent\r\n    return super.remove()\r\n  }\r\n\r\n  targets () {\r\n    return baseFind('svg [mask*=\"' + this.id() + '\"]')\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    mask: wrapWithAttrCheck(function () {\r\n      return this.defs().put(new Mask())\r\n    })\r\n  },\r\n  Element: {\r\n    // Distribute mask to svg element\r\n    masker () {\r\n      return this.reference('mask')\r\n    },\r\n\r\n    maskWith (element) {\r\n      // use given mask or create a new one\r\n      const masker = element instanceof Mask\r\n        ? element\r\n        : this.parent().mask().add(element)\r\n\r\n      // apply mask\r\n      return this.attr('mask', 'url(\"#' + masker.id() + '\")')\r\n    },\r\n\r\n    // Unmask element\r\n    unmask () {\r\n      return this.attr('mask', null)\r\n    }\r\n  }\r\n})\r\n\r\nregister(Mask, 'Mask')\r\n","import { nodeOrNew, register } from '../utils/adopter.js'\r\nimport Element from './Element.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\n\r\nexport default class Stop extends Element {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('stop', node), attrs)\r\n  }\r\n\r\n  // add color stops\r\n  update (o) {\r\n    if (typeof o === 'number' || o instanceof SVGNumber) {\r\n      o = {\r\n        offset: arguments[0],\r\n        color: arguments[1],\r\n        opacity: arguments[2]\r\n      }\r\n    }\r\n\r\n    // set attributes\r\n    if (o.opacity != null) this.attr('stop-opacity', o.opacity)\r\n    if (o.color != null) this.attr('stop-color', o.color)\r\n    if (o.offset != null) this.attr('offset', new SVGNumber(o.offset))\r\n\r\n    return this\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Gradient: {\r\n    // Add a color stop\r\n    stop: function (offset, color, opacity) {\r\n      return this.put(new Stop()).update(offset, color, opacity)\r\n    }\r\n  }\r\n})\r\n\r\nregister(Stop, 'Stop')\r\n","import { nodeOrNew, register } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { unCamelCase } from '../utils/utils.js'\r\nimport Element from './Element.js'\r\n\r\nfunction cssRule (selector, rule) {\r\n  if (!selector) return ''\r\n  if (!rule) return selector\r\n\r\n  let ret = selector + '{'\r\n\r\n  for (const i in rule) {\r\n    ret += unCamelCase(i) + ':' + rule[i] + ';'\r\n  }\r\n\r\n  ret += '}'\r\n\r\n  return ret\r\n}\r\n\r\nexport default class Style extends Element {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('style', node), attrs)\r\n  }\r\n\r\n  addText (w = '') {\r\n    this.node.textContent += w\r\n    return this\r\n  }\r\n\r\n  font (name, src, params = {}) {\r\n    return this.rule('@font-face', {\r\n      fontFamily: name,\r\n      src: src,\r\n      ...params\r\n    })\r\n  }\r\n\r\n  rule (selector, obj) {\r\n    return this.addText(cssRule(selector, obj))\r\n  }\r\n}\r\n\r\nregisterMethods('Dom', {\r\n  style (selector, obj) {\r\n    return this.put(new Style()).rule(selector, obj)\r\n  },\r\n  fontface  (name, src, params) {\r\n    return this.put(new Style()).font(name, src, params)\r\n  }\r\n})\r\n\r\nregister(Style, 'Style')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { xlink } from '../modules/core/namespaces.js'\r\nimport Path from './Path.js'\r\nimport PathArray from '../types/PathArray.js'\r\nimport Text from './Text.js'\r\nimport baseFind from '../modules/core/selector.js'\r\n\r\nexport default class TextPath extends Text {\r\n  // Initialize node\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('textPath', node), attrs)\r\n  }\r\n\r\n  // return the array of the path track element\r\n  array () {\r\n    const track = this.track()\r\n\r\n    return track ? track.array() : null\r\n  }\r\n\r\n  // Plot path if any\r\n  plot (d) {\r\n    const track = this.track()\r\n    let pathArray = null\r\n\r\n    if (track) {\r\n      pathArray = track.plot(d)\r\n    }\r\n\r\n    return (d == null) ? pathArray : this\r\n  }\r\n\r\n  // Get the path element\r\n  track () {\r\n    return this.reference('href')\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    textPath: wrapWithAttrCheck(function (text, path) {\r\n      // Convert text to instance if needed\r\n      if (!(text instanceof Text)) {\r\n        text = this.text(text)\r\n      }\r\n\r\n      return text.path(path)\r\n    })\r\n  },\r\n  Text: {\r\n    // Create path for text to run on\r\n    path: wrapWithAttrCheck(function (track, importNodes = true) {\r\n      const textPath = new TextPath()\r\n\r\n      // if track is a path, reuse it\r\n      if (!(track instanceof Path)) {\r\n        // create path element\r\n        track = this.defs().path(track)\r\n      }\r\n\r\n      // link textPath to path and add content\r\n      textPath.attr('href', '#' + track, xlink)\r\n\r\n      // Transplant all nodes from text to textPath\r\n      let node\r\n      if (importNodes) {\r\n        while ((node = this.node.firstChild)) {\r\n          textPath.node.appendChild(node)\r\n        }\r\n      }\r\n\r\n      // add textPath element as child node and return textPath\r\n      return this.put(textPath)\r\n    }),\r\n\r\n    // Get the textPath children\r\n    textPath () {\r\n      return this.findOne('textPath')\r\n    }\r\n  },\r\n  Path: {\r\n    // creates a textPath from this path\r\n    text: wrapWithAttrCheck(function (text) {\r\n      // Convert text to instance if needed\r\n      if (!(text instanceof Text)) {\r\n        text = new Text().addTo(this.parent()).text(text)\r\n      }\r\n\r\n      // Create textPath from text and path and return\r\n      return text.path(this)\r\n    }),\r\n\r\n    targets () {\r\n      return baseFind('svg textPath').filter((node) => {\r\n        return (node.attr('href') || '').includes(this.id())\r\n      })\r\n\r\n      // Does not work in IE11. Use when IE support is dropped\r\n      // return baseFind('svg textPath[*|href*=\"' + this.id() + '\"]')\r\n    }\r\n  }\r\n})\r\n\r\nTextPath.prototype.MorphArray = PathArray\r\nregister(TextPath, 'TextPath')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { xlink } from '../modules/core/namespaces.js'\r\nimport Shape from './Shape.js'\r\n\r\nexport default class Use extends Shape {\r\n  constructor (node, attrs = node) {\r\n    super(nodeOrNew('use', node), attrs)\r\n  }\r\n\r\n  // Use element as a reference\r\n  use (element, file) {\r\n    // Set lined element\r\n    return this.attr('href', (file || '') + '#' + element, xlink)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a use element\r\n    use: wrapWithAttrCheck(function (element, file) {\r\n      return this.put(new Use()).use(element, file)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Use, 'Use')\r\n","/* Optional Modules */\r\nimport './modules/optional/arrange.js'\r\nimport './modules/optional/class.js'\r\nimport './modules/optional/css.js'\r\nimport './modules/optional/data.js'\r\nimport './modules/optional/memory.js'\r\nimport './modules/optional/sugar.js'\r\nimport './modules/optional/transform.js'\r\n\r\nimport { extend, makeInstance } from './utils/adopter.js'\r\nimport { getMethodNames, getMethodsFor } from './utils/methods.js'\r\nimport Box from './types/Box.js'\r\nimport Color from './types/Color.js'\r\nimport Container from './elements/Container.js'\r\nimport Defs from './elements/Defs.js'\r\nimport Dom from './elements/Dom.js'\r\nimport Element from './elements/Element.js'\r\nimport Ellipse from './elements/Ellipse.js'\r\nimport EventTarget from './types/EventTarget.js'\r\nimport Fragment from './elements/Fragment.js'\r\nimport Gradient from './elements/Gradient.js'\r\nimport Image from './elements/Image.js'\r\nimport Line from './elements/Line.js'\r\nimport List from './types/List.js'\r\nimport Marker from './elements/Marker.js'\r\nimport Matrix from './types/Matrix.js'\r\nimport Morphable, {\r\n  NonMorphable,\r\n  ObjectBag,\r\n  TransformBag,\r\n  makeMorphable,\r\n  registerMorphableType\r\n} from './animation/Morphable.js'\r\nimport Path from './elements/Path.js'\r\nimport PathArray from './types/PathArray.js'\r\nimport Pattern from './elements/Pattern.js'\r\nimport PointArray from './types/PointArray.js'\r\nimport Point from './types/Point.js'\r\nimport Polygon from './elements/Polygon.js'\r\nimport Polyline from './elements/Polyline.js'\r\nimport Rect from './elements/Rect.js'\r\nimport Runner from './animation/Runner.js'\r\nimport SVGArray from './types/SVGArray.js'\r\nimport SVGNumber from './types/SVGNumber.js'\r\nimport Shape from './elements/Shape.js'\r\nimport Svg from './elements/Svg.js'\r\nimport Symbol from './elements/Symbol.js'\r\nimport Text from './elements/Text.js'\r\nimport Tspan from './elements/Tspan.js'\r\nimport * as defaults from './modules/core/defaults.js'\r\nimport * as utils from './utils/utils.js'\r\nimport * as namespaces from './modules/core/namespaces.js'\r\nimport * as regex from './modules/core/regex.js'\r\n\r\nexport {\r\n  Morphable,\r\n  registerMorphableType,\r\n  makeMorphable,\r\n  TransformBag,\r\n  ObjectBag,\r\n  NonMorphable\r\n}\r\n\r\nexport { defaults, utils, namespaces, regex }\r\nexport const SVG = makeInstance\r\nexport { default as parser } from './modules/core/parser.js'\r\nexport { default as find } from './modules/core/selector.js'\r\nexport * from './modules/core/event.js'\r\nexport * from './utils/adopter.js'\r\nexport {\r\n  getWindow,\r\n  registerWindow,\r\n  restoreWindow,\r\n  saveWindow,\r\n  withWindow\r\n} from './utils/window.js'\r\n\r\n/* Animation Modules */\r\nexport { default as Animator } from './animation/Animator.js'\r\nexport { Controller, Ease, PID, Spring, easing } from './animation/Controller.js'\r\nexport { default as Queue } from './animation/Queue.js'\r\nexport { default as Runner } from './animation/Runner.js'\r\nexport { default as Timeline } from './animation/Timeline.js'\r\n\r\n/* Types */\r\nexport { default as Array } from './types/SVGArray.js'\r\nexport { default as Box } from './types/Box.js'\r\nexport { default as Color } from './types/Color.js'\r\nexport { default as EventTarget } from './types/EventTarget.js'\r\nexport { default as Matrix } from './types/Matrix.js'\r\nexport { default as Number } from './types/SVGNumber.js'\r\nexport { default as PathArray } from './types/PathArray.js'\r\nexport { default as Point } from './types/Point.js'\r\nexport { default as PointArray } from './types/PointArray.js'\r\nexport { default as List } from './types/List.js'\r\n\r\n/* Elements */\r\nexport { default as Circle } from './elements/Circle.js'\r\nexport { default as ClipPath } from './elements/ClipPath.js'\r\nexport { default as Container } from './elements/Container.js'\r\nexport { default as Defs } from './elements/Defs.js'\r\nexport { default as Dom } from './elements/Dom.js'\r\nexport { default as Element } from './elements/Element.js'\r\nexport { default as Ellipse } from './elements/Ellipse.js'\r\nexport { default as ForeignObject } from './elements/ForeignObject.js'\r\nexport { default as Fragment } from './elements/Fragment.js'\r\nexport { default as Gradient } from './elements/Gradient.js'\r\nexport { default as G } from './elements/G.js'\r\nexport { default as A } from './elements/A.js'\r\nexport { default as Image } from './elements/Image.js'\r\nexport { default as Line } from './elements/Line.js'\r\nexport { default as Marker } from './elements/Marker.js'\r\nexport { default as Mask } from './elements/Mask.js'\r\nexport { default as Path } from './elements/Path.js'\r\nexport { default as Pattern } from './elements/Pattern.js'\r\nexport { default as Polygon } from './elements/Polygon.js'\r\nexport { default as Polyline } from './elements/Polyline.js'\r\nexport { default as Rect } from './elements/Rect.js'\r\nexport { default as Shape } from './elements/Shape.js'\r\nexport { default as Stop } from './elements/Stop.js'\r\nexport { default as Style } from './elements/Style.js'\r\nexport { default as Svg } from './elements/Svg.js'\r\nexport { default as Symbol } from './elements/Symbol.js'\r\nexport { default as Text } from './elements/Text.js'\r\nexport { default as TextPath } from './elements/TextPath.js'\r\nexport { default as Tspan } from './elements/Tspan.js'\r\nexport { default as Use } from './elements/Use.js'\r\n\r\nextend([\r\n  Svg,\r\n  Symbol,\r\n  Image,\r\n  Pattern,\r\n  Marker\r\n], getMethodsFor('viewbox'))\r\n\r\nextend([\r\n  Line,\r\n  Polyline,\r\n  Polygon,\r\n  Path\r\n], getMethodsFor('marker'))\r\n\r\nextend(Text, getMethodsFor('Text'))\r\nextend(Path, getMethodsFor('Path'))\r\n\r\nextend(Defs, getMethodsFor('Defs'))\r\n\r\nextend([\r\n  Text,\r\n  Tspan\r\n], getMethodsFor('Tspan'))\r\n\r\nextend([\r\n  Rect,\r\n  Ellipse,\r\n  Gradient,\r\n  Runner\r\n], getMethodsFor('radius'))\r\n\r\nextend(EventTarget, getMethodsFor('EventTarget'))\r\nextend(Dom, getMethodsFor('Dom'))\r\nextend(Element, getMethodsFor('Element'))\r\nextend(Shape, getMethodsFor('Shape'))\r\nextend([ Container, Fragment ], getMethodsFor('Container'))\r\nextend(Gradient, getMethodsFor('Gradient'))\r\n\r\nextend(Runner, getMethodsFor('Runner'))\r\n\r\nList.extend(getMethodNames())\r\n\r\nregisterMorphableType([\r\n  SVGNumber,\r\n  Color,\r\n  Box,\r\n  Matrix,\r\n  SVGArray,\r\n  PointArray,\r\n  PathArray,\r\n  Point\r\n])\r\n\r\nmakeMorphable()\r\n","<template>\r\n  <a-row :gutter=\"16\">\r\n    <a-col :span=\"16\">\r\n      <div class=\"left\">\r\n        <a-collapse\r\n          v-model:activeKey=\"activeCollapse\"\r\n          expand-icon-position=\"right\"\r\n          :bordered=\"false\"\r\n          accordion\r\n        >\r\n          <template #expandIcon=\"{ isActive }\">\r\n            <span>\r\n              <MinusOutlined v-show=\"isActive\" />\r\n              <PlusOutlined v-show=\"!isActive\" />\r\n            </span>\r\n          </template>\r\n\r\n          <!-- 二维码内容编辑区 content-->\r\n          <a-collapse-panel key=\"content\">\r\n            <template #header>\r\n              <QrcodeOutlined class=\"title-icon\" />\r\n              <h3 class=\"title\"><slot name=\"contentTitle\">输入二维码内容</slot></h3>\r\n            </template>\r\n\r\n            <p class=\"tips\">\r\n              <!-- 提示信息 -->\r\n              <PushpinFilled class=\"tips-icon\" /><slot name=\"tips\"></slot>\r\n              <!-- 帮助信息 -->\r\n              <a-popover\r\n                title=\"帮助信息\"\r\n                placement=\"bottomLeft\"\r\n                v-model:visible=\"showHelp\"\r\n                :get-popup-container=\"(trigger) => trigger.parentElement\"\r\n              >\r\n                <span class=\"help\">帮助 <QuestionCircleOutlined /></span>\r\n                <template #content><slot name=\"help\">暂无帮助信息</slot></template>\r\n              </a-popover>\r\n            </p>\r\n            <!-- content 内容 -->\r\n            <slot name=\"content\"></slot>\r\n            <QrStatus :qrStatus=\"qrStatus\" :qrText=\"qrText\" :textLength=\"textLength\" :max=\"max\"></QrStatus>\r\n          </a-collapse-panel>\r\n\r\n          <!-- 二维码美化区 settings-->\r\n          <a-collapse-panel key=\"settings\" class=\"settings\">\r\n            <template #header>\r\n              <SettingFilled class=\"title-icon\" />\r\n              <h3 class=\"title\"><slot name=\"settingsTitle\">二维码美化选项</slot></h3>\r\n            </template>\r\n\r\n            <!-- settings 内容 -->\r\n            <a-tabs v-model:activeKey=\"activeSettingsTab\" centered :tabBarGutter=\"50\" size=\"small\">\r\n              <!-- 模板 -->\r\n              <a-tab-pane key=\"preset\">\r\n                <template #tab>\r\n                  <span><IconFont type=\"icon-magicwand\" />快速美化模板</span>\r\n                </template>\r\n                <QrPresets\r\n                  :textLength=\"textLength\"\r\n                  :presets=\"presets\"\r\n                  v-model:selectedPreset=\"selectedPreset\"\r\n                ></QrPresets>\r\n              </a-tab-pane>\r\n              <!-- 外形 -->\r\n              <a-tab-pane key=\"shape\">\r\n                <template #tab>\r\n                  <span><IconFont type=\"icon-frame\" />二维码外形</span>\r\n                </template>\r\n                <QrShape\r\n                  :textLength=\"textLength\"\r\n                  :max=\"max\"\r\n                  v-model:correctLevel=\"correctLevel\"\r\n                  :elements=\"elements\"\r\n                  v-model:selectedElement=\"selectedElement\"\r\n                  :eyes=\"eyes\"\r\n                  v-model:selectedEye=\"selectedEye\"\r\n                ></QrShape>\r\n              </a-tab-pane>\r\n              <!-- logo -->\r\n              <a-tab-pane key=\"logo\">\r\n                <template #tab>\r\n                  <span><IconFont type=\"icon-image\" />添加logo</span>\r\n                </template>\r\n                <QrLogo\r\n                  :logos=\"logos\"\r\n                  :userLogos=\"userLogos\"\r\n                  @logoUpload=\"addImage('userLogos', $event)\"\r\n                  @logoDelete=\"removeImage('userLogos', $event)\"\r\n                  v-model:selectedLogo=\"selectedLogo\"\r\n                  v-model:logoStyle=\"logoStyle\"\r\n                  v-model:logoShadow=\"logoShadow\"\r\n                ></QrLogo>\r\n              </a-tab-pane>\r\n              <!-- 文字 -->\r\n              <a-tab-pane key=\"font\">\r\n                <template #tab>\r\n                  <span><IconFont type=\"icon-font\" />添加文字</span>\r\n                </template>\r\n                <QrFont\r\n                  :fonts=\"fonts\"\r\n                  v-model:fontText=\"fontText\"\r\n                  v-model:fontFamily=\"fontFamily\"\r\n                  v-model:fontColor=\"fontColor\"\r\n                  v-model:fontSize=\"fontSize\"\r\n                  v-model:fontStyle=\"fontStyle\"\r\n                  v-model:textAlign=\"textAlign\"\r\n                ></QrFont>\r\n              </a-tab-pane>\r\n              <!-- 颜色 -->\r\n              <a-tab-pane key=\"color\">\r\n                <template #tab>\r\n                  <span><IconFont type=\"icon-color\" />二维码颜色</span>\r\n                </template>\r\n                <QrColor\r\n                  :colors=\"colors\"\r\n                  :gdColors=\"gdColors\"\r\n                  v-model:fill=\"fill\"\r\n                  v-model:eyeOuter=\"eyeOuter\"\r\n                  v-model:eyeInner=\"eyeInner\"\r\n                ></QrColor>\r\n              </a-tab-pane>\r\n            </a-tabs>\r\n          </a-collapse-panel>\r\n        </a-collapse>\r\n      </div>\r\n    </a-col>\r\n\r\n    <!-- 二维码预览区 -->\r\n    <a-col :span=\"8\" @click.right.prevent>\r\n      <a-spin size=\"large\" :spinning=\"qrStatus === 'waiting'\">\r\n        <div class=\"right\">\r\n          <QrRender :qrConfig=\"qrConfig\" :resetPreset=\"resetPreset\" @changeQrStatus=\"changeQrStatus\">\r\n          </QrRender>\r\n        </div>\r\n      </a-spin>\r\n    </a-col>\r\n  </a-row>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  PlusOutlined,\r\n  MinusOutlined,\r\n  SettingFilled,\r\n  QrcodeOutlined,\r\n  PushpinFilled,\r\n  QuestionCircleOutlined,\r\n  createFromIconfontCN\r\n} from '@ant-design/icons-vue';\r\nimport QrStatus from './QrStatus.vue';\r\nimport QrPresets from './QrPresets.vue';\r\nimport QrShape from './QrShape.vue';\r\nimport QrLogo from './QrLogo.vue';\r\nimport QrFont from './QrFont.vue';\r\nimport QrColor from './QrColor.vue';\r\nimport QrRender from './QrRender.vue';\r\n\r\nimport { reactive, toRef, toRefs, onMounted } from 'vue';\r\nimport useInitQrEditor from '@/hooks/useInitQrEditor';\r\n\r\nconst IconFont = createFromIconfontCN({\r\n  scriptUrl: '//at.alicdn.com/t/font_3395714_5mzms7au0vb.js'\r\n});\r\n\r\nexport default {\r\n  name: 'QrEditor',\r\n  components: {\r\n    PlusOutlined,\r\n    MinusOutlined,\r\n    SettingFilled,\r\n    QrcodeOutlined,\r\n    PushpinFilled,\r\n    QuestionCircleOutlined,\r\n    IconFont,\r\n    QrStatus,\r\n    QrPresets,\r\n    QrShape,\r\n    QrLogo,\r\n    QrFont,\r\n    QrColor,\r\n    QrRender\r\n  },\r\n  props: {\r\n    qrText: String\r\n  },\r\n  setup(props) {\r\n    let view = reactive({\r\n      activeCollapse: 'content',\r\n      activeSettingsTab: 'preset',\r\n      showHelp: true,\r\n      qrStatus: 'init'\r\n    });\r\n\r\n    onMounted(() => {\r\n      view.showHelp = false;\r\n    });\r\n\r\n    function changeQrStatus({ status }) {\r\n      view.qrStatus = status;\r\n    }\r\n\r\n    let { collectionRefs, qrConfig, addImage, removeImage, resetPreset } = useInitQrEditor(\r\n      toRef(props, 'qrText')\r\n    );\r\n\r\n    return {\r\n      ...toRefs(view),\r\n      ...collectionRefs,\r\n      qrConfig,\r\n      changeQrStatus,\r\n      addImage,\r\n      removeImage,\r\n      resetPreset\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '~@/assets/variable.less';\r\n\r\n.left,\r\n.right {\r\n  height: 620px;\r\n  border-radius: 6px;\r\n  overflow: hidden;\r\n}\r\n.right {\r\n  padding: 18px;\r\n  background: @my-bg-white-light;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.left {\r\n  .ant-collapse {\r\n    background: none;\r\n    :deep(.ant-collapse-item) {\r\n      background: @my-bg-white-light;\r\n      border: none;\r\n      border-radius: 6px;\r\n      overflow: hidden;\r\n      &.settings {\r\n        margin-top: 16px;\r\n      }\r\n      .ant-collapse-header {\r\n        // background: @my-bg-white-lighter;\r\n        line-height: 47px;\r\n        padding: 0;\r\n        &:hover {\r\n          // background: #f0f7ff;\r\n          background: @my-bg-white-light;\r\n        }\r\n        .title-icon {\r\n          display: block;\r\n          width: 48px;\r\n          height: 47px;\r\n          line-height: 50px;\r\n          border-right: 1px solid @border-color-base;\r\n          background: @my-bg-white-light;\r\n          font-size: 22px;\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n        }\r\n        .title {\r\n          margin: 0 0 0 60px;\r\n          font-size: 15px;\r\n          font-weight: bold;\r\n        }\r\n        .ant-collapse-arrow {\r\n          font-size: 18px;\r\n        }\r\n      }\r\n      &.ant-collapse-item-active {\r\n        .ant-collapse-header {\r\n          background: @my-bg-white-light;\r\n          box-shadow: 0px 0px 4px 0px rgba(100, 100, 100, 0.5);\r\n          .title {\r\n            color: @primary-color;\r\n          }\r\n          .title-icon {\r\n            color: #ffffff;\r\n            background: @primary-color;\r\n            border-right: 1px solid @primary-color;\r\n          }\r\n        }\r\n      }\r\n      .ant-collapse-content {\r\n        .ant-collapse-content-box {\r\n          padding: 10px;\r\n          height: 510px;\r\n          overflow: hidden;\r\n          .tips {\r\n            margin-bottom: 10px;\r\n            padding-left: 8px;\r\n            .tips-icon {\r\n              margin-right: 6px;\r\n            }\r\n          }\r\n          .ant-tabs {\r\n            height: 100%;\r\n            .ant-tabs-nav {\r\n              margin: 0;\r\n            }\r\n            .ant-tabs-content {\r\n              padding-top: 15px;\r\n              height: 100%;\r\n              overflow: auto;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","var _excluded = [\"class\", \"component\", \"viewBox\", \"spin\", \"rotate\", \"tabindex\", \"onClick\"];\nimport { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { svgBaseProps, warning, useInsertStyles } from '../utils';\n\nvar Icon = function Icon(props, context) {\n  var attrs = context.attrs,\n      slots = context.slots;\n\n  var _props$attrs = _objectSpread({}, props, attrs),\n      cls = _props$attrs[\"class\"],\n      Component = _props$attrs.component,\n      viewBox = _props$attrs.viewBox,\n      spin = _props$attrs.spin,\n      rotate = _props$attrs.rotate,\n      tabindex = _props$attrs.tabindex,\n      onClick = _props$attrs.onClick,\n      restProps = _objectWithoutProperties(_props$attrs, _excluded);\n\n  var children = slots[\"default\"] && slots[\"default\"]();\n  var hasChildren = children && children.length;\n  var slotsComponent = slots.component;\n  warning(Boolean(Component || hasChildren || slotsComponent), 'Should have `component` prop/slot or `children`.');\n  useInsertStyles();\n\n  var classString = _defineProperty({\n    anticon: true\n  }, cls, cls);\n\n  var svgClassString = {\n    'anticon-spin': spin === '' || !!spin\n  };\n  var svgStyle = rotate ? {\n    msTransform: \"rotate(\".concat(rotate, \"deg)\"),\n    transform: \"rotate(\".concat(rotate, \"deg)\")\n  } : undefined;\n\n  var innerSvgProps = _objectSpread({}, svgBaseProps, {\n    viewBox: viewBox,\n    \"class\": svgClassString,\n    style: svgStyle\n  });\n\n  if (!viewBox) {\n    delete innerSvgProps.viewBox;\n  }\n\n  var renderInnerNode = function renderInnerNode() {\n    if (Component) {\n      return _createVNode(Component, innerSvgProps, {\n        \"default\": function _default() {\n          return [children];\n        }\n      });\n    }\n\n    if (slotsComponent) {\n      return slotsComponent(innerSvgProps);\n    }\n\n    if (hasChildren) {\n      warning(Boolean(viewBox) || children.length === 1 && children[0] && children[0].type === 'use', 'Make sure that you provide correct `viewBox`' + ' prop (default `0 0 1024 1024`) to the icon.');\n      return _createVNode(\"svg\", _objectSpread({}, innerSvgProps, {\n        \"viewBox\": viewBox\n      }), [children]);\n    }\n\n    return null;\n  };\n\n  var iconTabIndex = tabindex;\n\n  if (iconTabIndex === undefined && onClick) {\n    iconTabIndex = -1;\n    restProps.tabindex = iconTabIndex;\n  }\n\n  return _createVNode(\"span\", _objectSpread({\n    \"role\": \"img\"\n  }, restProps, {\n    \"onClick\": onClick,\n    \"class\": classString\n  }), [renderInnerNode()]);\n};\n\nIcon.props = {\n  spin: Boolean,\n  rotate: Number,\n  viewBox: String,\n  ariaLabel: String\n};\nIcon.inheritAttrs = false;\nIcon.displayName = 'Icon';\nexport default Icon;","var _excluded = [\"type\"];\nimport { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport Icon from './Icon';\nvar customCache = new Set();\n\nfunction isValidCustomScriptUrl(scriptUrl) {\n  return typeof scriptUrl === 'string' && scriptUrl.length && !customCache.has(scriptUrl);\n}\n\nfunction createScriptUrlElements(scriptUrls) {\n  var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var currentScriptUrl = scriptUrls[index];\n\n  if (isValidCustomScriptUrl(currentScriptUrl)) {\n    var script = document.createElement('script');\n    script.setAttribute('src', currentScriptUrl);\n    script.setAttribute('data-namespace', currentScriptUrl);\n\n    if (scriptUrls.length > index + 1) {\n      script.onload = function () {\n        createScriptUrlElements(scriptUrls, index + 1);\n      };\n\n      script.onerror = function () {\n        createScriptUrlElements(scriptUrls, index + 1);\n      };\n    }\n\n    customCache.add(currentScriptUrl);\n    document.body.appendChild(script);\n  }\n}\n\nexport default function create() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var scriptUrl = options.scriptUrl,\n      _options$extraCommonP = options.extraCommonProps,\n      extraCommonProps = _options$extraCommonP === void 0 ? {} : _options$extraCommonP;\n  /**\n   * DOM API required.\n   * Make sure in browser environment.\n   * The Custom Icon will create a <script/>\n   * that loads SVG symbols and insert the SVG Element into the document body.\n   */\n\n  if (typeof document !== 'undefined' && typeof window !== 'undefined' && typeof document.createElement === 'function') {\n    if (Array.isArray(scriptUrl)) {\n      // 因为iconfont资源会把svg插入before，所以前加载相同type会覆盖后加载，为了数组覆盖顺序，倒叙插入\n      createScriptUrlElements(scriptUrl.reverse());\n    } else {\n      createScriptUrlElements([scriptUrl]);\n    }\n  }\n\n  var Iconfont = function Iconfont(props, context) {\n    var attrs = context.attrs,\n        slots = context.slots;\n\n    var _props$attrs = _objectSpread({}, props, attrs),\n        type = _props$attrs.type,\n        restProps = _objectWithoutProperties(_props$attrs, _excluded);\n\n    var children = slots[\"default\"] && slots[\"default\"](); // children > type\n\n    var content = null;\n\n    if (type) {\n      content = _createVNode(\"use\", {\n        \"xlink:href\": \"#\".concat(type)\n      }, null);\n    }\n\n    if (children && children.length) {\n      content = children;\n    }\n\n    var iconProps = _objectSpread({}, extraCommonProps, restProps);\n\n    return _createVNode(Icon, iconProps, {\n      \"default\": function _default() {\n        return [content];\n      }\n    });\n  };\n\n  Iconfont.props = {\n    spin: Boolean,\n    rotate: Number,\n    type: String\n  };\n  Iconfont.inheritAttrs = false;\n  Iconfont.displayName = 'Iconfont';\n  return Iconfont;\n}","// This icon file is generated automatically.\nvar MinusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"minus\", \"theme\": \"outlined\" };\nexport default MinusOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport MinusOutlinedSvg from \"@ant-design/icons-svg/es/asn/MinusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar MinusOutlined = function MinusOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": MinusOutlinedSvg\n  }), null);\n};\n\nMinusOutlined.displayName = 'MinusOutlined';\nMinusOutlined.inheritAttrs = false;\nexport default MinusOutlined;","// This icon file is generated automatically.\nvar SettingFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 00-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 009.3-35.2l-.9-2.6a442.5 442.5 0 00-79.6-137.7l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.3a353.44 353.44 0 00-98.9 57.3l-81.8-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a445.93 445.93 0 00-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0025.8 25.7l2.7.5a448.27 448.27 0 00158.8 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z\" } }] }, \"name\": \"setting\", \"theme\": \"filled\" };\nexport default SettingFilled;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport SettingFilledSvg from \"@ant-design/icons-svg/es/asn/SettingFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar SettingFilled = function SettingFilled(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": SettingFilledSvg\n  }), null);\n};\n\nSettingFilled.displayName = 'SettingFilled';\nSettingFilled.inheritAttrs = false;\nexport default SettingFilled;","// This icon file is generated automatically.\nvar QrcodeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M468 128H160c-17.7 0-32 14.3-32 32v308c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V136c0-4.4-3.6-8-8-8zm-56 284H192V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210H136c-4.4 0-8 3.6-8 8v308c0 17.7 14.3 32 32 32h308c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zm-56 284H192V612h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm590-630H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V160c0-17.7-14.3-32-32-32zm-32 284H612V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210h-48c-4.4 0-8 3.6-8 8v134h-78V556c0-4.4-3.6-8-8-8H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h78v102c0 4.4 3.6 8 8 8h190c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zM746 832h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm142 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"qrcode\", \"theme\": \"outlined\" };\nexport default QrcodeOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport QrcodeOutlinedSvg from \"@ant-design/icons-svg/es/asn/QrcodeOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar QrcodeOutlined = function QrcodeOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": QrcodeOutlinedSvg\n  }), null);\n};\n\nQrcodeOutlined.displayName = 'QrcodeOutlined';\nQrcodeOutlined.inheritAttrs = false;\nexport default QrcodeOutlined;","// This icon file is generated automatically.\nvar PushpinFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z\" } }] }, \"name\": \"pushpin\", \"theme\": \"filled\" };\nexport default PushpinFilled;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport PushpinFilledSvg from \"@ant-design/icons-svg/es/asn/PushpinFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PushpinFilled = function PushpinFilled(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": PushpinFilledSvg\n  }), null);\n};\n\nPushpinFilled.displayName = 'PushpinFilled';\nPushpinFilled.inheritAttrs = false;\nexport default PushpinFilled;","// This icon file is generated automatically.\nvar QuestionCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z\" } }] }, \"name\": \"question-circle\", \"theme\": \"outlined\" };\nexport default QuestionCircleOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport QuestionCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/QuestionCircleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar QuestionCircleOutlined = function QuestionCircleOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": QuestionCircleOutlinedSvg\n  }), null);\n};\n\nQuestionCircleOutlined.displayName = 'QuestionCircleOutlined';\nQuestionCircleOutlined.inheritAttrs = false;\nexport default QuestionCircleOutlined;","<template>\r\n  <a-result status=\"success\" v-show=\"qrStatus === 'success'\" title=\"成功生成了二维码\">\r\n    <template #subTitle>\r\n      <a-popover title=\"当前二维码内容\" placement=\"right\">\r\n        <span class=\"help\">数据量：【 {{ textLength }}字节 】</span>\r\n        <template #content>\r\n          <p>{{ qrText }}</p>\r\n        </template>\r\n      </a-popover>\r\n    </template>\r\n  </a-result>\r\n  <a-result status=\"warning\" v-show=\"qrStatus === 'failed'\" title=\"二维码生成失败...\">\r\n    <template #subTitle>\r\n      <span class=\"error-text\">\r\n        当前文字长度【 {{ textLength }}字节 】，超出二维码最大容量【 {{ max.L }}字节 】\r\n      </span>\r\n    </template>\r\n  </a-result>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'QrStatus',\r\n  props: {\r\n    qrStatus: String,\r\n    qrText: String,\r\n    textLength: Number,\r\n    max: Object\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import { render } from \"./QrStatus.vue?vue&type=template&id=52bb476c\"\nimport script from \"./QrStatus.vue?vue&type=script&lang=js\"\nexport * from \"./QrStatus.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\tuzim.net\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <template v-for=\"(category, index) in presets\" :key=\"category.id\">\r\n      <a-card\r\n        hoverable\r\n        v-for=\"(item, index) in category.items\"\r\n        :key=\"item.id\"\r\n        class=\"preset-card\"\r\n        :class=\"{ active: item.id === (selectedPreset || {}).id }\"\r\n        @click=\"changePreset(item)\"\r\n      >\r\n        <template #cover>\r\n          <img\r\n            class=\"preview-img\"\r\n            :class=\"{ blur: textLength > 200 && (Object.keys(item.element).length || item.element === 6) }\"\r\n            :src=\"item.view\"\r\n          />\r\n        </template>\r\n        <a-card-meta>\r\n          <template #description>\r\n            <a-tag :color=\"category.color\" :title=\"`分类：${category.title}`\">{{ category.title }}</a-tag>\r\n            <span :title=\"`模板名称：${item.title}`\">{{ item.title }}</span>\r\n          </template>\r\n        </a-card-meta>\r\n      </a-card>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Modal } from 'ant-design-vue';\r\n\r\nexport default {\r\n  name: 'QrPresets',\r\n  props: {\r\n    presets: Array,\r\n    selectedPreset: Object,\r\n    textLength: Number\r\n  },\r\n  emits: ['update:selectedPreset'],\r\n  setup(props, context) {\r\n    return {\r\n      changePreset: (preset) => {\r\n        if (props.textLength > 200 && (Object.keys(preset.element).length || preset.element === 6)) {\r\n          Modal.error({\r\n            title: '操作失败!',\r\n            content: `该模板限制二维码字数为 200 字节。您输入的字数已超出，请删减后使用!`\r\n          });\r\n          return;\r\n        }\r\n        context.emit('update:selectedPreset', { ...preset });\r\n      }\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '~@/assets/variable.less';\r\n\r\n.presets-image {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: flex-start;\r\n}\r\n.preset-card {\r\n  display: inline-block;\r\n  margin: 7px;\r\n  border-radius: 8px;\r\n  border-color: transparent;\r\n  transition: all 0.3s;\r\n  &.active {\r\n    transform: translateY(-3px);\r\n    box-shadow: 0 0 8px 2px @primary-color;\r\n  }\r\n  :deep(.ant-card-cover) {\r\n    width: 150px;\r\n    height: 150px;\r\n    line-height: 136px;\r\n    font-size: 0;\r\n    padding: 8px;\r\n    text-align: center;\r\n    .preview-img {\r\n      display: inline-block;\r\n      width: auto;\r\n      height: auto;\r\n      max-width: 100%;\r\n      max-height: 100%;\r\n      border-radius: 5px;\r\n      box-shadow: 0 0 2px 2px #f0f0f0;\r\n      &.blur {\r\n        filter: blur(2px);\r\n      }\r\n    }\r\n  }\r\n  :deep(.ant-card-body) {\r\n    max-width: 148px;\r\n    padding: 10px 5px;\r\n    border-top: 1px dashed #cccccc;\r\n    .ant-card-meta-description {\r\n      white-space: nowrap;\r\n    }\r\n  }\r\n}\r\n:deep(.ant-image-img) {\r\n  border-radius: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./QrPresets.vue?vue&type=template&id=64ccdc4e&scoped=true\"\nimport script from \"./QrPresets.vue?vue&type=script&lang=js\"\nexport * from \"./QrPresets.vue?vue&type=script&lang=js\"\n\nimport \"./QrPresets.vue?vue&type=style&index=0&id=64ccdc4e&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\tuzim.net\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-64ccdc4e\"]])\n\nexport default __exports__","<template>\r\n  <a-form-item label=\"容错率\" :labelCol=\"{ span: 3 }\">\r\n    <a-radio-group name=\"correctLevel\" :value=\"correctLevel\" @change=\"changeCorrectLevel\">\r\n      <a-radio value=\"L\" :disabled=\"textLength > max.L\"> 7% (L)</a-radio>\r\n      <a-radio value=\"M\" :disabled=\"textLength > max.M\">15% (M)</a-radio>\r\n      <a-radio value=\"Q\" :disabled=\"textLength > max.Q\">25% (Q)</a-radio>\r\n      <a-radio value=\"H\" :disabled=\"textLength > max.H\">30% (H)</a-radio>\r\n    </a-radio-group>\r\n  </a-form-item>\r\n  <a-form-item label=\"元素形状\" :labelCol=\"{ span: 3 }\" :wrapperCol=\"{ span: 18 }\">\r\n    <template v-for=\"(item, index) in elements\">\r\n      <a-image\r\n        v-if=\"item.view\"\r\n        :key=\"item.id\"\r\n        :width=\"52\"\r\n        :height=\"52\"\r\n        :class=\"{ active: item === selectedElement }\"\r\n        :src=\"item.view\"\r\n        :preview=\"false\"\r\n        placeholder\r\n        @click=\"changeElement(item)\"\r\n      />\r\n    </template>\r\n  </a-form-item>\r\n  <a-form-item label=\"码眼形状\" :labelCol=\"{ span: 3 }\" :wrapperCol=\"{ span: 18 }\">\r\n    <a-image\r\n      v-for=\"(item, index) in eyes\"\r\n      :key=\"item.id\"\r\n      :width=\"52\"\r\n      :height=\"52\"\r\n      :class=\"{ active: item === selectedEye }\"\r\n      :src=\"item.view\"\r\n      :preview=\"false\"\r\n      placeholder\r\n      @click=\"changeEye(item)\"\r\n    />\r\n  </a-form-item>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'QrShape',\r\n  props: {\r\n    textLength: Number,\r\n    max: Object,\r\n    correctLevel: String,\r\n    elements: Array,\r\n    selectedElement: Object,\r\n    eyes: Array,\r\n    selectedEye: Object\r\n  },\r\n  emits: ['update:correctLevel', 'update:selectedElement', 'update:selectedEye'],\r\n  setup(props, context) {\r\n    return {\r\n      changeCorrectLevel: (event) => context.emit('update:correctLevel', event.target.value),\r\n      changeElement: (element) => context.emit('update:selectedElement', element),\r\n      changeEye: (eye) => context.emit('update:selectedEye', eye)\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n","import { render } from \"./QrShape.vue?vue&type=template&id=5774710c\"\nimport script from \"./QrShape.vue?vue&type=script&lang=js\"\nexport * from \"./QrShape.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\tuzim.net\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <a-form-item label=\"在线Logo\" :labelCol=\"{ span: 3 }\" :wrapperCol=\"{ span: 18 }\">\r\n    <div\r\n      v-for=\"(item, index) in logos\"\r\n      :key=\"item.id\"\r\n      class=\"ant-image\"\r\n      :class=\"{ active: item === selectedLogo }\"\r\n    >\r\n      <i @click=\"changeLogo(null)\"><CloseCircleOutlined /></i>\r\n      <img class=\"ant-image-img\" :src=\"item.view\" @click=\"changeLogo(item)\" />\r\n    </div>\r\n  </a-form-item>\r\n  <a-form-item label=\"上传Logo\" :labelCol=\"{ span: 3 }\" :wrapperCol=\"{ span: 18 }\">\r\n    <div\r\n      v-for=\"(item, index) in userLogos\"\r\n      :key=\"item.id\"\r\n      class=\"ant-image\"\r\n      :class=\"{ active: item === selectedLogo }\"\r\n    >\r\n      <i @click=\"changeLogo(null)\"><CloseCircleOutlined /></i>\r\n      <i @click=\"logoDelete(item)\"><MinusCircleOutlined /></i>\r\n      <img class=\"ant-image-img\" :src=\"item.view\" @click=\"changeLogo(item)\" />\r\n    </div>\r\n    <a-upload list-type=\"picture-card\" class=\"uploader\" :show-upload-list=\"false\" :before-upload=\"logoUpload\">\r\n      <div><PlusOutlined /></div>\r\n    </a-upload>\r\n  </a-form-item>\r\n  <a-form-item label=\"Logo形状\" :labelCol=\"{ span: 3 }\">\r\n    <a-radio-group name=\"logoStyle\" :value=\"logoStyle\" @change=\"changeLogoStyle\">\r\n      <a-radio value=\"origin\">原图</a-radio>\r\n      <a-radio value=\"rect\">圆角矩形</a-radio>\r\n      <a-radio value=\"round\">圆形</a-radio>\r\n    </a-radio-group>\r\n  </a-form-item>\r\n  <a-form-item label=\"Logo阴影\" :labelCol=\"{ span: 3 }\">\r\n    <a-switch\r\n      :checked=\"logoShadow\"\r\n      checked-children=\"开\"\r\n      un-checked-children=\"关\"\r\n      @change=\"changeLogoShadow\"\r\n    />\r\n  </a-form-item>\r\n</template>\r\n\r\n<script>\r\nimport { CloseCircleOutlined, PlusOutlined, MinusCircleOutlined } from '@ant-design/icons-vue';\r\n\r\nexport default {\r\n  name: 'QrLogo',\r\n  components: {\r\n    CloseCircleOutlined,\r\n    PlusOutlined,\r\n    MinusCircleOutlined\r\n  },\r\n  props: {\r\n    logos: Array,\r\n    userLogos: Array,\r\n    selectedLogo: Object,\r\n    logoStyle: String,\r\n    logoShadow: Boolean\r\n  },\r\n  emits: ['update:selectedLogo', 'update:logoStyle', 'update:logoShadow', 'logoUpload', 'logoDelete'],\r\n  setup(props, context) {\r\n    return {\r\n      changeLogo: (logo) => context.emit('update:selectedLogo', logo),\r\n      changeLogoStyle: (event) => context.emit('update:logoStyle', event.target.value),\r\n      changeLogoShadow: (shadow) => context.emit('update:logoShadow', shadow),\r\n      logoUpload: (file) => {\r\n        context.emit('logoUpload', file);\r\n        return false;\r\n      },\r\n      logoDelete: (file) => context.emit('logoDelete', file)\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '~@/assets/variable.less';\r\n\r\n.ant-image {\r\n  margin-bottom: 8px;\r\n  width: 52px;\r\n  height: 52px;\r\n  i {\r\n    display: none;\r\n    position: absolute;\r\n    top: -5px;\r\n    right: -5px;\r\n    color: #fff;\r\n    background: #faad14;\r\n    border-radius: 50%;\r\n    line-height: 1;\r\n    font-size: 17px;\r\n    cursor: pointer;\r\n  }\r\n  i + i {\r\n    display: block;\r\n    top: auto;\r\n    bottom: -5px;\r\n    background: #ff4d4f;\r\n  }\r\n  &.active i {\r\n    display: block;\r\n  }\r\n}\r\n.uploader {\r\n  width: 52px;\r\n  height: 52px;\r\n  margin-bottom: 8px;\r\n  :deep(.ant-upload) {\r\n    width: 100%;\r\n    height: 100%;\r\n    margin: 0;\r\n    vertical-align: middle;\r\n    background: none;\r\n    border-color: #aaaaaa;\r\n    border-radius: 5px;\r\n    transition: all 0.3s;\r\n    &:hover {\r\n      border-color: @primary-color;\r\n      color: @primary-color;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","// This icon file is generated automatically.\nvar MinusCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\" } }] }, \"name\": \"minus-circle\", \"theme\": \"outlined\" };\nexport default MinusCircleOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport MinusCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/MinusCircleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar MinusCircleOutlined = function MinusCircleOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": MinusCircleOutlinedSvg\n  }), null);\n};\n\nMinusCircleOutlined.displayName = 'MinusCircleOutlined';\nMinusCircleOutlined.inheritAttrs = false;\nexport default MinusCircleOutlined;","import { render } from \"./QrLogo.vue?vue&type=template&id=69511ecc&scoped=true\"\nimport script from \"./QrLogo.vue?vue&type=script&lang=js\"\nexport * from \"./QrLogo.vue?vue&type=script&lang=js\"\n\nimport \"./QrLogo.vue?vue&type=style&index=0&id=69511ecc&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\tuzim.net\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-69511ecc\"]])\n\nexport default __exports__","<template>\r\n  <a-form-item label=\"添加文本\" :labelCol=\"{ span: 3 }\" :wrapperCol=\"{ span: 14 }\">\r\n    <a-textarea\r\n      :value=\"fontText\"\r\n      @change=\"changeFontText\"\r\n      placeholder=\"输入二维码说明文字，使用 Enter 换行\"\r\n      :autoSize=\"{ minRows: 2, maxRows: 4 }\"\r\n      :maxlength=\"200\"\r\n      showCount\r\n      allowClear\r\n    />\r\n  </a-form-item>\r\n  <a-form-item label=\"字体\" :labelCol=\"{ span: 3 }\" :wrapperCol=\"{ span: 8 }\">\r\n    <a-select :value=\"fontFamily\" @change=\"changeFontFamily\">\r\n      <a-select-option v-for=\"(item, index) in fonts\" :key=\"item.name\" :value=\"item.name\">\r\n        {{ item.alias }}\r\n        （\r\n        <span :style=\"{ 'font-family': item.name, 'font-size': '16px' }\">\r\n          {{ item.preview }}\r\n        </span>\r\n        ）\r\n      </a-select-option>\r\n    </a-select>\r\n  </a-form-item>\r\n  <a-form-item label=\"字号\" :labelCol=\"{ span: 3 }\" :wrapperCol=\"{ span: 8 }\">\r\n    <a-slider\r\n      :min=\"20\"\r\n      :max=\"60\"\r\n      :marks=\"{ 20: '20px', 35: '35px', 60: '60px' }\"\r\n      :value=\"fontSize\"\r\n      @change=\"changeFontSize\"\r\n    />\r\n  </a-form-item>\r\n  <a-form-item label=\"样式\" :labelCol=\"{ span: 3 }\">\r\n    <a-checkbox-group name=\"fontStyle\" :value=\"fontStyle\" @change=\"changeFontStyle\">\r\n      <a-checkbox value=\"bold\"><BoldOutlined /> （加粗）</a-checkbox>\r\n      <a-checkbox value=\"italic\"><ItalicOutlined /> （倾斜）</a-checkbox>\r\n      <a-checkbox value=\"underline\"><UnderlineOutlined /> （下划线）</a-checkbox>\r\n    </a-checkbox-group>\r\n  </a-form-item>\r\n  <!-- <a-form-item label=\"对齐\" :labelCol=\"{ span: 3 }\">\r\n    <a-radio-group name=\"textAlign\" :value=\"textAlign\" @change=\"changeTextAlign\">\r\n      <a-radio value=\"start\"><AlignLeftOutlined /> （居左）</a-radio>\r\n      <a-radio value=\"middle\"><AlignCenterOutlined /> （居中）</a-radio>\r\n      <a-radio value=\"end\"><AlignRightOutlined /> （居右）</a-radio>\r\n    </a-radio-group>\r\n  </a-form-item> -->\r\n  <a-form-item label=\"颜色\" :labelCol=\"{ span: 3 }\">\r\n    <ColorPicker size=\"small\" :defaultColor=\"fontColor\" @colorChange=\"changeFontColor\"></ColorPicker>\r\n  </a-form-item>\r\n</template>\r\n\r\n<script>\r\nimport ColorPicker from './ColorPicker.vue';\r\nimport {\r\n  BoldOutlined,\r\n  ItalicOutlined,\r\n  UnderlineOutlined,\r\n  AlignLeftOutlined,\r\n  AlignRightOutlined,\r\n  AlignCenterOutlined\r\n} from '@ant-design/icons-vue';\r\n\r\nexport default {\r\n  name: 'QrFont',\r\n  components: {\r\n    ColorPicker,\r\n    BoldOutlined,\r\n    ItalicOutlined,\r\n    UnderlineOutlined,\r\n    AlignLeftOutlined,\r\n    AlignRightOutlined,\r\n    AlignCenterOutlined\r\n  },\r\n  props: {\r\n    fonts: Array,\r\n    fontText: String,\r\n    fontFamily: String,\r\n    fontColor: String,\r\n    fontSize: Number,\r\n    fontStyle: Array,\r\n    textAlign: String\r\n  },\r\n  emits: [\r\n    'update:fontFamily',\r\n    'update:fontText',\r\n    'update:fontColor',\r\n    'update:fontSize',\r\n    'update:fontStyle',\r\n    'update:textAlign'\r\n  ],\r\n  setup(props, context) {\r\n    return {\r\n      changeFontText: (event) => context.emit('update:fontText', event.target.value),\r\n      changeFontFamily: (font) => context.emit('update:fontFamily', font),\r\n      changeFontColor: (color) => context.emit('update:fontColor', color),\r\n      changeFontSize: (size) => context.emit('update:fontSize', size),\r\n      changeFontStyle: (style) => context.emit('update:fontStyle', style),\r\n      changeTextAlign: (event) => context.emit('update:textAlign', event.target.value)\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n","<template>\r\n  <div class=\"color-picker\" :class=\"[showActive && currentColor === defaultColor ? 'active' : '', size]\">\r\n    <div ref=\"el\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, ref, watch, toRefs } from 'vue';\r\nimport Pickr from '@simonwep/pickr';\r\n\r\nexport default {\r\n  name: 'ColorPicker',\r\n  props: {\r\n    size: {\r\n      type: String,\r\n      default: 'large'\r\n    },\r\n    defaultColor: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    showActive: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  emits: ['colorChange'],\r\n  setup(props, context) {\r\n    let el = ref(null),\r\n      pickr = null,\r\n      currentColor = ref('#000000'),\r\n      { defaultColor } = toRefs(props);\r\n\r\n    onMounted(() => {\r\n      pickr = new Pickr({\r\n        el: el.value,\r\n        theme: 'nano',\r\n        container: el.value.parentNode,\r\n        position: 'right-start',\r\n        defaultRepresentation: 'HEX',\r\n        default: defaultColor.value || '#3366ee',\r\n        adjustableNumbers: false,\r\n        components: {\r\n          palette: true,\r\n          preview: true,\r\n          // opacity: true,\r\n          hue: true,\r\n          interaction: {\r\n            input: true,\r\n            // hex: true,\r\n            // rgba: true,\r\n            // clear: true,\r\n            save: true,\r\n            cancel: true\r\n          }\r\n        },\r\n        i18n: {\r\n          'btn:last-color': 'use previous color',\r\n          'btn:save': '保存',\r\n          'btn:cancel': '取消'\r\n          // 'btn:clear': '清空当前选中的颜色'\r\n        }\r\n      });\r\n\r\n      let setColor = (color) => {\r\n        pickr.hide();\r\n        context.emit('colorChange', color ? (currentColor.value = color.toHEXA().toString()) : '');\r\n      };\r\n      pickr\r\n        .on('init', () =>\r\n          defaultColor.value ? (currentColor.value = defaultColor.value) : pickr.setColor(null, true)\r\n        )\r\n        .on('cancel', () => pickr.hide())\r\n        .on('save', setColor);\r\n\r\n      watch(defaultColor, (value, old) => {\r\n        if (pickr) {\r\n          pickr.off('save', setColor);\r\n\r\n          if (value) currentColor.value = value;\r\n          pickr.setColor(value || null);\r\n\r\n          pickr.on('save', setColor);\r\n        }\r\n      });\r\n    });\r\n\r\n    return {\r\n      el,\r\n      currentColor\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import '~@simonwep/pickr/dist/themes/nano.min.css';\r\n@import '~@/assets/variable.less';\r\n\r\n.color-picker {\r\n  display: inline-block;\r\n  line-height: 100%;\r\n  font-size: 16px;\r\n  padding: 1px;\r\n  border-radius: 5px;\r\n  transition: all 0.3s;\r\n}\r\n.color-picker.active {\r\n  box-shadow: 0 0 4px 2px @primary-color;\r\n}\r\n.pickr {\r\n  display: inline-block;\r\n  line-height: 0;\r\n  vertical-align: middle;\r\n}\r\n.pickr .pcr-button {\r\n  width: 35px;\r\n  height: 35px;\r\n  border-radius: 5px;\r\n  vertical-align: middle;\r\n  overflow: hidden;\r\n}\r\n.small .pickr .pcr-button {\r\n  width: 22px;\r\n  height: 22px;\r\n  border-radius: 3px;\r\n}\r\n</style>\r\n","import { render } from \"./ColorPicker.vue?vue&type=template&id=3e5eb627\"\nimport script from \"./ColorPicker.vue?vue&type=script&lang=js\"\nexport * from \"./ColorPicker.vue?vue&type=script&lang=js\"\n\nimport \"./ColorPicker.vue?vue&type=style&index=0&id=3e5eb627&lang=less\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\tuzim.net\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// This icon file is generated automatically.\nvar BoldOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M697.8 481.4c33.6-35 54.2-82.3 54.2-134.3v-10.2C752 229.3 663.9 142 555.3 142H259.4c-15.1 0-27.4 12.3-27.4 27.4v679.1c0 16.3 13.2 29.5 29.5 29.5h318.7c117 0 211.8-94.2 211.8-210.5v-11c0-73-37.4-137.3-94.2-175.1zM328 238h224.7c57.1 0 103.3 44.4 103.3 99.3v9.5c0 54.8-46.3 99.3-103.3 99.3H328V238zm366.6 429.4c0 62.9-51.7 113.9-115.5 113.9H328V542.7h251.1c63.8 0 115.5 51 115.5 113.9v10.8z\" } }] }, \"name\": \"bold\", \"theme\": \"outlined\" };\nexport default BoldOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport BoldOutlinedSvg from \"@ant-design/icons-svg/es/asn/BoldOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar BoldOutlined = function BoldOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": BoldOutlinedSvg\n  }), null);\n};\n\nBoldOutlined.displayName = 'BoldOutlined';\nBoldOutlined.inheritAttrs = false;\nexport default BoldOutlined;","// This icon file is generated automatically.\nvar ItalicOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M798 160H366c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h181.2l-156 544H229c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8H474.4l156-544H798c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"italic\", \"theme\": \"outlined\" };\nexport default ItalicOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport ItalicOutlinedSvg from \"@ant-design/icons-svg/es/asn/ItalicOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar ItalicOutlined = function ItalicOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": ItalicOutlinedSvg\n  }), null);\n};\n\nItalicOutlined.displayName = 'ItalicOutlined';\nItalicOutlined.inheritAttrs = false;\nexport default ItalicOutlined;","// This icon file is generated automatically.\nvar UnderlineOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M824 804H200c-4.4 0-8 3.4-8 7.6v60.8c0 4.2 3.6 7.6 8 7.6h624c4.4 0 8-3.4 8-7.6v-60.8c0-4.2-3.6-7.6-8-7.6zm-312-76c69.4 0 134.6-27.1 183.8-76.2C745 602.7 772 537.4 772 468V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 97-79 176-176 176s-176-79-176-176V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 69.4 27.1 134.6 76.2 183.8C377.3 701 442.6 728 512 728z\" } }] }, \"name\": \"underline\", \"theme\": \"outlined\" };\nexport default UnderlineOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport UnderlineOutlinedSvg from \"@ant-design/icons-svg/es/asn/UnderlineOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UnderlineOutlined = function UnderlineOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": UnderlineOutlinedSvg\n  }), null);\n};\n\nUnderlineOutlined.displayName = 'UnderlineOutlined';\nUnderlineOutlined.inheritAttrs = false;\nexport default UnderlineOutlined;","// This icon file is generated automatically.\nvar AlignLeftOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 424h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm784 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"align-left\", \"theme\": \"outlined\" };\nexport default AlignLeftOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport AlignLeftOutlinedSvg from \"@ant-design/icons-svg/es/asn/AlignLeftOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar AlignLeftOutlined = function AlignLeftOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": AlignLeftOutlinedSvg\n  }), null);\n};\n\nAlignLeftOutlined.displayName = 'AlignLeftOutlined';\nAlignLeftOutlined.inheritAttrs = false;\nexport default AlignLeftOutlined;","// This icon file is generated automatically.\nvar AlignRightOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 424H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 212H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"align-right\", \"theme\": \"outlined\" };\nexport default AlignRightOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport AlignRightOutlinedSvg from \"@ant-design/icons-svg/es/asn/AlignRightOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar AlignRightOutlined = function AlignRightOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": AlignRightOutlinedSvg\n  }), null);\n};\n\nAlignRightOutlined.displayName = 'AlignRightOutlined';\nAlignRightOutlined.inheritAttrs = false;\nexport default AlignRightOutlined;","// This icon file is generated automatically.\nvar AlignCenterOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm496 424c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zm144 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"align-center\", \"theme\": \"outlined\" };\nexport default AlignCenterOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport AlignCenterOutlinedSvg from \"@ant-design/icons-svg/es/asn/AlignCenterOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar AlignCenterOutlined = function AlignCenterOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": AlignCenterOutlinedSvg\n  }), null);\n};\n\nAlignCenterOutlined.displayName = 'AlignCenterOutlined';\nAlignCenterOutlined.inheritAttrs = false;\nexport default AlignCenterOutlined;","import { render } from \"./QrFont.vue?vue&type=template&id=688fee5e\"\nimport script from \"./QrFont.vue?vue&type=script&lang=js\"\nexport * from \"./QrFont.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\tuzim.net\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <a-form-item label=\"使用纯色\" :labelCol=\"{ span: 3 }\">\r\n    <span\r\n      v-for=\"(item, index) in colors\"\r\n      :key=\"index\"\r\n      :class=\"['color-block', item === fill ? 'active' : '']\"\r\n      @click=\"changeFill(item)\"\r\n    >\r\n      <div :style=\"{ background: item }\"></div>\r\n    </span>\r\n  </a-form-item>\r\n  <a-form-item label=\"自定义颜色\" :labelCol=\"{ span: 3 }\">\r\n    <ColorPicker showActive :defaultColor=\"singleColor\" @colorChange=\"changeFill($event)\"></ColorPicker>\r\n  </a-form-item>\r\n  <a-form-item label=\"使用渐变色\" :labelCol=\"{ span: 3 }\">\r\n    <span\r\n      v-for=\"(item, index) in gdColors\"\r\n      :key=\"index\"\r\n      :class=\"['color-block', item === fill ? 'active' : '']\"\r\n      @click=\"changeFill(item)\"\r\n    >\r\n      <div :style=\"{ background: `linear-gradient(135deg, ${item[0]}, ${item[1]})` }\"></div>\r\n    </span>\r\n  </a-form-item>\r\n  <br />\r\n  <a-form-item label=\"码眼外框\" :labelCol=\"{ span: 3 }\">\r\n    <ColorPicker\r\n      showActive\r\n      :defaultColor=\"eyeOuter\"\r\n      @colorChange=\"changeEyeColor('outer', $event)\"\r\n    ></ColorPicker>\r\n  </a-form-item>\r\n  <a-form-item label=\"码眼内部\" :labelCol=\"{ span: 3 }\">\r\n    <ColorPicker\r\n      showActive\r\n      :defaultColor=\"eyeInner\"\r\n      @colorChange=\"changeEyeColor('inner', $event)\"\r\n    ></ColorPicker>\r\n  </a-form-item>\r\n</template>\r\n\r\n<script>\r\nimport { computed, toRefs } from 'vue';\r\nimport ColorPicker from './ColorPicker.vue';\r\n\r\nexport default {\r\n  name: 'QrColor',\r\n  components: {\r\n    ColorPicker\r\n  },\r\n  props: {\r\n    colors: Array,\r\n    gdColors: Array,\r\n    fill: [Object, String],\r\n    eyeOuter: String,\r\n    eyeInner: String\r\n  },\r\n  emits: ['update:fill', 'update:eyeOuter', 'update:eyeInner'],\r\n  setup(props, context) {\r\n    let { fill } = toRefs(props);\r\n\r\n    let singleColor = computed(() => {\r\n      if (\r\n        Array.isArray(fill.value) &&\r\n        fill.value.length === 1 &&\r\n        props.colors.every((item) => !item.includes(fill.value[0]))\r\n      ) {\r\n        return fill.value[0];\r\n      }\r\n      return '';\r\n    });\r\n\r\n    function changeFill(fill) {\r\n      if (fill && !Array.isArray(fill)) fill = [fill];\r\n      context.emit('update:fill', fill || null);\r\n    }\r\n    function changeEyeColor(type, color) {\r\n      if (type === 'outer') context.emit('update:eyeOuter', color || '');\r\n      if (type === 'inner') context.emit('update:eyeInner', color || '');\r\n    }\r\n    return {\r\n      singleColor,\r\n      changeFill,\r\n      changeEyeColor\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '~@/assets/variable.less';\r\n\r\n.color-block {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  padding: 1px;\r\n  margin: 0 8px 0 0;\r\n  border-radius: 5px;\r\n  transition: all 0.3s;\r\n  div {\r\n    width: 35px;\r\n    height: 35px;\r\n    border-radius: 5px;\r\n  }\r\n  &.active {\r\n    box-shadow: 0 0 4px 2px @primary-color;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./QrColor.vue?vue&type=template&id=7c503a40&scoped=true\"\nimport script from \"./QrColor.vue?vue&type=script&lang=js\"\nexport * from \"./QrColor.vue?vue&type=script&lang=js\"\n\nimport \"./QrColor.vue?vue&type=style&index=0&id=7c503a40&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\tuzim.net\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7c503a40\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"box\" ref=\"qrEle\"></div>\r\n  <div class=\"save\">\r\n    <a-divider dashed>保存二维码</a-divider>\r\n    <a-form-item label=\"图片尺寸\" :labelCol=\"{ span: 5 }\" :wrapperCol=\"{ span: 18 }\" labelAlign=\"left\">\r\n      <a-slider\r\n        :min=\"300\"\r\n        :max=\"1500\"\r\n        :marks=\"{ 300: '300px', 500: '500px', 1000: '1000px', 1500: '1500px' }\"\r\n        :step=\"50\"\r\n        v-model:value=\"size\"\r\n      />\r\n    </a-form-item>\r\n    <a-form-item label=\"保存图片\" :labelCol=\"{ span: 5 }\" labelAlign=\"left\" style=\"margin-bottom: 0\">\r\n      <a-button type=\"primary\" :[buttonStatus]=\"true\" @click=\"downloadQrImage('png')\">\r\n        <template #icon><DownloadOutlined /></template>\r\n        <span>PNG</span>\r\n      </a-button>\r\n      <a-button type=\"primary\" :[buttonStatus]=\"true\" @click=\"downloadQrImage('jpeg')\">\r\n        <template #icon><DownloadOutlined /></template>\r\n        <span>JPEG</span>\r\n      </a-button>\r\n      <a-button type=\"primary\" :[buttonStatus]=\"true\" @click=\"downloadQrImage('svg')\" danger>\r\n        <template #icon><DownloadOutlined /></template>\r\n        <span>SVG 矢量图</span>\r\n      </a-button>\r\n    </a-form-item>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CreateQr from '@/utils/CreateQr';\r\nimport { computed, reactive, toRefs, watch } from 'vue';\r\nimport { DownloadOutlined } from '@ant-design/icons-vue';\r\n\r\nexport default {\r\n  name: 'QrRender',\r\n  components: {\r\n    DownloadOutlined\r\n  },\r\n  props: {\r\n    qrConfig: Object,\r\n    resetPreset: Function\r\n  },\r\n  emits: ['changeQrStatus'],\r\n  setup(props, context) {\r\n    let qr = null,\r\n      timer = null,\r\n      view = reactive({\r\n        qrEle: null,\r\n        size: 500,\r\n        save: false,\r\n        waiting: false\r\n      });\r\n\r\n    watch([...Object.values(props.qrConfig)], (value, old) => {\r\n      if (!view.waiting) {\r\n        context.emit('changeQrStatus', { status: 'waiting' });\r\n        view.waiting = true;\r\n      }\r\n\r\n      dblog('--- QrRender config change ---', value, old);\r\n      timer && clearTimeout(timer);\r\n      timer = setTimeout(\r\n        () => {\r\n          dblog('--- QrRender config to render ---', props.qrConfig);\r\n          if (props.resetPreset()) return;\r\n          qr = qr || new CreateQr(view.qrEle);\r\n          qr.render(props.qrConfig); //渲染Qr\r\n          view.waiting = false;\r\n\r\n          value[1] === 'Z'\r\n            ? context.emit('changeQrStatus', { status: 'failed' })\r\n            : context.emit('changeQrStatus', { status: !value[0] ? 'init' : 'success' });\r\n        },\r\n        value[0] !== old[0] ? 550 : 200\r\n      );\r\n    });\r\n\r\n    let buttonStatus = computed(() => {\r\n      if (!props.qrConfig.qrText.value || props.qrConfig.correctLevel.value === 'Z') return 'disabled';\r\n      if (view.save || view.waiting) return 'loading';\r\n      return '';\r\n    });\r\n\r\n    async function downloadQrImage(format) {\r\n      if (buttonStatus.value || !qr) return;\r\n      view.save = true;\r\n      await qr.getQrImage(format, view.size);\r\n      setTimeout(() => (view.save = false), 1500);\r\n    }\r\n\r\n    return {\r\n      ...toRefs(view),\r\n      buttonStatus,\r\n      downloadQrImage\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '~@/assets/variable.less';\r\n\r\n.box {\r\n  flex: 1 1 auto;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n  & > :deep(svg),\r\n  & > :deep(img) {\r\n    width: auto;\r\n    height: auto;\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n    border-radius: 5px;\r\n  }\r\n}\r\n.save {\r\n  flex: 0 0 160px;\r\n  margin-top: 10px;\r\n  :deep(.ant-btn) {\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    margin-right: 8px;\r\n    padding: 4px 8px;\r\n    .anticon + span {\r\n      margin-left: 4px;\r\n    }\r\n  }\r\n  .ant-divider{\r\n    border-color: @primary-color\r\n  }\r\n}\r\n</style>\r\n","//---------------------------------------------------------------------\n// QRCode for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//   http://www.opensource.org/licenses/mit-license.php\n//\n// The word \"QR Code\" is registered trademark of\n// DENSO WAVE INCORPORATED\n//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n\n//---------------------------------------------------------------------\n// QR8bitByte\n//---------------------------------------------------------------------\nfunction toUTF8Array(str) {\n    var utf8 = [];\n    for (var i=0; i < str.length; i++) {\n        var charcode = str.charCodeAt(i);\n        if (charcode < 0x80) {\n            utf8.push(charcode);\n        }else if (charcode < 0x800) {\n            utf8.push(0xc0 | (charcode >> 6),\n                      0x80 | (charcode & 0x3f));\n        }else if (charcode < 0xd800 || charcode >= 0xe000) {\n            utf8.push(0xe0 | (charcode >> 12),\n                      0x80 | ((charcode>>6) & 0x3f),\n                      0x80 | (charcode & 0x3f));\n        }else {// surrogate pair            // UTF-16 encodes 0x10000-0x10FFFF by\n            i++;                            // subtracting 0x10000 and splitting the\n                                            // 20 bits of 0x0-0xFFFFF into two halves\n            charcode = 0x10000 + (((charcode & 0x3ff)<<10) | (str.charCodeAt(i) & 0x3ff));\n            utf8.push(0xf0 | (charcode >>18),\n                      0x80 | ((charcode>>12) & 0x3f),\n                      0x80 | ((charcode>>6) & 0x3f),\n                      0x80 | (charcode & 0x3f));\n        }\n    }\n    return utf8;\n}\n\nfunction QR8bitByte(data) {\n    this.mode = QRMode.MODE_8BIT_BYTE;\n    this.data = toUTF8Array(data);\n}\n\nQR8bitByte.prototype = {\n\n    getLength : function(buffer) {\n        return this.data.length;\n    },\n\n    write : function(buffer) {\n        for (var i = 0; i < this.data.length; i++) {\n            // not JIS ...\n            buffer.put(this.data[i], 8);\n        }\n    }\n};\n\n//---------------------------------------------------------------------\n// QRCode\n//---------------------------------------------------------------------\n\nfunction QRCode(typeNumber, errorCorrectLevel, isPattern) {\n    this.typeNumber = typeNumber;\n    this.errorCorrectLevel = QRErrorCorrectLevel[errorCorrectLevel];\n    this.modules = null;\n    this.moduleCount = 0;\n    this.dataCache = null;\n    this.dataList = new Array();\n\n    this.isPattern = isPattern || true;\n    this.pattern = null;//状态\n}\n\nQRCode.prototype = {\n\n    addData : function(data) {\n        var newData = new QR8bitByte(data);\n        this.dataList.push(newData);\n        this.dataCache = null;\n    },\n\n    isDark : function(row, col) {\n        if (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\n            throw new Error(row + \",\" + col);\n        }\n        return this.modules[row][col];\n    },\n\n    getModuleCount : function() {\n        return this.moduleCount;\n    },\n\n    make : function() {\n        // Calculate automatically typeNumber if provided is < 1\n        if (this.typeNumber < 1 ){\n            var typeNumber = 1;\n            for (typeNumber = 1; typeNumber < 40; typeNumber++) {\n                var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\n\n                var buffer = new QRBitBuffer();\n                var totalDataCount = 0;\n                for (var i = 0; i < rsBlocks.length; i++) {\n                    totalDataCount += rsBlocks[i].dataCount;\n                }\n\n                for (var i = 0; i < this.dataList.length; i++) {\n                    var data = this.dataList[i];\n                    buffer.put(data.mode, 4);\n                    buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber) );\n                    data.write(buffer);\n                }\n                if (buffer.getLengthInBits() <= totalDataCount * 8)\n                    break;\n            }\n            this.typeNumber = typeNumber;\n        }\n        this.makeImpl(false, this.getBestMaskPattern() );\n    },\n\n    makeImpl : function(test, maskPattern) {\n\n        this.moduleCount = this.typeNumber * 4 + 17;\n        this.modules = new Array(this.moduleCount);\n        this.pattern = new Array(this.moduleCount);\n\n        for (var row = 0; row < this.moduleCount; row++) {\n\n            this.modules[row] = new Array(this.moduleCount);\n            this.pattern[row] = new Array(this.moduleCount);\n            for (var col = 0; col < this.moduleCount; col++) {\n                this.modules[row][col] = null;//(col + row) % 3;\n                this.pattern[row][col] = 0;\n            }\n        }\n\n        this.setupPositionProbePattern(0, 0);\n        this.setupPositionProbePattern(this.moduleCount - 7, 0);\n        this.setupPositionProbePattern(0, this.moduleCount - 7);\n        this.setupPositionAdjustPattern();\n        this.setupTimingPattern();\n        this.setupTypeInfo(test, maskPattern);\n\n        if (this.typeNumber >= 7) {\n            this.setupTypeNumber(test);\n        }\n\n        if (this.dataCache == null) {\n            this.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\n        }\n\n        this.mapData(this.dataCache, maskPattern);\n    },\n\n    setupPositionProbePattern : function(row, col)  {\n\n        for (var r = -1; r <= 7; r++) {\n\n            if (row + r <= -1 || this.moduleCount <= row + r) continue;\n\n            for (var c = -1; c <= 7; c++) {\n\n                if (col + c <= -1 || this.moduleCount <= col + c) continue;\n\n                if ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n                        || (0 <= c && c <= 6 && (r == 0 || r == 6) )\n                        || (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n                    this.modules[row + r][col + c] = true;\n                    this.pattern[row + r][col + c] = 3;\n                } else {\n                    this.modules[row + r][col + c] = false;\n                    this.pattern[row + r][col + c] = 3;\n                }\n            }\n        }\n    },\n\n    getBestMaskPattern : function() {\n\n        var minLostPoint = 0;\n        var pattern = 0;\n\n        for (var i = 0; i < 8; i++) {\n\n            this.makeImpl(true, i);\n\n            var lostPoint = QRUtil.getLostPoint(this);\n\n            if (i == 0 || minLostPoint >  lostPoint) {\n                minLostPoint = lostPoint;\n                pattern = i;\n            }\n        }\n\n        return pattern;\n    },\n\n    createMovieClip : function(target_mc, instance_name, depth) {\n\n        var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n        var cs = 1;\n\n        this.make();\n\n        for (var row = 0; row < this.modules.length; row++) {\n\n            var y = row * cs;\n\n            for (var col = 0; col < this.modules[row].length; col++) {\n\n                var x = col * cs;\n                var dark = this.modules[row][col];\n\n                if (dark) {\n                    qr_mc.beginFill(0, 100);\n                    qr_mc.moveTo(x, y);\n                    qr_mc.lineTo(x + cs, y);\n                    qr_mc.lineTo(x + cs, y + cs);\n                    qr_mc.lineTo(x, y + cs);\n                    qr_mc.endFill();\n                }\n            }\n        }\n\n        return qr_mc;\n    },\n\n    setupTimingPattern : function() {\n\n        for (var r = 8; r < this.moduleCount - 8; r++) {\n            if (this.modules[r][6] != null) {\n                continue;\n            }\n            this.modules[r][6] = (r % 2 == 0);\n        }\n\n        for (var c = 8; c < this.moduleCount - 8; c++) {\n            if (this.modules[6][c] != null) {\n                continue;\n            }\n            this.modules[6][c] = (c % 2 == 0);\n        }\n    },\n\n    setupPositionAdjustPattern : function() {\n\n        var pos = QRUtil.getPatternPosition(this.typeNumber);\n\n        for (var i = 0; i < pos.length; i++) {\n\n            for (var j = 0; j < pos.length; j++) {\n\n                var row = pos[i];\n                var col = pos[j];\n\n                if (this.modules[row][col] != null) {\n                    continue;\n                }\n\n                for (var r = -2; r <= 2; r++) {\n\n                    for (var c = -2; c <= 2; c++) {\n\n                        if (r == -2 || r == 2 || c == -2 || c == 2\n                                || (r == 0 && c == 0) ) {\n                            this.modules[row + r][col + c] = true;\n                        } else {\n                            this.modules[row + r][col + c] = false;\n                        }\n                        this.pattern[row + r][col + c] = this.isPattern ? 1 : 0;\n                    }\n                }\n                this.pattern[row][col] = this.isPattern ? 2 : 0;\n            }\n        }\n    },\n\n    setupTypeNumber : function(test) {\n\n        var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\n\n        for (var i = 0; i < 18; i++) {\n            var mod = (!test && ( (bits >> i) & 1) == 1);\n            this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\n        }\n\n        for (var i = 0; i < 18; i++) {\n            var mod = (!test && ( (bits >> i) & 1) == 1);\n            this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n        }\n    },\n\n    setupTypeInfo : function(test, maskPattern) {\n\n        var data = (this.errorCorrectLevel << 3) | maskPattern;\n        var bits = QRUtil.getBCHTypeInfo(data);\n\n        // vertical\n        for (var i = 0; i < 15; i++) {\n\n            var mod = (!test && ( (bits >> i) & 1) == 1);\n\n            if (i < 6) {\n                this.modules[i][8] = mod;\n            } else if (i < 8) {\n                this.modules[i + 1][8] = mod;\n            } else {\n                this.modules[this.moduleCount - 15 + i][8] = mod;\n            }\n        }\n\n        // horizontal\n        for (var i = 0; i < 15; i++) {\n\n            var mod = (!test && ( (bits >> i) & 1) == 1);\n\n            if (i < 8) {\n                this.modules[8][this.moduleCount - i - 1] = mod;\n            } else if (i < 9) {\n                this.modules[8][15 - i - 1 + 1] = mod;\n            } else {\n                this.modules[8][15 - i - 1] = mod;\n            }\n        }\n\n        // fixed module\n        this.modules[this.moduleCount - 8][8] = (!test);\n\n    },\n\n    mapData : function(data, maskPattern) {\n\n        var inc = -1;\n        var row = this.moduleCount - 1;\n        var bitIndex = 7;\n        var byteIndex = 0;\n\n        for (var col = this.moduleCount - 1; col > 0; col -= 2) {\n\n            if (col == 6) col--;\n\n            while (true) {\n\n                for (var c = 0; c < 2; c++) {\n\n                    if (this.modules[row][col - c] == null) {\n\n                        var dark = false;\n\n                        if (byteIndex < data.length) {\n                            dark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n                        }\n\n                        var mask = QRUtil.getMask(maskPattern, row, col - c);\n\n                        if (mask) {\n                            dark = !dark;\n                        }\n\n                        this.modules[row][col - c] = dark;\n                        bitIndex--;\n\n                        if (bitIndex == -1) {\n                            byteIndex++;\n                            bitIndex = 7;\n                        }\n                    }\n                }\n\n                row += inc;\n\n                if (row < 0 || this.moduleCount <= row) {\n                    row -= inc;\n                    inc = -inc;\n                    break;\n                }\n            }\n        }\n\n    }\n\n};\n\nQRCode.PAD0 = 0xEC;\nQRCode.PAD1 = 0x11;\n\nQRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {\n\n    var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n\n    var buffer = new QRBitBuffer();\n\n    for (var i = 0; i < dataList.length; i++) {\n        var data = dataList[i];\n        buffer.put(data.mode, 4);\n        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber) );\n        data.write(buffer);\n    }\n\n    // calc num max data.\n    var totalDataCount = 0;\n    for (var i = 0; i < rsBlocks.length; i++) {\n        totalDataCount += rsBlocks[i].dataCount;\n    }\n\n    if (buffer.getLengthInBits() > totalDataCount * 8) {\n        throw new Error(\"code length overflow. (\"\n            + buffer.getLengthInBits()\n            + \">\"\n            +  totalDataCount * 8\n            + \")\");\n    }\n\n    // end code\n    if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n        buffer.put(0, 4);\n    }\n\n    // padding\n    while (buffer.getLengthInBits() % 8 != 0) {\n        buffer.putBit(false);\n    }\n\n    // padding\n    while (true) {\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n            break;\n        }\n        buffer.put(QRCode.PAD0, 8);\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n            break;\n        }\n        buffer.put(QRCode.PAD1, 8);\n    }\n\n    return QRCode.createBytes(buffer, rsBlocks);\n}\n\nQRCode.createBytes = function(buffer, rsBlocks) {\n\n    var offset = 0;\n\n    var maxDcCount = 0;\n    var maxEcCount = 0;\n\n    var dcdata = new Array(rsBlocks.length);\n    var ecdata = new Array(rsBlocks.length);\n\n    for (var r = 0; r < rsBlocks.length; r++) {\n\n        var dcCount = rsBlocks[r].dataCount;\n        var ecCount = rsBlocks[r].totalCount - dcCount;\n\n        maxDcCount = Math.max(maxDcCount, dcCount);\n        maxEcCount = Math.max(maxEcCount, ecCount);\n\n        dcdata[r] = new Array(dcCount);\n\n        for (var i = 0; i < dcdata[r].length; i++) {\n            dcdata[r][i] = 0xff & buffer.buffer[i + offset];\n        }\n        offset += dcCount;\n\n        var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n        var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\n\n        var modPoly = rawPoly.mod(rsPoly);\n        ecdata[r] = new Array(rsPoly.getLength() - 1);\n        for (var i = 0; i < ecdata[r].length; i++) {\n            var modIndex = i + modPoly.getLength() - ecdata[r].length;\n            ecdata[r][i] = (modIndex >= 0)? modPoly.get(modIndex) : 0;\n        }\n\n    }\n\n    var totalCodeCount = 0;\n    for (var i = 0; i < rsBlocks.length; i++) {\n        totalCodeCount += rsBlocks[i].totalCount;\n    }\n\n    var data = new Array(totalCodeCount);\n    var index = 0;\n\n    for (var i = 0; i < maxDcCount; i++) {\n        for (var r = 0; r < rsBlocks.length; r++) {\n            if (i < dcdata[r].length) {\n                data[index++] = dcdata[r][i];\n            }\n        }\n    }\n\n    for (var i = 0; i < maxEcCount; i++) {\n        for (var r = 0; r < rsBlocks.length; r++) {\n            if (i < ecdata[r].length) {\n                data[index++] = ecdata[r][i];\n            }\n        }\n    }\n\n    return data;\n\n}\n\n//---------------------------------------------------------------------\n// QRMode\n//---------------------------------------------------------------------\n\nvar QRMode = {\n    MODE_NUMBER :       1 << 0,\n    MODE_ALPHA_NUM :    1 << 1,\n    MODE_8BIT_BYTE :    1 << 2,\n    MODE_KANJI :        1 << 3\n};\n\n//---------------------------------------------------------------------\n// QRErrorCorrectLevel\n//---------------------------------------------------------------------\n\nvar QRErrorCorrectLevel = {\n    L : 1,\n    M : 0,\n    Q : 3,\n    H : 2\n};\n\n//---------------------------------------------------------------------\n// QRMaskPattern\n//---------------------------------------------------------------------\n\nvar QRMaskPattern = {\n    PATTERN000 : 0,\n    PATTERN001 : 1,\n    PATTERN010 : 2,\n    PATTERN011 : 3,\n    PATTERN100 : 4,\n    PATTERN101 : 5,\n    PATTERN110 : 6,\n    PATTERN111 : 7\n};\n\n//---------------------------------------------------------------------\n// QRUtil\n//---------------------------------------------------------------------\n\nvar QRUtil = {\n\n    PATTERN_POSITION_TABLE : [\n        [],\n        [6, 18],\n        [6, 22],\n        [6, 26],\n        [6, 30],\n        [6, 34],\n        [6, 22, 38],\n        [6, 24, 42],\n        [6, 26, 46],\n        [6, 28, 50],\n        [6, 30, 54],\n        [6, 32, 58],\n        [6, 34, 62],\n        [6, 26, 46, 66],\n        [6, 26, 48, 70],\n        [6, 26, 50, 74],\n        [6, 30, 54, 78],\n        [6, 30, 56, 82],\n        [6, 30, 58, 86],\n        [6, 34, 62, 90],\n        [6, 28, 50, 72, 94],\n        [6, 26, 50, 74, 98],\n        [6, 30, 54, 78, 102],\n        [6, 28, 54, 80, 106],\n        [6, 32, 58, 84, 110],\n        [6, 30, 58, 86, 114],\n        [6, 34, 62, 90, 118],\n        [6, 26, 50, 74, 98, 122],\n        [6, 30, 54, 78, 102, 126],\n        [6, 26, 52, 78, 104, 130],\n        [6, 30, 56, 82, 108, 134],\n        [6, 34, 60, 86, 112, 138],\n        [6, 30, 58, 86, 114, 142],\n        [6, 34, 62, 90, 118, 146],\n        [6, 30, 54, 78, 102, 126, 150],\n        [6, 24, 50, 76, 102, 128, 154],\n        [6, 28, 54, 80, 106, 132, 158],\n        [6, 32, 58, 84, 110, 136, 162],\n        [6, 26, 54, 82, 110, 138, 166],\n        [6, 30, 58, 86, 114, 142, 170]\n    ],\n\n    G15 : (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n    G18 : (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\n    G15_MASK : (1 << 14) | (1 << 12) | (1 << 10)    | (1 << 4) | (1 << 1),\n\n    getBCHTypeInfo : function(data) {\n        var d = data << 10;\n        while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n            d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) ) );\n        }\n        return ( (data << 10) | d) ^ QRUtil.G15_MASK;\n    },\n\n    getBCHTypeNumber : function(data) {\n        var d = data << 12;\n        while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n            d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) ) );\n        }\n        return (data << 12) | d;\n    },\n\n    getBCHDigit : function(data) {\n\n        var digit = 0;\n\n        while (data != 0) {\n            digit++;\n            data >>>= 1;\n        }\n\n        return digit;\n    },\n\n    getPatternPosition : function(typeNumber) {\n        return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\n    },\n\n    getMask : function(maskPattern, i, j) {\n\n        switch (maskPattern) {\n\n        case QRMaskPattern.PATTERN000 : return (i + j) % 2 == 0;\n        case QRMaskPattern.PATTERN001 : return i % 2 == 0;\n        case QRMaskPattern.PATTERN010 : return j % 3 == 0;\n        case QRMaskPattern.PATTERN011 : return (i + j) % 3 == 0;\n        case QRMaskPattern.PATTERN100 : return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0;\n        case QRMaskPattern.PATTERN101 : return (i * j) % 2 + (i * j) % 3 == 0;\n        case QRMaskPattern.PATTERN110 : return ( (i * j) % 2 + (i * j) % 3) % 2 == 0;\n        case QRMaskPattern.PATTERN111 : return ( (i * j) % 3 + (i + j) % 2) % 2 == 0;\n\n        default :\n            throw new Error(\"bad maskPattern:\" + maskPattern);\n        }\n    },\n\n    getErrorCorrectPolynomial : function(errorCorrectLength) {\n\n        var a = new QRPolynomial([1], 0);\n\n        for (var i = 0; i < errorCorrectLength; i++) {\n            a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0) );\n        }\n\n        return a;\n    },\n\n    getLengthInBits : function(mode, type) {\n\n        if (1 <= type && type < 10) {\n\n            // 1 - 9\n\n            switch(mode) {\n            case QRMode.MODE_NUMBER     : return 10;\n            case QRMode.MODE_ALPHA_NUM  : return 9;\n            case QRMode.MODE_8BIT_BYTE  : return 8;\n            case QRMode.MODE_KANJI      : return 8;\n            default :\n                throw new Error(\"mode:\" + mode);\n            }\n\n        } else if (type < 27) {\n\n            // 10 - 26\n\n            switch(mode) {\n            case QRMode.MODE_NUMBER     : return 12;\n            case QRMode.MODE_ALPHA_NUM  : return 11;\n            case QRMode.MODE_8BIT_BYTE  : return 16;\n            case QRMode.MODE_KANJI      : return 10;\n            default :\n                throw new Error(\"mode:\" + mode);\n            }\n\n        } else if (type < 41) {\n\n            // 27 - 40\n\n            switch(mode) {\n            case QRMode.MODE_NUMBER     : return 14;\n            case QRMode.MODE_ALPHA_NUM  : return 13;\n            case QRMode.MODE_8BIT_BYTE  : return 16;\n            case QRMode.MODE_KANJI      : return 12;\n            default :\n                throw new Error(\"mode:\" + mode);\n            }\n\n        } else {\n            throw new Error(\"type:\" + type);\n        }\n    },\n\n    getLostPoint : function(qrCode) {\n\n        var moduleCount = qrCode.getModuleCount();\n\n        var lostPoint = 0;\n\n        // LEVEL1\n\n        for (var row = 0; row < moduleCount; row++) {\n\n            for (var col = 0; col < moduleCount; col++) {\n\n                var sameCount = 0;\n                var dark = qrCode.isDark(row, col);\n\n                for (var r = -1; r <= 1; r++) {\n\n                    if (row + r < 0 || moduleCount <= row + r) {\n                        continue;\n                    }\n\n                    for (var c = -1; c <= 1; c++) {\n\n                        if (col + c < 0 || moduleCount <= col + c) {\n                            continue;\n                        }\n\n                        if (r == 0 && c == 0) {\n                            continue;\n                        }\n\n                        if (dark == qrCode.isDark(row + r, col + c) ) {\n                            sameCount++;\n                        }\n                    }\n                }\n\n                if (sameCount > 5) {\n                    lostPoint += (3 + sameCount - 5);\n                }\n            }\n        }\n\n        // LEVEL2\n\n        for (var row = 0; row < moduleCount - 1; row++) {\n            for (var col = 0; col < moduleCount - 1; col++) {\n                var count = 0;\n                if (qrCode.isDark(row,     col    ) ) count++;\n                if (qrCode.isDark(row + 1, col    ) ) count++;\n                if (qrCode.isDark(row,     col + 1) ) count++;\n                if (qrCode.isDark(row + 1, col + 1) ) count++;\n                if (count == 0 || count == 4) {\n                    lostPoint += 3;\n                }\n            }\n        }\n\n        // LEVEL3\n\n        for (var row = 0; row < moduleCount; row++) {\n            for (var col = 0; col < moduleCount - 6; col++) {\n                if (qrCode.isDark(row, col)\n                        && !qrCode.isDark(row, col + 1)\n                        &&  qrCode.isDark(row, col + 2)\n                        &&  qrCode.isDark(row, col + 3)\n                        &&  qrCode.isDark(row, col + 4)\n                        && !qrCode.isDark(row, col + 5)\n                        &&  qrCode.isDark(row, col + 6) ) {\n                    lostPoint += 40;\n                }\n            }\n        }\n\n        for (var col = 0; col < moduleCount; col++) {\n            for (var row = 0; row < moduleCount - 6; row++) {\n                if (qrCode.isDark(row, col)\n                        && !qrCode.isDark(row + 1, col)\n                        &&  qrCode.isDark(row + 2, col)\n                        &&  qrCode.isDark(row + 3, col)\n                        &&  qrCode.isDark(row + 4, col)\n                        && !qrCode.isDark(row + 5, col)\n                        &&  qrCode.isDark(row + 6, col) ) {\n                    lostPoint += 40;\n                }\n            }\n        }\n\n        // LEVEL4\n\n        var darkCount = 0;\n\n        for (var col = 0; col < moduleCount; col++) {\n            for (var row = 0; row < moduleCount; row++) {\n                if (qrCode.isDark(row, col) ) {\n                    darkCount++;\n                }\n            }\n        }\n\n        var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n        lostPoint += ratio * 10;\n\n        return lostPoint;\n    }\n\n};\n\n\n//---------------------------------------------------------------------\n// QRMath\n//---------------------------------------------------------------------\n\nvar QRMath = {\n\n    glog : function(n) {\n\n        if (n < 1) {\n            throw new Error(\"glog(\" + n + \")\");\n        }\n\n        return QRMath.LOG_TABLE[n];\n    },\n\n    gexp : function(n) {\n\n        while (n < 0) {\n            n += 255;\n        }\n\n        while (n >= 256) {\n            n -= 255;\n        }\n\n        return QRMath.EXP_TABLE[n];\n    },\n\n    EXP_TABLE : new Array(256),\n\n    LOG_TABLE : new Array(256)\n\n};\n\nfor (var i = 0; i < 8; i++) {\n    QRMath.EXP_TABLE[i] = 1 << i;\n}\nfor (var i = 8; i < 256; i++) {\n    QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4]\n        ^ QRMath.EXP_TABLE[i - 5]\n        ^ QRMath.EXP_TABLE[i - 6]\n        ^ QRMath.EXP_TABLE[i - 8];\n}\nfor (var i = 0; i < 255; i++) {\n    QRMath.LOG_TABLE[QRMath.EXP_TABLE[i] ] = i;\n}\n\n//---------------------------------------------------------------------\n// QRPolynomial\n//---------------------------------------------------------------------\n\nfunction QRPolynomial(num, shift) {\n\n    if (num.length == undefined) {\n        throw new Error(num.length + \"/\" + shift);\n    }\n\n    var offset = 0;\n\n    while (offset < num.length && num[offset] == 0) {\n        offset++;\n    }\n\n    this.num = new Array(num.length - offset + shift);\n    for (var i = 0; i < num.length - offset; i++) {\n        this.num[i] = num[i + offset];\n    }\n}\n\nQRPolynomial.prototype = {\n\n    get : function(index) {\n        return this.num[index];\n    },\n\n    getLength : function() {\n        return this.num.length;\n    },\n\n    multiply : function(e) {\n\n        var num = new Array(this.getLength() + e.getLength() - 1);\n\n        for (var i = 0; i < this.getLength(); i++) {\n            for (var j = 0; j < e.getLength(); j++) {\n                num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i) ) + QRMath.glog(e.get(j) ) );\n            }\n        }\n\n        return new QRPolynomial(num, 0);\n    },\n\n    mod : function(e) {\n\n        if (this.getLength() - e.getLength() < 0) {\n            return this;\n        }\n\n        var ratio = QRMath.glog(this.get(0) ) - QRMath.glog(e.get(0) );\n\n        var num = new Array(this.getLength() );\n\n        for (var i = 0; i < this.getLength(); i++) {\n            num[i] = this.get(i);\n        }\n\n        for (var i = 0; i < e.getLength(); i++) {\n            num[i] ^= QRMath.gexp(QRMath.glog(e.get(i) ) + ratio);\n        }\n\n        // recursive call\n        return new QRPolynomial(num, 0).mod(e);\n    }\n};\n\n//---------------------------------------------------------------------\n// QRRSBlock\n//---------------------------------------------------------------------\n\nfunction QRRSBlock(totalCount, dataCount) {\n    this.totalCount = totalCount;\n    this.dataCount  = dataCount;\n}\n\nQRRSBlock.RS_BLOCK_TABLE = [\n\n    // L\n    // M\n    // Q\n    // H\n\n    // 1\n    [1, 26, 19],\n    [1, 26, 16],\n    [1, 26, 13],\n    [1, 26, 9],\n\n    // 2\n    [1, 44, 34],\n    [1, 44, 28],\n    [1, 44, 22],\n    [1, 44, 16],\n\n    // 3\n    [1, 70, 55],\n    [1, 70, 44],\n    [2, 35, 17],\n    [2, 35, 13],\n\n    // 4\n    [1, 100, 80],\n    [2, 50, 32],\n    [2, 50, 24],\n    [4, 25, 9],\n\n    // 5\n    [1, 134, 108],\n    [2, 67, 43],\n    [2, 33, 15, 2, 34, 16],\n    [2, 33, 11, 2, 34, 12],\n\n    // 6\n    [2, 86, 68],\n    [4, 43, 27],\n    [4, 43, 19],\n    [4, 43, 15],\n\n    // 7\n    [2, 98, 78],\n    [4, 49, 31],\n    [2, 32, 14, 4, 33, 15],\n    [4, 39, 13, 1, 40, 14],\n\n    // 8\n    [2, 121, 97],\n    [2, 60, 38, 2, 61, 39],\n    [4, 40, 18, 2, 41, 19],\n    [4, 40, 14, 2, 41, 15],\n\n    // 9\n    [2, 146, 116],\n    [3, 58, 36, 2, 59, 37],\n    [4, 36, 16, 4, 37, 17],\n    [4, 36, 12, 4, 37, 13],\n\n    // 10\n    [2, 86, 68, 2, 87, 69],\n    [4, 69, 43, 1, 70, 44],\n    [6, 43, 19, 2, 44, 20],\n    [6, 43, 15, 2, 44, 16],\n\n    // 11\n    [4, 101, 81],\n    [1, 80, 50, 4, 81, 51],\n    [4, 50, 22, 4, 51, 23],\n    [3, 36, 12, 8, 37, 13],\n\n    // 12\n    [2, 116, 92, 2, 117, 93],\n    [6, 58, 36, 2, 59, 37],\n    [4, 46, 20, 6, 47, 21],\n    [7, 42, 14, 4, 43, 15],\n\n    // 13\n    [4, 133, 107],\n    [8, 59, 37, 1, 60, 38],\n    [8, 44, 20, 4, 45, 21],\n    [12, 33, 11, 4, 34, 12],\n\n    // 14\n    [3, 145, 115, 1, 146, 116],\n    [4, 64, 40, 5, 65, 41],\n    [11, 36, 16, 5, 37, 17],\n    [11, 36, 12, 5, 37, 13],\n\n    // 15\n    [5, 109, 87, 1, 110, 88],\n    [5, 65, 41, 5, 66, 42],\n    [5, 54, 24, 7, 55, 25],\n    [11, 36, 12],\n\n    // 16\n    [5, 122, 98, 1, 123, 99],\n    [7, 73, 45, 3, 74, 46],\n    [15, 43, 19, 2, 44, 20],\n    [3, 45, 15, 13, 46, 16],\n\n    // 17\n    [1, 135, 107, 5, 136, 108],\n    [10, 74, 46, 1, 75, 47],\n    [1, 50, 22, 15, 51, 23],\n    [2, 42, 14, 17, 43, 15],\n\n    // 18\n    [5, 150, 120, 1, 151, 121],\n    [9, 69, 43, 4, 70, 44],\n    [17, 50, 22, 1, 51, 23],\n    [2, 42, 14, 19, 43, 15],\n\n    // 19\n    [3, 141, 113, 4, 142, 114],\n    [3, 70, 44, 11, 71, 45],\n    [17, 47, 21, 4, 48, 22],\n    [9, 39, 13, 16, 40, 14],\n\n    // 20\n    [3, 135, 107, 5, 136, 108],\n    [3, 67, 41, 13, 68, 42],\n    [15, 54, 24, 5, 55, 25],\n    [15, 43, 15, 10, 44, 16],\n\n    // 21\n    [4, 144, 116, 4, 145, 117],\n    [17, 68, 42],\n    [17, 50, 22, 6, 51, 23],\n    [19, 46, 16, 6, 47, 17],\n\n    // 22\n    [2, 139, 111, 7, 140, 112],\n    [17, 74, 46],\n    [7, 54, 24, 16, 55, 25],\n    [34, 37, 13],\n\n    // 23\n    [4, 151, 121, 5, 152, 122],\n    [4, 75, 47, 14, 76, 48],\n    [11, 54, 24, 14, 55, 25],\n    [16, 45, 15, 14, 46, 16],\n\n    // 24\n    [6, 147, 117, 4, 148, 118],\n    [6, 73, 45, 14, 74, 46],\n    [11, 54, 24, 16, 55, 25],\n    [30, 46, 16, 2, 47, 17],\n\n    // 25\n    [8, 132, 106, 4, 133, 107],\n    [8, 75, 47, 13, 76, 48],\n    [7, 54, 24, 22, 55, 25],\n    [22, 45, 15, 13, 46, 16],\n\n    // 26\n    [10, 142, 114, 2, 143, 115],\n    [19, 74, 46, 4, 75, 47],\n    [28, 50, 22, 6, 51, 23],\n    [33, 46, 16, 4, 47, 17],\n\n    // 27\n    [8, 152, 122, 4, 153, 123],\n    [22, 73, 45, 3, 74, 46],\n    [8, 53, 23, 26, 54, 24],\n    [12, 45, 15, 28, 46, 16],\n\n    // 28\n    [3, 147, 117, 10, 148, 118],\n    [3, 73, 45, 23, 74, 46],\n    [4, 54, 24, 31, 55, 25],\n    [11, 45, 15, 31, 46, 16],\n\n    // 29\n    [7, 146, 116, 7, 147, 117],\n    [21, 73, 45, 7, 74, 46],\n    [1, 53, 23, 37, 54, 24],\n    [19, 45, 15, 26, 46, 16],\n\n    // 30\n    [5, 145, 115, 10, 146, 116],\n    [19, 75, 47, 10, 76, 48],\n    [15, 54, 24, 25, 55, 25],\n    [23, 45, 15, 25, 46, 16],\n\n    // 31\n    [13, 145, 115, 3, 146, 116],\n    [2, 74, 46, 29, 75, 47],\n    [42, 54, 24, 1, 55, 25],\n    [23, 45, 15, 28, 46, 16],\n\n    // 32\n    [17, 145, 115],\n    [10, 74, 46, 23, 75, 47],\n    [10, 54, 24, 35, 55, 25],\n    [19, 45, 15, 35, 46, 16],\n\n    // 33\n    [17, 145, 115, 1, 146, 116],\n    [14, 74, 46, 21, 75, 47],\n    [29, 54, 24, 19, 55, 25],\n    [11, 45, 15, 46, 46, 16],\n\n    // 34\n    [13, 145, 115, 6, 146, 116],\n    [14, 74, 46, 23, 75, 47],\n    [44, 54, 24, 7, 55, 25],\n    [59, 46, 16, 1, 47, 17],\n\n    // 35\n    [12, 151, 121, 7, 152, 122],\n    [12, 75, 47, 26, 76, 48],\n    [39, 54, 24, 14, 55, 25],\n    [22, 45, 15, 41, 46, 16],\n\n    // 36\n    [6, 151, 121, 14, 152, 122],\n    [6, 75, 47, 34, 76, 48],\n    [46, 54, 24, 10, 55, 25],\n    [2, 45, 15, 64, 46, 16],\n\n    // 37\n    [17, 152, 122, 4, 153, 123],\n    [29, 74, 46, 14, 75, 47],\n    [49, 54, 24, 10, 55, 25],\n    [24, 45, 15, 46, 46, 16],\n\n    // 38\n    [4, 152, 122, 18, 153, 123],\n    [13, 74, 46, 32, 75, 47],\n    [48, 54, 24, 14, 55, 25],\n    [42, 45, 15, 32, 46, 16],\n\n    // 39\n    [20, 147, 117, 4, 148, 118],\n    [40, 75, 47, 7, 76, 48],\n    [43, 54, 24, 22, 55, 25],\n    [10, 45, 15, 67, 46, 16],\n\n    // 40\n    [19, 148, 118, 6, 149, 119],\n    [18, 75, 47, 31, 76, 48],\n    [34, 54, 24, 34, 55, 25],\n    [20, 45, 15, 61, 46, 16]\n];\n\nQRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\n\n    var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n\n    if (rsBlock == undefined) {\n        throw new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel);\n    }\n\n    var length = rsBlock.length / 3;\n\n    var list = new Array();\n\n    for (var i = 0; i < length; i++) {\n\n        var count = rsBlock[i * 3 + 0];\n        var totalCount = rsBlock[i * 3 + 1];\n        var dataCount  = rsBlock[i * 3 + 2];\n\n        for (var j = 0; j < count; j++) {\n            list.push(new QRRSBlock(totalCount, dataCount) );\n        }\n    }\n\n    return list;\n}\n\nQRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\n\n    switch(errorCorrectLevel) {\n    case QRErrorCorrectLevel.L :\n        return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n    case QRErrorCorrectLevel.M :\n        return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n    case QRErrorCorrectLevel.Q :\n        return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n    case QRErrorCorrectLevel.H :\n        return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n    default :\n        return undefined;\n    }\n}\n\n//---------------------------------------------------------------------\n// QRBitBuffer\n//---------------------------------------------------------------------\n\nfunction QRBitBuffer() {\n    this.buffer = new Array();\n    this.length = 0;\n}\n\nQRBitBuffer.prototype = {\n\n    get : function(index) {\n        var bufIndex = Math.floor(index / 8);\n        return ( (this.buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n    },\n\n    put : function(num, length) {\n        for (var i = 0; i < length; i++) {\n            this.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n        }\n    },\n\n    getLengthInBits : function() {\n        return this.length;\n    },\n\n    putBit : function(bit) {\n\n        var bufIndex = Math.floor(this.length / 8);\n        if (this.buffer.length <= bufIndex) {\n            this.buffer.push(0);\n        }\n\n        if (bit) {\n            this.buffer[bufIndex] |= (0x80 >>> (this.length % 8) );\n        }\n\n        this.length++;\n    }\n};\n\nexport default QRCode;","import Qrcode from './qrcode.js';\r\nimport { saveAs } from 'file-saver';\r\nimport { Svg, G, Gradient, Mask, Use, Text, Rect, Path } from '@svgdotjs/svg.js';\r\nimport { getTime, imageToBlob, loadImage } from '@/utils/functions';\r\n\r\nclass CreateQr {\r\n    constructor(ele) {\r\n        this.config = {\r\n            qrText: '',\r\n            correctLevel: 'Q',\r\n            margin: 20,\r\n            background: '#FFFFFF',\r\n            frame: '',\r\n            logo: '',\r\n            eye: '',\r\n            element: null,\r\n            fill: null,\r\n            eyeOuter: '',\r\n            eyeInner: '',\r\n            eyeRotate: true,\r\n            logoStyle: '',\r\n            logoShadow: true,\r\n            fontText: '',\r\n            fontFamily: '',\r\n            fontSize: 35,\r\n            fontColor: '',\r\n            fontStyle: null,\r\n            textAlign: '',\r\n            qrPosition: null,\r\n            textPosition: null,\r\n        };\r\n        this.data = null;\r\n        this.pattern = null;\r\n        this.rowWidth = 10;\r\n        this.qrEle = ele;\r\n        this.maxSize = 0;\r\n\r\n        this.root = null;\r\n        this.qr = null;\r\n        this.logo = null;\r\n        this.text = null;\r\n        this.eleName = ['b11', 'b12', 'b21', 'b13', 'b31', 'b22'];\r\n        this.presets = ['rect', 'rect_s', 'circle', 'circle_s', 'rhombus', 'rhombus_s', 'liquid'];\r\n\r\n        this.testSvg = null;\r\n        this.paths = {\r\n            defaultElement:\r\n                '<svg width=\"10\" height=\"10\" viewBox=\"0 0 10 10\"><rect x=\"0\" y=\"0\" width=\"10\" height=\"10\" shape-rendering=\"crispEdges\"></rect></svg>',\r\n            defaultEye:\r\n                '<svg width=\"70\" height=\"70\" viewBox=\"0 0 70 70\"><path d=\"M70,70H0V0h70V70z M10,60h50V10H10V60z M20,20h30v30H20V20z\" shape-rendering=\"crispEdges\"/></svg>',\r\n            eyeOuter: '<path d=\"M70,70H0V0h70V70z M35,10A25,25,0,0,0,10,35A25,25,0,1,0,35,10Z\" fill=\"none\"/>',\r\n            eyeInner: '<circle cx=\"35\" cy=\"35\" r=\"24.5\" fill=\"none\"/>',\r\n            white: '<filter id=\"white_filter\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\" filterUnits=\"objectBoundingBox\" primitiveUnits=\"userSpaceOnUse\" color-interpolation-filters=\"linearRGB\"><feColorMatrix type=\"matrix\" values=\"0 0 0 0 255 0 0 0 0 255 0 0 0 0 255 0 0 0 1 0\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\" in=\"SourceGraphic\" result=\"colormatrix\"/></filter>',\r\n            filter: `<filter id=\"logo_filter\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\" filterUnits=\"objectBoundingBox\" primitiveUnits=\"userSpaceOnUse\" color-interpolation-filters=\"linearRGB\"><feDropShadow stdDeviation=\"2 2\" in=\"SourceGraphic\" dx=\"0\" dy=\"1\" flood-color=\"#000000\" flood-opacity=\"0.5\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\" result=\"dropShadow\"/></filter>`,\r\n            rectOuter: '<rect rx=\"6\" ry=\"6\" fill=\"#FFFFFF\"></rect>',\r\n            rectInner: '<rect rx=\"4\" ry=\"4\" stroke-width=\"0.5\" stroke=\"#bbbbbb\" fill=\"none\"></rect>',\r\n            roundOuter: '<circle rx=\"6\" ry=\"6\" fill=\"#FFFFFF\"></circle>',\r\n            roundInner: '<circle rx=\"4\" ry=\"4\" stroke-width=\"0.5\" stroke=\"#bbbbbb\" fill=\"none\"></circle>',\r\n        };\r\n    }\r\n    render(config) {\r\n        let step = this.getRenderStep(config);\r\n        this.clearRoot(); //清除画布\r\n\r\n        dblog('--- QrCode render step ---', step);\r\n        dblog('--- QrCode render start ---', this.config);\r\n        switch (step) {\r\n            case 'empty':\r\n                this.showRunTime(this.renderEmpty);\r\n                break;\r\n            case 'qrText':\r\n                this.showRunTime(this.loadQrData);\r\n            case 'qrBody':\r\n                this.showRunTime(this.renderQrBody);\r\n            case 'qrEye':\r\n                this.showRunTime(this.renderQrEye);\r\n            case 'qrFill':\r\n                this.showRunTime(this.fillQr);\r\n            case 'logo':\r\n                this.showRunTime(this.renderLogo);\r\n            case 'text':\r\n                this.showRunTime(this.renderText);\r\n            default:\r\n                this.showRunTime(this.renderRoot);\r\n        }\r\n        dblog('--- QrCode render finish ---');\r\n    }\r\n    getRenderStep(config) {\r\n        let step = 'qrText',\r\n            temp = {};\r\n        Object.keys(this.config).forEach((key) => {\r\n            if (config[key]) temp[key] = config[key].value;\r\n        });\r\n\r\n        if (temp.margin !== this.config.margin || temp.logoShadow !== this.config.logoShadow) {\r\n            step = ''; //margin发生改变 renderRoot\r\n        }\r\n        if (\r\n            temp.fontText !== this.config.fontText ||\r\n            temp.fontFamily !== this.config.fontFamily ||\r\n            temp.fontSize !== this.config.fontSize ||\r\n            temp.fontColor !== this.config.fontColor ||\r\n            temp.fontStyle !== this.config.fontStyle ||\r\n            temp.textAlign !== this.config.textAlign\r\n        ) {\r\n            step = 'text'; //文字发生改变\r\n        }\r\n        if (temp.logo !== this.config.logo || temp.logoStyle !== this.config.logoStyle) {\r\n            step = 'logo'; //logo发生改变\r\n        }\r\n        if (\r\n            temp.fill !== this.config.fill ||\r\n            temp.eyeOuter !== this.config.eyeOuter ||\r\n            temp.eyeInner !== this.config.eyeInner\r\n        ) {\r\n            step = 'qrFill'; //填充发生改变\r\n        }\r\n        if (temp.eye !== this.config.eye) {\r\n            step = 'qrEye'; //码眼发生改变\r\n        }\r\n        if (temp.element !== this.config.element) {\r\n            step = 'qrBody'; //元素形状发生改变\r\n            if (this.data) {\r\n                let len = this.data.length;\r\n                for (let i = 0; i < len; i++)\r\n                    for (let j = 0; j < len; j++) if (this.pattern[i][j] === 9) this.pattern[i][j] = 0;\r\n            }\r\n        }\r\n        if (temp.qrText !== this.config.qrText || temp.correctLevel !== this.config.correctLevel) {\r\n            step = 'qrText'; //二维码数据发生改变\r\n        }\r\n        if (!temp.qrText || temp.correctLevel === 'Z') {\r\n            step = 'empty'; //数据为空\r\n        }\r\n        Object.assign(this.config, temp);\r\n        return step;\r\n    }\r\n    renderEmpty() {\r\n        this.initRoot();\r\n        this.root.put(this.paths.rectInner).move(0, 0).size(500, 500).stroke('#000000');\r\n        let text = new Text().rebuild(false).text('请先输入二维码内容').font({\r\n            family: this.config.fontFamily,\r\n            size: 35,\r\n            anchor: 'middle',\r\n            leading: 1.3,\r\n        });\r\n        this.rebuildText(text, 500 / 2, 500 / 2);\r\n        this.root.add(text).size(500, 500).viewbox(0, 0, 500, 500);\r\n    }\r\n    initRoot() {\r\n        return this.root || (this.root = new Svg().addTo(this.qrEle));\r\n    }\r\n    clearRoot() {\r\n        this.root && this.root.clear();\r\n    }\r\n    renderRoot() {\r\n        this.initRoot();\r\n        this.root.rect();\r\n\r\n        let defs = this.root.defs();\r\n        let rootW = 500,\r\n            rootH = 500,\r\n            bgColor = this.config.background || '#FFFFFF',\r\n            qrX = this.config.margin,\r\n            qrY = this.config.margin,\r\n            qrW = rootW - 2 * this.config.margin;\r\n        //frame\r\n        if (this.config.frame) {\r\n            let frame = this.root.put(this.config.frame);\r\n            let { width, height } = frame.viewbox(),\r\n                scale = rootW / Math.max(width, height);\r\n            rootW = Math.ceil(width * scale);\r\n            rootH = Math.ceil(height * scale);\r\n            qrX = this.config.qrPosition ? this.config.qrPosition.offsetX : qrX;\r\n            qrY = this.config.qrPosition ? this.config.qrPosition.offsetY : qrY;\r\n            qrW = this.config.qrPosition ? this.config.qrPosition.size : qrW;\r\n            frame.move(0, 0).size(rootW, rootH);\r\n        }\r\n        // qr\r\n        if (this.config.qrText && this.qr) {\r\n            this.qr.main.move(qrX, qrY).size(qrW, qrW);\r\n            this.root.add(this.qr.main);\r\n        }\r\n        // logo\r\n        if (this.config.logo && this.logo) {\r\n            let { width, height } = this.logo.viewbox(),\r\n                scale = this.getLogoSize(qrW) / ((width + height) / 2),\r\n                logoW = Math.ceil(width * scale),\r\n                logoH = Math.ceil(height * scale),\r\n                logoX = qrX + qrW / 2 - logoW / 2,\r\n                logoY = qrY + qrW / 2 - logoH / 2;\r\n            this.logo.move(logoX, logoY).size(logoW, logoH).attr('filter', null);\r\n            if (this.config.logoShadow) {\r\n                defs.put(this.paths.filter);\r\n                this.logo.attr('filter', 'url(#logo_filter)');\r\n            }\r\n            this.root.add(this.logo);\r\n        }\r\n        // text\r\n        if (this.config.fontText && this.text) {\r\n            let { width, height } = this.text.viewbox(),\r\n                textX = rootW / 2,\r\n                textY = rootH + 10 + height / 2;\r\n            rootH = rootH + height + 10 + this.config.margin;\r\n            this.text.center(textX, textY);\r\n            this.root.add(this.text);\r\n        }\r\n        this.root.size(rootW, rootH).viewbox(0, 0, rootW, rootH);\r\n        this.root.get(0).move(0, 0).size(rootW, rootH).fill(bgColor);\r\n    }\r\n    initImageSize() {\r\n        if (!this.maxSize) {\r\n            this.maxSize =\r\n                (Number.parseFloat(window.getComputedStyle(this.qrEle).getPropertyValue('width')) ||\r\n                    this.qrEle.clientWidth) - 1;\r\n        }\r\n        return this.maxSize;\r\n    }\r\n    async getQrImage(format, size) {\r\n        if (!this.config.qrText || this.config.correctLevel === 'Z') return;\r\n\r\n        size = size || this.initImageSize();\r\n        if (!['svg', 'png', 'jpeg'].includes(format)) format = 'png';\r\n\r\n        let svgStr = this.root.node.outerHTML.replaceAll('&quot;', ''),\r\n            svgBlob = new Blob([svgStr], { type: 'image/svg+xml' }),\r\n            fileName = `tuzim.net_${getTime()}.${format}`;\r\n        switch (format) {\r\n            case 'svg':\r\n                svgBlob && saveAs(svgBlob, fileName);\r\n                break;\r\n            case 'png':\r\n            case 'jpeg':\r\n                let svgSrc = URL.createObjectURL(svgBlob),\r\n                    image = await loadImage(svgSrc),\r\n                    imageBlob = await imageToBlob(image, size, `image/${format}`, 1);\r\n                URL.revokeObjectURL(svgSrc);\r\n                imageBlob && saveAs(imageBlob, fileName);\r\n                break;\r\n        }\r\n    }\r\n    loadQrData() {\r\n        let qrcode = new Qrcode(0, this.config.correctLevel);\r\n        qrcode.addData(this.config.qrText);\r\n        qrcode.make();\r\n        this.data = qrcode.modules; //二维码数据\r\n        this.pattern = qrcode.pattern; //eyes, adjust的位置\r\n    }\r\n    initQr() {\r\n        if (this.qr) return this.qr.main;\r\n\r\n        this.qr = {\r\n            main: null, //svg\r\n            defs: null, //defs\r\n            eye: null, //defs > eye\r\n            element: {}, //defs > element.bxx\r\n            fill: null, //defs > pattern\r\n            qrMask: null, //defs > mask\r\n            eyesMask: null, //defs > mask\r\n            white: null,\r\n\r\n            body: null, //main > body\r\n            eyes: null, //main > eyes\r\n        };\r\n        this.qr.main = new Svg().css('overflow', 'visible');\r\n        this.qr.defs = this.qr.main.defs();\r\n        return this.qr.main;\r\n    }\r\n    isArtQr() {\r\n        return Object.keys(this.qr.element).length;\r\n    }\r\n    addQrElements() {\r\n        this.clearQrElements(this.eleName);\r\n        if (!this.presets.includes(this.config.element)) {\r\n            this.eleName.forEach((ele) => {\r\n                if (ele === 'b11' && !this.config.element[ele]) {\r\n                    this.addOrReplace(this.paths.defaultElement, this.qr.defs, this.qr.element, ele);\r\n                }\r\n                if (this.config.element[ele]) {\r\n                    if (Array.isArray(this.config.element[ele])) {\r\n                        this.qr.element[ele] = [];\r\n                        this.config.element[ele].forEach((item, index) => {\r\n                            this.addOrReplace(item, this.qr.defs, this.qr.element[ele], index);\r\n                        });\r\n                    } else if (typeof this.config.element[ele] === 'string') {\r\n                        this.qr.element[ele] = null;\r\n                        this.addOrReplace(this.config.element[ele], this.qr.defs, this.qr.element, ele);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    clearQrElements(elements) {\r\n        elements.forEach((ele) => {\r\n            if (this.qr.element[ele]) {\r\n                if (Array.isArray(this.qr.element[ele]))\r\n                    this.qr.element[ele].forEach((item) => item.remove());\r\n                else this.qr.element[ele].remove();\r\n                this.qr.element[ele] = null;\r\n            }\r\n        });\r\n    }\r\n    loopQrData(fun) {\r\n        let rows = this.data.length;\r\n        for (let r = 0; r < rows; r++) {\r\n            for (let c = 0; c < rows; c++) {\r\n                if (this.pattern[r][c] >= 3 || !this.data[r][c]) continue;\r\n                fun && fun.call(this, c * this.rowWidth, r * this.rowWidth);\r\n            }\r\n        }\r\n    }\r\n    renderQrBody() {\r\n        this.initQr();\r\n        this.addQrElements();\r\n\r\n        let rows = this.data.length,\r\n            size = rows * this.rowWidth,\r\n            qr = new G(),\r\n            pathArray = [];\r\n        switch (this.config.element) {\r\n            case 'rect':\r\n            case 'rect_s':\r\n                let ro = this.config.element === 'rect_s' ? 1 : 0,\r\n                    rw = this.rowWidth - 2 * ro;\r\n                this.loopQrData((x, y) => pathArray.push(`M${x + ro},${y + ro}h${rw}v${rw}h-${rw}v-${rw}Z`));\r\n                qr.put(new Path().attr('shape-rendering', 'crispEdges').plot(pathArray.join('')));\r\n                break;\r\n            case 'circle':\r\n            case 'circle_s':\r\n                let co = this.config.element === 'circle_s' ? 1 : 0,\r\n                    cr = (this.rowWidth - 2 * co) / 2;\r\n                this.loopQrData((x, y) =>\r\n                    pathArray.push(\r\n                        `M${x + cr + co},${y + co}a${cr},${cr},0,0,1,${0},${2 * cr}a${cr},${cr},0,0,1,${0},${\r\n                            -2 * cr\r\n                        }Z`\r\n                    )\r\n                );\r\n                qr.put(new Path().plot(pathArray.join('')));\r\n                break;\r\n            case 'rhombus':\r\n            case 'rhombus_s':\r\n                let hw = this.rowWidth / 2;\r\n                this.config.element === 'rhombus_s'\r\n                    ? this.loopQrData((x, y) =>\r\n                          pathArray.push(\r\n                              `M${\r\n                                  x + hw\r\n                              },${y}a${hw},${hw},0,0,0,${hw},${hw}a${hw},${hw},0,0,0,${-hw},${hw}a${hw},${hw},0,0,0,${-hw},${-hw}a${hw},${hw},0,0,0,${hw},${-hw}Z`\r\n                          )\r\n                      )\r\n                    : this.loopQrData((x, y) =>\r\n                          pathArray.push(`M${x + hw},${y}l${hw},${hw}l${-hw},${hw}l${-hw},${-hw}Z`)\r\n                      );\r\n                qr.put(new Path().plot(pathArray.join('')));\r\n                break;\r\n            case 'liquid':\r\n                for (let r = 0; r < rows; r++) {\r\n                    for (let c = 0; c < rows; c++) {\r\n                        if (this.pattern[r][c] >= 3) continue;\r\n                        this.data[r][c]\r\n                            ? pathArray.push(this.liquidBlackPath(r, c, this.rowWidth, this.rowWidth / 2))\r\n                            : pathArray.push(this.liquidWhitePath(r, c, this.rowWidth, this.rowWidth / 2));\r\n                    }\r\n                }\r\n                qr.put(new Path().plot(pathArray.join('')));\r\n                break;\r\n            default: // art block\r\n                for (let r = 0; r < rows; r++) {\r\n                    for (let c = 0; c < rows; c++) {\r\n                        if (this.pattern[r][c] >= 3 || !this.data[r][c]) continue;\r\n                        qr.use(this.randomEle(this.artElement(r, c))).move(\r\n                            c * this.rowWidth,\r\n                            r * this.rowWidth\r\n                        );\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        this.addOrReplace(new Mask().add(qr), this.qr.defs, this.qr, 'qrMask');\r\n        this.qr.main.size(size, size).viewbox(0, 0, size, size);\r\n    }\r\n    renderQrEye() {\r\n        this.initQr();\r\n        this.addOrReplace(this.config.eye || this.paths.defaultEye, this.qr.defs, this.qr, 'eye');\r\n\r\n        let eyes = new G(),\r\n            size = this.data.length * this.rowWidth;\r\n        eyes.use(this.qr.eye);\r\n        if (this.config.eyeRotate) {\r\n            eyes.use(this.qr.eye).transform({ origin: [size / 2, size / 2], flip: 'x' });\r\n            eyes.use(this.qr.eye).transform({ origin: [size / 2, size / 2], flip: 'y' });\r\n        } else {\r\n            eyes.use(this.qr.eye).transform({ translate: [size - 70, 0] });\r\n            eyes.use(this.qr.eye).transform({ translate: [0, size - 70] });\r\n        }\r\n        this.addOrReplace(new Mask().add(eyes), this.qr.defs, this.qr, 'eyesMask');\r\n    }\r\n    addFillElements() {\r\n        let fill = this.config.fill; // init fill with image\r\n        if (!fill || Array.isArray(fill)) {\r\n            let colors = this.config.fill || ['#000000']; // fill with colors\r\n            fill = new Gradient('linear').from(0, 0).to(1, 1);\r\n            colors.forEach((color, index, arr) =>\r\n                fill.stop({ color, offset: (index ? index + 1 : index) / arr.length })\r\n            );\r\n        }\r\n        this.addOrReplace(fill, this.qr.defs, this.qr, 'fill');\r\n    }\r\n    fillWith(ele, color) {\r\n        this.addOrReplace(this.paths.white, this.qr.defs, this.qr, 'white');\r\n        ele.fill(color).attr('filter', 'url(#white_filter)');\r\n    }\r\n    fillQr() {\r\n        this.initQr();\r\n        let qr = this.qr.qrMask.get(0).attr({ filter: null, fill: null, stroke: null, 'stroke-width': null }), //清 fill stroke\r\n            eyes = this.qr.eyesMask.get(0).attr({ filter: null, fill: null }), //清 fill stroke\r\n            qrBody = null,\r\n            eyesBody = null,\r\n            size = this.data.length * this.rowWidth;\r\n\r\n        if (this.config.fill || !this.isArtQr()) {\r\n            this.addFillElements();\r\n            this.fillWith(qr, '#FFFFFF');\r\n            this.fillWith(eyes, '#FFFFFF');\r\n            this.config.element === 'liquid' && qr.stroke('#FFFFFF').attr('stroke-width', 1); // liquid\r\n\r\n            let body =\r\n                this.qr.fill instanceof Gradient\r\n                    ? new Rect()\r\n                          .move(-5, -5)\r\n                          .size(size + 10, size + 10)\r\n                          .fill(this.qr.fill)\r\n                    : new Use().move(0, 0).size(size, size).use(this.qr.fill);\r\n            qrBody = new G().add(body).maskWith(this.qr.qrMask);\r\n            eyesBody = new G().add(body.clone()).maskWith(this.qr.eyesMask);\r\n        }\r\n        if (this.config.eyeOuter || this.config.eyeInner) {\r\n            if (!eyesBody) {\r\n                this.fillWith(eyes, '#FFFFFF');\r\n                let body = new Rect().move(0, 0).size(size, size).fill('#000000');\r\n                eyesBody = new G().add(body).maskWith(this.qr.eyesMask); //type===2 && !this.config.fill\r\n            }\r\n            let eyeOuter = eyesBody.put(this.paths.eyeOuter).attr('fill', this.config.eyeOuter || 'none');\r\n            eyesBody.put(eyeOuter.clone()).transform({ origin: [size / 2, size / 2], flip: 'x' });\r\n            eyesBody.put(eyeOuter.clone()).transform({ origin: [size / 2, size / 2], flip: 'y' });\r\n            let eyeInner = eyesBody.put(this.paths.eyeInner).attr('fill', this.config.eyeInner || 'none');\r\n            eyesBody.put(eyeInner.clone()).transform({ origin: [size / 2, size / 2], flip: 'x' });\r\n            eyesBody.put(eyeInner.clone()).transform({ origin: [size / 2, size / 2], flip: 'y' });\r\n        }\r\n        qrBody = qrBody || new Use().use(qr);\r\n        eyesBody = eyesBody || new Use().use(eyes);\r\n        this.addOrReplace(qrBody, this.qr.main, this.qr, 'body');\r\n        this.addOrReplace(eyesBody, this.qr.main, this.qr, 'eyes');\r\n    }\r\n    initLogo() {\r\n        return this.logo || (this.logo = new Svg());\r\n    }\r\n    renderLogo() {\r\n        if (!this.config.logo) return;\r\n\r\n        switch (this.config.logoStyle) {\r\n            case 'rect':\r\n                this.renderRectLogo();\r\n                break;\r\n            case 'round':\r\n                this.renderRoundLogo();\r\n                break;\r\n            default:\r\n                this.renderOriginLogo();\r\n                break;\r\n        }\r\n    }\r\n    getLogoSize(qrW) {\r\n        let ratio = 4;\r\n        if (this.config.correctLevel === 'M') ratio = 4.5;\r\n        if (this.config.correctLevel === 'L') ratio = 5.25;\r\n        return qrW / ratio;\r\n    }\r\n    normalizeLogoImage(image) {\r\n        let { width, height } = image.viewbox(),\r\n            scale = 50 / Math.min(width, height), //logoimage 标准为 短边50px\r\n            imageW = Math.ceil(width * scale),\r\n            imageH = Math.ceil(height * scale);\r\n        image.size(imageW, imageH);\r\n        return { width: imageW, height: imageH };\r\n    }\r\n    addLogoElements(type) {\r\n        this.initLogo().clear();\r\n        let defs = this.logo.defs(),\r\n            image = defs.put(this.config.logo),\r\n            clip = type !== 'origin' ? defs.clip() : null,\r\n            outer = type !== 'origin' ? this.logo.put(this.paths[`${type}Outer`]) : null,\r\n            body = this.logo.use(image),\r\n            inner = type !== 'origin' ? this.logo.put(this.paths[`${type}Inner`]) : null;\r\n\r\n        return { image, clip, outer, body, inner };\r\n    }\r\n    renderRectLogo() {\r\n        let { image, clip, outer, body, inner } = this.addLogoElements('rect'),\r\n            { width, height } = this.normalizeLogoImage(image),\r\n            padding = 4,\r\n            logoW = width + 2 * padding, //外框 标准58px\r\n            logoH = height + 2 * padding;\r\n\r\n        clip.put(this.paths.rectInner).move(0, 0).size(width, height);\r\n        outer.move(0, 0).size(logoW, logoH);\r\n        body.clipWith(clip).translate(padding, padding);\r\n        inner.move(padding, padding).size(width, height); // 描边在最顶层\r\n        this.logo.size(logoW, logoH).viewbox(0, 0, logoW, logoH);\r\n    }\r\n    renderRoundLogo() {\r\n        let { image, clip, outer, body, inner } = this.addLogoElements('round'),\r\n            { width, height } = this.normalizeLogoImage(image),\r\n            padding = 4,\r\n            clipW = Math.min(width, height),\r\n            logoW = clipW + 2 * padding; //外框 标准58px\r\n\r\n        image.move((clipW - width) / 2, (clipW - height) / 2);\r\n        clip.put(this.paths.roundInner)\r\n            .center(clipW / 2, clipW / 2)\r\n            .size(clipW, clipW);\r\n        outer.center(logoW / 2, logoW / 2).size(logoW, logoW);\r\n        body.clipWith(clip).translate(padding, padding);\r\n        inner.center(logoW / 2, logoW / 2).size(clipW, clipW); // 描边在最顶层\r\n        this.logo.size(logoW, logoW).viewbox(0, 0, logoW, logoW);\r\n    }\r\n    renderOriginLogo() {\r\n        let { image } = this.addLogoElements('origin'),\r\n            { width, height } = this.normalizeLogoImage(image);\r\n        this.logo.size(width, height).viewbox(0, 0, width, height);\r\n    }\r\n    initText() {\r\n        return this.text || (this.text = new Svg());\r\n    }\r\n    rebuildText(text, centerX, centerY) {\r\n        this.testSvg = this.testSvg || new Svg().css('visibility', 'hidden'); //display:none 获取不到正确的 BBox\r\n        this.testSvg.addTo(this.qrEle);\r\n        // 当 node 添加到dom树中以后开启 rebuild 并触发 rebuild，得到正确的 tspan dy 坐标，并获取 text 元素的 BBox\r\n        this.testSvg.put(text).rebuild(true);\r\n        let { width, height } = text.bbox(),\r\n            textW = Math.ceil(width),\r\n            textH = Math.ceil(height);\r\n        text.center(centerX || textW / 2, centerY || textH / 2); //将文字居中到目标坐标\r\n        this.testSvg.clear().remove();\r\n\r\n        return { textW, textH };\r\n    }\r\n    renderText() {\r\n        if (!this.config.fontText) return;\r\n\r\n        this.initText().clear();\r\n        // 关闭 rebuild，因为此时 node 尚未添加到dom树中，getComputedStyle 获取不到 font-size，所以无法得到正确的 tspan dy 坐标\r\n        let text = new Text()\r\n            .rebuild(false)\r\n            .fill(this.config.fontColor) //.fill(this.qr.pattern.clone().addTo(this.text.main.defs()))\r\n            .attr('text-decoration', this.config.fontStyle.includes('underline') ? 'underline' : 'none')\r\n            .text(this.config.fontText)\r\n            .font({\r\n                family: this.config.fontFamily,\r\n                size: this.config.fontSize,\r\n                weight: this.config.fontStyle.includes('bold') ? 600 : 400,\r\n                style: this.config.fontStyle.includes('italic') ? 'italic' : 'normal',\r\n                anchor: this.config.textAlign,\r\n                leading: 1.3,\r\n            });\r\n        let { textW, textH } = this.rebuildText(text, 0, 0);\r\n        this.text.add(text).size(textW, textH).viewbox(0, 0, textW, textH);\r\n    }\r\n    addOrReplace(src, target, store, storeKey) {\r\n        store[storeKey] = store[storeKey] ? store[storeKey].replace(src) : target.put(src);\r\n    }\r\n    isBlock(r, c, width, height) {\r\n        let isBlock = 1;\r\n        for (let i = r; i < r + height; i++)\r\n            for (let j = c; j < c + width; j++)\r\n                if (!this.isBlack(i, j) || this.pattern[i][j] >= 3) isBlock = 0;\r\n        return isBlock;\r\n    }\r\n    isBlack(r, c) {\r\n        let len = this.data.length;\r\n        return !(r < 0 || c < 0 || r >= len || c >= len) && this.data[r][c];\r\n    }\r\n    setPatternValue(r, c, width, height, value) {\r\n        let len = this.data.length;\r\n        for (let i = r; i < r + height; i++)\r\n            for (let j = c; j < c + width; j++)\r\n                i < 0 || j < 0 || i >= len || j >= len || (this.pattern[i][j] = value);\r\n    }\r\n    liquidWhitePath(r, c, rowW, cr) {\r\n        let x,\r\n            y,\r\n            str = '';\r\n        if (this.isBlack(r - 1, c) && this.isBlack(r, c - 1)) {\r\n            (x = c * rowW), (y = r * rowW); //top left\r\n            str += `M${x},${y}l${0},${cr}a${cr},${cr},0,0,1,${cr},${-cr}l${-cr},${0}Z`;\r\n        }\r\n        if (this.isBlack(r - 1, c) && this.isBlack(r, c + 1)) {\r\n            (x = c * rowW + rowW), (y = r * rowW); //top right\r\n            str += `M${x},${y}l${-cr},${0}a${cr},${cr},0,0,1,${cr},${cr}l${0},${-cr}Z`;\r\n        }\r\n        if (this.isBlack(r + 1, c) && this.isBlack(r, c + 1)) {\r\n            (x = c * rowW + rowW), (y = r * rowW + rowW); //bottom right\r\n            str += `M${x},${y}l${0},${-cr}a${cr},${cr},0,0,1,${-cr},${cr}l${cr},${0}Z`;\r\n        }\r\n        if (this.isBlack(r + 1, c) && this.isBlack(r, c - 1)) {\r\n            (x = c * rowW), (y = r * rowW + rowW); //bottom left\r\n            str += `M${x},${y}l${cr},${0}a${cr},${cr},0,0,1,${-cr},${-cr}l${0},${cr}Z`;\r\n        }\r\n        return str;\r\n    }\r\n    liquidBlackPath(r, c, rowW, cr) {\r\n        let x = c * rowW,\r\n            y = r * rowW + cr,\r\n            str = `M${x},${y}`;\r\n        this.isBlack(r, c - 1) || this.isBlack(r - 1, c) || this.isBlack(r - 1, c - 1)\r\n            ? (str += `l${0},${-cr}l${cr},${0}`)\r\n            : (str += `a${cr},${cr},0,0,1,${cr},${-cr}`); //top left\r\n        this.isBlack(r - 1, c) || this.isBlack(r, c + 1) || this.isBlack(r - 1, c + 1)\r\n            ? (str += `l${cr},${0}l${0},${cr}`)\r\n            : (str += `a${cr},${cr},0,0,1,${cr},${cr}`); //top right\r\n        this.isBlack(r + 1, c) || this.isBlack(r, c + 1) || this.isBlack(r + 1, c + 1)\r\n            ? (str += `l${0},${cr}l${-cr},${0}`)\r\n            : (str += `a${cr},${cr},0,0,1,${-cr},${cr}`); //bottom right\r\n        this.isBlack(r + 1, c) || this.isBlack(r, c - 1) || this.isBlack(r + 1, c - 1)\r\n            ? (str += `l${-cr},${0}l${0},${-cr}Z`)\r\n            : (str += `a${cr},${cr},0,0,1,${-cr},${-cr}Z`); //bottom left\r\n        return str;\r\n    }\r\n    artElement(r, c) {\r\n        let block = 11,\r\n            density = 100;\r\n        if (this.qr.element.b22 && this.isBlock(r, c, 2, 2)) (block = 22), (density = 40);\r\n        // else if (\r\n        //     this.qr.element.b22 &&\r\n        //     (this.isBlock(r, c + 1, 2, 2) || this.isBlock(r + 1, c, 2, 2) || this.isBlock(r + 1, c - 1, 2, 2))\r\n        // )\r\n        //     block = 11;\r\n        else if (this.qr.element.b13 && this.isBlock(r, c, 1, 3)) (block = 13), (density = 30);\r\n        else if (this.qr.element.b31 && this.isBlock(r, c, 3, 1)) (block = 31), (density = 30);\r\n        else if (this.qr.element.b21 && this.isBlock(r, c, 2, 1)) (block = 21), (density = 20);\r\n        else if (this.qr.element.b12 && this.isBlock(r, c, 1, 2)) (block = 12), (density = 20);\r\n        // else block = 11;\r\n\r\n        if (block !== 11) block = this.randomBetween(1, 101) <= density ? block : 11;\r\n        block !== 11 && this.setPatternValue(r, c, Math.floor(block / 10), block % 10, 9);\r\n        return this.qr.element['b' + block];\r\n    }\r\n    randomEle(element) {\r\n        return Array.isArray(element) ? element[this.randomBetween(0, element.length)] : element;\r\n    }\r\n    randomBetween(min, max) {\r\n        min = Math.ceil(min);\r\n        max = Math.floor(max);\r\n        return Math.floor(Math.random() * (max - min)) + min; //不含最大值，含最小值\r\n    }\r\n    showRunTime(fun) {\r\n        let d1 = Date.now();\r\n        fun.call(this);\r\n        dblog(`--- QrCode ${fun.name} ---`, Date.now() - d1, 'ms');\r\n    }\r\n}\r\n\r\nexport default CreateQr;\r\n","import { render } from \"./QrRender.vue?vue&type=template&id=2195d8b0&scoped=true\"\nimport script from \"./QrRender.vue?vue&type=script&lang=js\"\nexport * from \"./QrRender.vue?vue&type=script&lang=js\"\n\nimport \"./QrRender.vue?vue&type=style&index=0&id=2195d8b0&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\tuzim.net\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2195d8b0\"]])\n\nexport default __exports__","/**\r\n * JavaScript code to detect available availability of a\r\n * particular font in a browser using JavaScript and CSS.\r\n *\r\n * Author : Lalit Patel\r\n * Website: http://www.lalit.org/lab/javascript-css-font-detect/\r\n * License: Apache Software License 2.0\r\n *          http://www.apache.org/licenses/LICENSE-2.0\r\n * Version: 0.15 (21 Sep 2009)\r\n *          Changed comparision font to default from sans-default-default,\r\n *          as in FF3.0 font of child element didn't fallback\r\n *          to parent element if the font is missing.\r\n * Version: 0.2 (04 Mar 2012)\r\n *          Comparing font against all the 3 generic font families ie,\r\n *          'monospace', 'sans-serif' and 'sans'. If it doesn't match all 3\r\n *          then that font is 100% not available in the system\r\n * Version: 0.3 (24 Mar 2012)\r\n *          Replaced sans with serif in the list of baseFonts\r\n */\r\n/**\r\n * Usage: d = new Detector();\r\n *        d.detect('font name');\r\n */\r\nvar Detector = function () {\r\n    var baseFonts = ['monospace', 'sans-serif', 'serif'];\r\n    var testString = \"mmmmmmmmmmlli\";\r\n    var testSize = '72px';\r\n    var h = document.getElementsByTagName(\"body\")[0];\r\n    var s = document.createElement(\"span\");\r\n    s.style.fontSize = testSize;\r\n    s.innerHTML = testString;\r\n    var defaultWidth = {};\r\n    var defaultHeight = {};\r\n    for (var index in baseFonts) {\r\n        s.style.fontFamily = baseFonts[index];\r\n        h.appendChild(s);\r\n        defaultWidth[baseFonts[index]] = s.offsetWidth;\r\n        defaultHeight[baseFonts[index]] = s.offsetHeight;\r\n        h.removeChild(s);\r\n    }\r\n\r\n    function detect(font) {\r\n        var detected = false;\r\n        for (var index in baseFonts) {\r\n            s.style.fontFamily = font + ',' + baseFonts[index];\r\n            h.appendChild(s);\r\n            var matched = (s.offsetWidth != defaultWidth[baseFonts[index]] || s.offsetHeight != defaultHeight[baseFonts[index]]);\r\n            h.removeChild(s);\r\n            detected = detected || matched;\r\n        }\r\n        return detected;\r\n    }\r\n    this.detect = detect;\r\n};\r\n\r\nexport default Detector;","import {\r\n    reactive,\r\n    shallowReactive,\r\n    ref,\r\n    toRefs,\r\n    computed,\r\n    watch,\r\n    nextTick,\r\n    onMounted,\r\n    onBeforeUnmount,\r\n} from 'vue';\r\nimport { notification } from 'ant-design-vue';\r\nimport request from '@/utils/request';\r\nimport FontDetect from '@/utils/fontdetect';\r\nimport { countStr, checkImg, filterObj, fileToSvg } from '@/utils/functions';\r\nimport ls from 'localstorage-slim';\r\nls.config.encrypt = true;\r\nls.config.secret = 50;\r\n\r\nlet presetKeys = [\r\n    'margin',\r\n    'element',\r\n    'eye',\r\n    'eyeOuter',\r\n    'eyeInner',\r\n    'eyeRotate',\r\n    'fill',\r\n    'frame',\r\n    'qrPosition',\r\n    'textPosition',\r\n];\r\nlet resourceKeys = ['elements', 'eyes', 'logos', 'fonts', 'colors', 'gdColors', 'presets', 'expireTime'];\r\nlet userConfigKeys = [\r\n    'selectedPreset',\r\n    'selectedElement',\r\n    'selectedEye',\r\n    'fontFamily',\r\n    'fill',\r\n    'eyeOuter',\r\n    'eyeInner',\r\n    'userLogos',\r\n    'logoStyle',\r\n    'logoShadow',\r\n    'fontSize',\r\n    'fontStyle',\r\n    'fontColor',\r\n    'textAlign',\r\n];\r\n\r\nexport default function useInitQrEditor(qrTextRef) {\r\n    //页面收集数据\r\n    let collections = shallowReactive({\r\n        //resource\r\n        elements: null,\r\n        eyes: null,\r\n        logos: null,\r\n        fonts: null,\r\n        colors: null,\r\n        gdColors: null,\r\n        presets: null,\r\n\r\n        //qrconfig\r\n        selectedPreset: null,\r\n        selectedElement: null,\r\n        selectedEye: null,\r\n        fontFamily: '',\r\n        fill: null,\r\n        eyeOuter: '',\r\n        eyeInner: '',\r\n        userLogos: reactive([]),\r\n        selectedLogo: null,\r\n        logoStyle: 'origin',\r\n        logoShadow: true,\r\n        fontSize: 35,\r\n        fontStyle: ['bold'],\r\n        fontColor: '#000000',\r\n        textAlign: 'middle',\r\n\r\n        //data\r\n        max: {\r\n            L: Math.floor((23648 - 20) / 8),\r\n            M: Math.floor((18672 - 20) / 8),\r\n            Q: Math.floor((13328 - 20) / 8),\r\n            H: Math.floor((10208 - 20) / 8),\r\n            Z: -1,\r\n        },\r\n        textLength: 0,\r\n        correctLevel: 'Q',\r\n        fontText: '',\r\n    });\r\n\r\n    let collectionRefs = toRefs(collections);\r\n\r\n    //二维码渲染数据\r\n    let qrConfig = {\r\n        qrText: qrTextRef,\r\n        correctLevel: computed(() => {\r\n            let level = 'Z';\r\n\r\n            for (let key in collections.max) {\r\n                if (collections.textLength <= collections.max[key]) level = key;\r\n            }\r\n            if (\r\n                collections.textLength > collections.max[collections.correctLevel] &&\r\n                collections.correctLevel !== level\r\n            ) {\r\n                collections.correctLevel = level; //不会触发collections的getter\r\n            }\r\n            return collections.correctLevel;\r\n        }),\r\n        margin: ref(20),\r\n        frame: ref(''),\r\n        background: ref(''),\r\n        logo: computed(() =>\r\n            collections.selectedLogo ? collections.selectedLogo.path : collections.selectedLogo\r\n        ),\r\n        eye: computed(() =>\r\n            collections.selectedEye ? collections.selectedEye.path : collections.selectedEye\r\n        ),\r\n        element: computed(() =>\r\n            collections.selectedElement ? collections.selectedElement.path : collections.selectedElement\r\n        ),\r\n        fill: collectionRefs.fill,\r\n        eyeOuter: collectionRefs.eyeOuter,\r\n        eyeInner: collectionRefs.eyeInner,\r\n        eyeRotate: ref(true),\r\n        logoStyle: collectionRefs.logoStyle,\r\n        logoShadow: collectionRefs.logoShadow,\r\n        fontText: collectionRefs.fontText,\r\n        fontFamily: collectionRefs.fontFamily,\r\n        fontSize: collectionRefs.fontSize,\r\n        fontColor: collectionRefs.fontColor,\r\n        fontStyle: collectionRefs.fontStyle,\r\n        textAlign: collectionRefs.textAlign,\r\n        qrPosition: ref(null),\r\n        textPosition: ref(null),\r\n    };\r\n\r\n    function applyPreset(config, old) {\r\n        dblog('--- QrEditor set preset ---', config);\r\n        presetKeys.forEach((key) => {\r\n            switch (key) {\r\n                case 'margin':\r\n                    qrConfig.margin.value = Number.parseInt(config.margin) || 20;\r\n                    break;\r\n                case 'element':\r\n                    if (Object.keys(config.element).length) {\r\n                        collections.selectedElement = { presetId: config.id, path: config.element };\r\n                    } else if (config.element && typeof config.element === 'string') {\r\n                        let element = collections.elements.filter((value) => value.path === config.element);\r\n                        collections.selectedElement = element[0] || null;\r\n                    } else {\r\n                        let id = Number.parseInt(config.element) || 0,\r\n                            element = collections.elements.filter((value) => value.id === id);\r\n                        collections.selectedElement = element[0] || null;\r\n                    }\r\n                    break;\r\n                case 'eye':\r\n                    if (config.eye && typeof config.eye === 'string') {\r\n                        collections.selectedEye = { presetId: config.id, path: config.eye };\r\n                    } else {\r\n                        let id = Number.parseInt(config.eye) || 0,\r\n                            eye = collections.eyes.filter((value) => value.id === id);\r\n                        collections.selectedEye = eye[0] || null;\r\n                    }\r\n                    break;\r\n                case 'fill':\r\n                    if ((config.fill && typeof config.fill === 'string') || Array.isArray(config.fill)) {\r\n                        collections.fill = config.fill;\r\n                    } else collections.fill = null; //默认颜色\r\n                    break;\r\n                case 'frame':\r\n                case 'eyeInner':\r\n                case 'eyeOuter':\r\n                    qrConfig[key].value = config[key] && typeof config[key] === 'string' ? config[key] : '';\r\n                    break;\r\n                case 'eyeRotate':\r\n                    qrConfig[key].value = config[key] !== 'no';\r\n                    break;\r\n                case 'qrPosition':\r\n                case 'textPosition':\r\n                default:\r\n                    qrConfig[key].value = config[key] || null;\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    function resetPreset() {\r\n        let textLength = countStr(qrConfig.qrText.value);\r\n        collections.textLength = textLength;\r\n        if (\r\n            textLength > 200 &&\r\n            (Object.keys(collections.selectedPreset.element).length ||\r\n                collections.selectedPreset.element === 6)\r\n        ) {\r\n            notification.warning({\r\n                message: '系统提醒',\r\n                description: '由于您输入的字数超出模板限制，已自动切换至默认模板',\r\n                duration: 8,\r\n            });\r\n            collections.selectedPreset = collections.presets[0].items[0];\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    async function addImage(key, file) {\r\n        if (!collections[key] || !checkImg(file)) return;\r\n        let svg = await fileToSvg(file);\r\n        if (!svg) return;\r\n\r\n        let image = {\r\n            id: Date.now(),\r\n            view: `data:image/svg+xml;utf8,${encodeURIComponent(svg)}`,\r\n            path: svg,\r\n        };\r\n        collections[key].push(image);\r\n        collections.selectedLogo = collections[key][collections[key].length - 1];\r\n    }\r\n    function removeImage(key, file) {\r\n        if (!collections[key]) return;\r\n        let index = collections[key].indexOf(file);\r\n        if (index < 0) return;\r\n\r\n        collections[key].splice(index, 1);\r\n        collections.selectedLogo === file && (collections.selectedLogo = null);\r\n    }\r\n    async function initConfig() {\r\n        let api,\r\n            cache = 60000,\r\n            resource = ls.get('__CACHE__'),\r\n            userConfig = ls.get('__USER__');\r\n\r\n        dblog('--- QrEditor init ---');\r\n        if (!resource || !resource.expireTime || !(Date.now() - resource.expireTime < 0)) {\r\n            ({ api, cache, resource } = await request.getSettings());\r\n            dblog('--- QrEditor request for settings ---', resource);\r\n\r\n            ['elements', 'eyes', 'logos'].forEach((key) => {\r\n                resource[key] = resource[key].map((item) => ({\r\n                    ...item,\r\n                    view: item.view ? api.home + item.view : '',\r\n                }));\r\n            });\r\n            resource.presets.forEach((category) => {\r\n                category.items = category.items.map((item) => ({ ...item, view: api.home + item.view }));\r\n            });\r\n            let fontDetector = new FontDetect();\r\n            resource.fonts = resource.fonts.filter((item) => fontDetector.detect(item.name));\r\n            resource.expireTime = resource.expireTime || Date.now() + Number.parseInt(cache);\r\n        }\r\n        dblog('--- QrEditor resource ---', resource);\r\n\r\n        if (!userConfig || typeof userConfig === 'string') {\r\n            userConfig = {\r\n                selectedPreset: resource.presets[0].items[0],\r\n                fontFamily: resource.fonts[0].name,\r\n            };\r\n            dblog('QrEditor get useConfig from request', userConfig);\r\n        }\r\n        if (userConfig.selectedElement) {\r\n            let data = resource.elements.filter((item) => item.id === userConfig.selectedElement.id);\r\n            userConfig.selectedElement = data[0] || userConfig.selectedElement;\r\n        }\r\n        if (userConfig.selectedEye) {\r\n            let data = resource.eyes.filter((item) => item.id === userConfig.selectedEye.id);\r\n            userConfig.selectedEye = data[0] || userConfig.selectedEye;\r\n        }\r\n        if (userConfig.fill) {\r\n            let data = [...resource.colors, ...resource.gdColors].filter(\r\n                (item) => item.toString() === userConfig.fill.toString()\r\n            );\r\n            userConfig.fill = data[0] || userConfig.fill;\r\n        }\r\n        if (userConfig.userLogos) userConfig.userLogos = reactive(userConfig.userLogos);\r\n\r\n        dblog('--- QrEditor useConfig ---', userConfig);\r\n        //初始化 useconfig\r\n        Object.assign(collections, resource, { selectedPreset: userConfig.selectedPreset }); //用户选择的模板\r\n        nextTick(() => {\r\n            delete userConfig.selectedPreset;\r\n            Object.assign(collections, userConfig); //用户其他设置\r\n        });\r\n        dblog('--- QrEditor init finish ---');\r\n    }\r\n    function saveConfig() {\r\n        if (!collections.selectedPreset) ls.remove('__CACHE__');\r\n        else {\r\n            // 保存 useconfig\r\n            ls.set('__CACHE__', filterObj(collections, resourceKeys));\r\n            ls.set('__USER__', filterObj(collections, userConfigKeys));\r\n        }\r\n    }\r\n\r\n    watch(collectionRefs.selectedPreset, applyPreset); //监听 selectedPreset\r\n    onMounted(() => {\r\n        (!window.Blob || !window.URL || !window.URL.createObjectURL) && window.unsupport();\r\n        initConfig();\r\n    });\r\n    onBeforeUnmount(() => saveConfig());\r\n    window.onbeforeunload = () => saveConfig();\r\n\r\n    return {\r\n        collectionRefs,\r\n        qrConfig,\r\n        addImage,\r\n        removeImage,\r\n        resetPreset,\r\n    };\r\n}\r\n","import { render } from \"./QrEditor.vue?vue&type=template&id=cf746f46&scoped=true\"\nimport script from \"./QrEditor.vue?vue&type=script&lang=js\"\nexport * from \"./QrEditor.vue?vue&type=script&lang=js\"\n\nimport \"./QrEditor.vue?vue&type=style&index=0&id=cf746f46&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\Workspace\\\\tuzim.net\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cf746f46\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar isCallable = require('../internals/is-callable');\nvar isRegExp = require('../internals/is-regexp');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar getRegExpFlags = require('../internals/regexp-get-flags');\nvar getSubstitution = require('../internals/get-substitution');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar REPLACE = wellKnownSymbol('replace');\nvar TypeError = global.TypeError;\nvar indexOf = uncurryThis(''.indexOf);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\nvar max = Math.max;\n\nvar stringIndexOf = function (string, searchValue, fromIndex) {\n  if (fromIndex > string.length) return -1;\n  if (searchValue === '') return fromIndex;\n  return indexOf(string, searchValue, fromIndex);\n};\n\n// `String.prototype.replaceAll` method\n// https://tc39.es/ecma262/#sec-string.prototype.replaceall\n$({ target: 'String', proto: true }, {\n  replaceAll: function replaceAll(searchValue, replaceValue) {\n    var O = requireObjectCoercible(this);\n    var IS_REG_EXP, flags, replacer, string, searchString, functionalReplace, searchLength, advanceBy, replacement;\n    var position = 0;\n    var endOfLastMatch = 0;\n    var result = '';\n    if (searchValue != null) {\n      IS_REG_EXP = isRegExp(searchValue);\n      if (IS_REG_EXP) {\n        flags = toString(requireObjectCoercible(getRegExpFlags(searchValue)));\n        if (!~indexOf(flags, 'g')) throw TypeError('`.replaceAll` does not allow non-global regexes');\n      }\n      replacer = getMethod(searchValue, REPLACE);\n      if (replacer) {\n        return call(replacer, searchValue, O, replaceValue);\n      } else if (IS_PURE && IS_REG_EXP) {\n        return replace(toString(O), searchValue, replaceValue);\n      }\n    }\n    string = toString(O);\n    searchString = toString(searchValue);\n    functionalReplace = isCallable(replaceValue);\n    if (!functionalReplace) replaceValue = toString(replaceValue);\n    searchLength = searchString.length;\n    advanceBy = max(1, searchLength);\n    position = stringIndexOf(string, searchString, 0);\n    while (position !== -1) {\n      replacement = functionalReplace\n        ? toString(replaceValue(searchString, position, string))\n        : getSubstitution(searchString, string, position, [], undefined, replaceValue);\n      result += stringSlice(string, endOfLastMatch, position) + replacement;\n      endOfLastMatch = position + searchLength;\n      position = stringIndexOf(string, searchString, position + advanceBy);\n    }\n    if (endOfLastMatch < string.length) {\n      result += stringSlice(string, endOfLastMatch);\n    }\n    return result;\n  }\n});\n","import { Modal } from 'ant-design-vue';\nimport { Svg } from '@svgdotjs/svg.js';\nimport 'canvas-toBlob';\n\nexport function countStr(str) {\n    if (!str) return 0;\n    var len = 0;\n    for (var i = 0; i < str.length; i++) {\n        var charcode = str.charCodeAt(i);\n        if (charcode < 0x80) len += 1;\n        else if (charcode < 0x800) len += 2;\n        else if (charcode < 0xd800 || charcode >= 0xe000) len += 3;\n        else {\n            // surrogate pair            // UTF-16 encodes 0x10000-0x10FFFF by\n            i++; // subtracting 0x10000 and splitting the\n            len += 4; // 20 bits of 0x0-0xFFFFF into two halves\n        }\n    }\n    return len;\n}\n\nexport function filterObj(obj, keys) {\n    let filteredObj = {};\n    Object.keys(obj).forEach((key) => {\n        keys.includes(key) && (filteredObj[key] = obj[key]);\n    });\n    return filteredObj;\n}\n\nexport function getTime(delimiter) {\n    var date = new Date(),\n        time = [\n            date.getFullYear(),\n            date.getMonth() + 1,\n            date.getDate(),\n            9999,\n            date.getHours(),\n            date.getMinutes(),\n            date.getSeconds(),\n        ].map((val) => {\n            return (val < 10 ? '0' : '') + val;\n        });\n    delimiter = delimiter || '-';\n    return time.join(delimiter).replace(`${delimiter}9999${delimiter}`, '_');\n}\n\nexport function dragUpload(selector, uploadFun) {\n    let el = document.querySelector(selector),\n        tip = document.createElement('div'),\n        count = 0;\n    el.style.position = 'relative';\n    tip.className = 'mask';\n    tip.innerHTML = '<p>松开鼠标，即上传图片解码</p>';\n\n    el.ondragenter = (e) => {\n        e.preventDefault();\n        !count && el.appendChild(tip);\n        count++;\n    };\n    el.ondragover = (e) => {\n        e.preventDefault();\n    };\n    el.ondragleave = (e) => {\n        e.preventDefault();\n        count--;\n        !count && el.removeChild(tip);\n    };\n    el.ondrop = (e) => {\n        e.preventDefault();\n        count = 0;\n        !count && el.removeChild(tip);\n        if (!e.dataTransfer.files || !e.dataTransfer.files.length) {\n            // Modal.error({ content: '未上传图片!' });\n            return;\n        }\n        uploadFun && uploadFun(e.dataTransfer.files[0]);\n    };\n}\n\nexport function unDragUpload(selector) {\n    let el = document.querySelector(selector);\n    el.ondragenter = el.ondragover = el.ondragleave = el.ondrop = null;\n}\n\nexport function isUrl(url) {\n    let pattern = /^https?:\\/\\/(?!localhost|127.0)[\\w-]+\\.\\w+/;\n    return pattern.test(url);\n}\n\nexport async function isBase64Image(url) {\n    let image = null;\n    if (url.startsWith('data:')) image = await loadImage(url, true);\n    return !!image;\n}\n\nexport function checkImg(file, size) {\n    const list = ['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/webp', 'image/svg+xml'];\n    if (!file || !file.type || !list.includes(file.type)) {\n        Modal.error({ content: '只能上传 JPG/PNG/GIF/WEBP/SVG 格式图片!' });\n        return false;\n    }\n    size = size || 2;\n    if (file.size > size * 1024 * 1024) {\n        Modal.error({ content: `图片大小不能超过 ${size} MB!` });\n        return false;\n    }\n    return true;\n}\n\nexport function readFileAsUrl(file) {\n    return new Promise((resolve, reject) => {\n        if (!file) return resolve(null);\n        let reader = new FileReader();\n        reader.onload = (event) => {\n            resolve(event.target.result);\n        };\n        reader.onerror = () => {\n            Modal.error({ content: '文件读取出错!' });\n            resolve(null);\n        };\n        reader.readAsDataURL(file);\n    });\n}\n\nexport function loadImage(src, silent) {\n    return new Promise((resolve, reject) => {\n        if (!src) return resolve(null);\n        let img = new Image();\n        img.onload = () => {\n            resolve(img);\n        };\n        img.onerror = () => {\n            !silent && Modal.error({ content: '图片加载错误!' });\n            resolve(null);\n        };\n        img.src = src;\n    });\n}\n\nexport function resizeImage(img, maxSize) {\n    let originWidth = img.width,\n        originHeight = img.height,\n        scale = maxSize / Math.max(originWidth, originHeight),\n        width = Math.floor(originWidth * scale),\n        height = Math.floor(originHeight * scale);\n    return { width, height };\n}\n\nexport async function fileToImage(file) {\n    let url = await readFileAsUrl(file),\n        image = await loadImage(url);\n    return image;\n}\n\nlet globalCanvas = null;\nexport function initGlobalCanvas() {\n    return globalCanvas || (globalCanvas = document.createElement('canvas'));\n}\n\nexport function imageDataToCanvas(imageData) {\n    let canvas = initGlobalCanvas(),\n        context = canvas.getContext('2d');\n    canvas.width = imageData.width;\n    canvas.height = imageData.height;\n    context.clearRect(0, 0, imageData.width, imageData.height);\n    context.putImageData(imageData, 0, 0);\n    // document.body.appendChild(canvas);\n    return canvas;\n}\n\nexport function imageToCanvas(img, maxSize) {\n    let canvas = initGlobalCanvas(),\n        context = canvas.getContext('2d'),\n        { width, height } = resizeImage(img, maxSize);\n    canvas.width = width;\n    canvas.height = height;\n    context.clearRect(0, 0, width, height);\n    context.drawImage(img, 0, 0, width, height);\n    return canvas;\n}\n\nexport function imageToBlob(img, size, mime, quality) {\n    return new Promise(async (resolve, reject) => {\n        let canvas = imageToCanvas(img, size);\n        canvas.toBlob((blob) => resolve(blob), mime, quality);\n    });\n}\n\nexport function imageToImageData(img, toSize) {\n    let canvas = imageToCanvas(img, toSize),\n        context = canvas.getContext('2d');\n    return context.getImageData(0, 0, canvas.width, canvas.height);\n}\n\nexport async function fileToSvg(file) {\n    let image = await fileToImage(file);\n    if (!image) return null;\n\n    let { width, height } = resizeImage(image, 300),\n        base64 =\n            file.type === 'image/svg+xml'\n                ? image.src\n                : imageToCanvas(image, 300).toDataURL('image/jpeg', 0.8);\n\n    let svg = new Svg().move(0, 0).size(width, height).viewbox(0, 0, width, height);\n    svg.image(base64).move(0, 0).size(width, height);\n    return svg.svg();\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./QrLogo.vue?vue&type=style&index=0&id=69511ecc&lang=less&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./QrEditor.vue?vue&type=style&index=0&id=cf746f46&lang=less&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./QrColor.vue?vue&type=style&index=0&id=7c503a40&lang=less&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\n\nvar charAt = uncurryThis(''.charAt);\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es-x/no-array-string-prototype-at -- safe\n  return '𠮷'.at(-2) !== '\\uD842';\n});\n\n// `String.prototype.at` method\n// https://github.com/tc39/proposal-relative-indexing-method\n$({ target: 'String', proto: true, forced: FORCED }, {\n  at: function at(index) {\n    var S = toString(requireObjectCoercible(this));\n    var len = S.length;\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : charAt(S, k);\n  }\n});\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Pickr\"] = factory();\n\telse\n\t\troot[\"Pickr\"] = factory();\n})(self, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable prefer-rest-params */\r\nfunction eventListener(method, elements, events, fn, options = {}) {\r\n\r\n    // Normalize array\r\n    if (elements instanceof HTMLCollection || elements instanceof NodeList) {\r\n        elements = Array.from(elements);\r\n    } else if (!Array.isArray(elements)) {\r\n        elements = [elements];\r\n    }\r\n\r\n    if (!Array.isArray(events)) {\r\n        events = [events];\r\n    }\r\n\r\n    for (const el of elements) {\r\n        for (const ev of events) {\r\n            el[method](ev, fn, {capture: false, ...options});\r\n        }\r\n    }\r\n\r\n    return Array.prototype.slice.call(arguments, 1);\r\n}\r\n\r\n/**\r\n * Add event(s) to element(s).\r\n * @param elements DOM-Elements\r\n * @param events Event names\r\n * @param fn Callback\r\n * @param options Optional options\r\n * @return Array passed arguments\r\n */\r\nexport const on = eventListener.bind(null, 'addEventListener');\r\n\r\n/**\r\n * Remove event(s) from element(s).\r\n * @param elements DOM-Elements\r\n * @param events Event names\r\n * @param fn Callback\r\n * @param options Optional options\r\n * @return Array passed arguments\r\n */\r\nexport const off = eventListener.bind(null, 'removeEventListener');\r\n\r\n/**\r\n * Creates an DOM-Element out of a string (Single element).\r\n * @param html HTML representing a single element\r\n * @returns {Element | null} The element.\r\n */\r\nexport function createElementFromString(html) {\r\n    const div = document.createElement('div');\r\n    div.innerHTML = html.trim();\r\n    return div.firstElementChild;\r\n}\r\n\r\n/**\r\n * Creates a new html element, every element which has\r\n * a ':ref' attribute will be saved in a object (which will be returned)\r\n * where the value of ':ref' is the object-key and the value the HTMLElement.\r\n *\r\n * It's possible to create a hierarchy if you add a ':obj' attribute. Every\r\n * sibling will be added to the object which will get the name from the 'data-con' attribute.\r\n *\r\n * If you want to create an Array out of multiple elements, you can use the ':arr' attribute,\r\n * the value defines the key and all elements, which has the same parent and the same 'data-arr' attribute,\r\n * would be added to it.\r\n *\r\n * @param str - The HTML String.\r\n */\r\n\r\nexport function createFromTemplate(str) {\r\n\r\n    // Removes an attribute from a HTMLElement and returns the value.\r\n    const removeAttribute = (el, name) => {\r\n        const value = el.getAttribute(name);\r\n        el.removeAttribute(name);\r\n        return value;\r\n    };\r\n\r\n    // Recursive function to resolve template\r\n    const resolve = (element, base = {}) => {\r\n\r\n        // Check key and container attribute\r\n        const con = removeAttribute(element, ':obj');\r\n        const key = removeAttribute(element, ':ref');\r\n        const subtree = con ? (base[con] = {}) : base;\r\n\r\n        // Check and save element\r\n        key && (base[key] = element);\r\n        for (const child of Array.from(element.children)) {\r\n            const arr = removeAttribute(child, ':arr');\r\n            const sub = resolve(child, arr ? {} : subtree);\r\n\r\n            if (arr) {\r\n\r\n                // Check if there is already an array and add element\r\n                (subtree[arr] || (subtree[arr] = []))\r\n                    .push(Object.keys(sub).length ? sub : child);\r\n            }\r\n        }\r\n\r\n        return base;\r\n    };\r\n\r\n    return resolve(createElementFromString(str));\r\n}\r\n\r\n/**\r\n * Polyfill for safari & firefox for the eventPath event property.\r\n * @param evt The event object.\r\n * @return [String] event path.\r\n */\r\nexport function eventPath(evt) {\r\n    let path = evt.path || (evt.composedPath && evt.composedPath());\r\n    if (path) {\r\n        return path;\r\n    }\r\n\r\n    let el = evt.target.parentElement;\r\n    path = [evt.target, el];\r\n    while (el = el.parentElement) {\r\n        path.push(el);\r\n    }\r\n\r\n    path.push(document, window);\r\n    return path;\r\n}\r\n\r\n/**\r\n * Resolves a HTMLElement by query.\r\n * @param val\r\n * @returns {null|Document|Element}\r\n */\r\nexport function resolveElement(val) {\r\n    if (val instanceof Element) {\r\n        return val;\r\n    } else if (typeof val === 'string') {\r\n        return val.split(/>>/g).reduce((pv, cv, ci, a) => {\r\n            pv = pv.querySelector(cv);\r\n            return ci < a.length - 1 ? pv.shadowRoot : pv;\r\n        }, document);\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Creates the ability to change numbers in an input field with the scroll-wheel.\r\n * @param el\r\n * @param mapper\r\n */\r\nexport function adjustableInputNumbers(el, mapper = v => v) {\r\n\r\n    function handleScroll(e) {\r\n        const inc = ([0.001, 0.01, 0.1])[Number(e.shiftKey || e.ctrlKey * 2)] * (e.deltaY < 0 ? 1 : -1);\r\n\r\n        let index = 0;\r\n        let off = el.selectionStart;\r\n        el.value = el.value.replace(/[\\d.]+/g, (v, i) => {\r\n\r\n            // Check if number is in cursor range and increase it\r\n            if (i <= off && i + v.length >= off) {\r\n                off = i;\r\n                return mapper(Number(v), inc, index);\r\n            }\r\n\r\n            index++;\r\n            return v;\r\n        });\r\n\r\n        el.focus();\r\n        el.setSelectionRange(off, off);\r\n\r\n        // Prevent default and trigger input event\r\n        e.preventDefault();\r\n        el.dispatchEvent(new Event('input'));\r\n    }\r\n\r\n    // Bind events\r\n    on(el, 'focus', () => on(window, 'wheel', handleScroll, {passive: false}));\r\n    on(el, 'blur', () => off(window, 'wheel', handleScroll));\r\n}\r\n","// Shorthands\r\nconst {min, max, floor, round} = Math;\r\n\r\n/**\r\n * Tries to convert a color name to rgb/a hex representation\r\n * @param name\r\n * @returns {string | CanvasGradient | CanvasPattern}\r\n */\r\nfunction standardizeColor(name) {\r\n\r\n    // Since invalid color's will be parsed as black, filter them out\r\n    if (name.toLowerCase() === 'black') {\r\n        return '#000';\r\n    }\r\n\r\n    const ctx = document.createElement('canvas').getContext('2d');\r\n    ctx.fillStyle = name;\r\n    return ctx.fillStyle === '#000' ? null : ctx.fillStyle;\r\n}\r\n\r\n/**\r\n * Convert HSV spectrum to RGB.\r\n * @param h Hue\r\n * @param s Saturation\r\n * @param v Value\r\n * @returns {number[]} Array with rgb values.\r\n */\r\nexport function hsvToRgb(h, s, v) {\r\n    h = (h / 360) * 6;\r\n    s /= 100;\r\n    v /= 100;\r\n\r\n    const i = floor(h);\r\n\r\n    const f = h - i;\r\n    const p = v * (1 - s);\r\n    const q = v * (1 - f * s);\r\n    const t = v * (1 - (1 - f) * s);\r\n\r\n    const mod = i % 6;\r\n    const r = [v, q, p, p, t, v][mod];\r\n    const g = [t, v, v, q, p, p][mod];\r\n    const b = [p, p, t, v, v, q][mod];\r\n\r\n    return [\r\n        r * 255,\r\n        g * 255,\r\n        b * 255\r\n    ];\r\n}\r\n\r\n/**\r\n * Convert HSV spectrum to Hex.\r\n * @param h Hue\r\n * @param s Saturation\r\n * @param v Value\r\n * @returns {string[]} Hex values\r\n */\r\nexport function hsvToHex(h, s, v) {\r\n    return hsvToRgb(h, s, v).map(v =>\r\n        round(v).toString(16).padStart(2, '0')\r\n    );\r\n}\r\n\r\n/**\r\n * Convert HSV spectrum to CMYK.\r\n * @param h Hue\r\n * @param s Saturation\r\n * @param v Value\r\n * @returns {number[]} CMYK values\r\n */\r\nexport function hsvToCmyk(h, s, v) {\r\n    const rgb = hsvToRgb(h, s, v);\r\n    const r = rgb[0] / 255;\r\n    const g = rgb[1] / 255;\r\n    const b = rgb[2] / 255;\r\n\r\n    const k = min(1 - r, 1 - g, 1 - b);\r\n    const c = k === 1 ? 0 : (1 - r - k) / (1 - k);\r\n    const m = k === 1 ? 0 : (1 - g - k) / (1 - k);\r\n    const y = k === 1 ? 0 : (1 - b - k) / (1 - k);\r\n\r\n    return [\r\n        c * 100,\r\n        m * 100,\r\n        y * 100,\r\n        k * 100\r\n    ];\r\n}\r\n\r\n/**\r\n * Convert HSV spectrum to HSL.\r\n * @param h Hue\r\n * @param s Saturation\r\n * @param v Value\r\n * @returns {number[]} HSL values\r\n */\r\nexport function hsvToHsl(h, s, v) {\r\n    s /= 100;\r\n    v /= 100;\r\n\r\n    const l = (2 - s) * v / 2;\r\n\r\n    if (l !== 0) {\r\n        if (l === 1) {\r\n            s = 0;\r\n        } else if (l < 0.5) {\r\n            s = s * v / (l * 2);\r\n        } else {\r\n            s = s * v / (2 - l * 2);\r\n        }\r\n    }\r\n\r\n    return [\r\n        h,\r\n        s * 100,\r\n        l * 100\r\n    ];\r\n}\r\n\r\n/**\r\n * Convert RGB to HSV.\r\n * @param r Red\r\n * @param g Green\r\n * @param b Blue\r\n * @return {number[]} HSV values.\r\n */\r\nfunction rgbToHsv(r, g, b) {\r\n    r /= 255;\r\n    g /= 255;\r\n    b /= 255;\r\n\r\n    const minVal = min(r, g, b);\r\n    const maxVal = max(r, g, b);\r\n    const delta = maxVal - minVal;\r\n\r\n    let h, s;\r\n    const v = maxVal;\r\n    if (delta === 0) {\r\n        h = s = 0;\r\n    } else {\r\n        s = delta / maxVal;\r\n        const dr = (((maxVal - r) / 6) + (delta / 2)) / delta;\r\n        const dg = (((maxVal - g) / 6) + (delta / 2)) / delta;\r\n        const db = (((maxVal - b) / 6) + (delta / 2)) / delta;\r\n\r\n        if (r === maxVal) {\r\n            h = db - dg;\r\n        } else if (g === maxVal) {\r\n            h = (1 / 3) + dr - db;\r\n        } else if (b === maxVal) {\r\n            h = (2 / 3) + dg - dr;\r\n        }\r\n\r\n        if (h < 0) {\r\n            h += 1;\r\n        } else if (h > 1) {\r\n            h -= 1;\r\n        }\r\n    }\r\n\r\n    return [\r\n        h * 360,\r\n        s * 100,\r\n        v * 100\r\n    ];\r\n}\r\n\r\n/**\r\n * Convert CMYK to HSV.\r\n * @param c Cyan\r\n * @param m Magenta\r\n * @param y Yellow\r\n * @param k Key (Black)\r\n * @return {number[]} HSV values.\r\n */\r\nfunction cmykToHsv(c, m, y, k) {\r\n    c /= 100;\r\n    m /= 100;\r\n    y /= 100;\r\n    k /= 100;\r\n\r\n    const r = (1 - min(1, c * (1 - k) + k)) * 255;\r\n    const g = (1 - min(1, m * (1 - k) + k)) * 255;\r\n    const b = (1 - min(1, y * (1 - k) + k)) * 255;\r\n\r\n    return [...rgbToHsv(r, g, b)];\r\n}\r\n\r\n/**\r\n * Convert HSL to HSV.\r\n * @param h Hue\r\n * @param s Saturation\r\n * @param l Lightness\r\n * @return {number[]} HSV values.\r\n */\r\nfunction hslToHsv(h, s, l) {\r\n    s /= 100;\r\n    l /= 100;\r\n    s *= l < 0.5 ? l : 1 - l;\r\n\r\n    const ns = (2 * s / (l + s)) * 100;\r\n    const v = (l + s) * 100;\r\n    return [h, isNaN(ns) ? 0 : ns, v];\r\n}\r\n\r\n/**\r\n * Convert HEX to HSV.\r\n * @param hex Hexadecimal string of rgb colors, can have length 3 or 6.\r\n * @return {number[]} HSV values.\r\n */\r\nfunction hexToHsv(hex) {\r\n    return rgbToHsv(...hex.match(/.{2}/g).map(v => parseInt(v, 16)));\r\n}\r\n\r\n/**\r\n * Try's to parse a string which represents a color to a HSV array.\r\n * Current supported types are cmyk, rgba, hsla and hexadecimal.\r\n * @param str\r\n * @return {*}\r\n */\r\nexport function parseToHSVA(str) {\r\n\r\n    // Check if string is a color-name\r\n    str = str.match(/^[a-zA-Z]+$/) ? standardizeColor(str) : str;\r\n\r\n    // Regular expressions to match different types of color represention\r\n    const regex = {\r\n        cmyk: /^cmyk[\\D]+([\\d.]+)[\\D]+([\\d.]+)[\\D]+([\\d.]+)[\\D]+([\\d.]+)/i,\r\n        rgba: /^((rgba)|rgb)[\\D]+([\\d.]+)[\\D]+([\\d.]+)[\\D]+([\\d.]+)[\\D]*?([\\d.]+|$)/i,\r\n        hsla: /^((hsla)|hsl)[\\D]+([\\d.]+)[\\D]+([\\d.]+)[\\D]+([\\d.]+)[\\D]*?([\\d.]+|$)/i,\r\n        hsva: /^((hsva)|hsv)[\\D]+([\\d.]+)[\\D]+([\\d.]+)[\\D]+([\\d.]+)[\\D]*?([\\d.]+|$)/i,\r\n        hexa: /^#?(([\\dA-Fa-f]{3,4})|([\\dA-Fa-f]{6})|([\\dA-Fa-f]{8}))$/i\r\n    };\r\n\r\n    /**\r\n     * Takes an Array of any type, convert strings which represents\r\n     * a number to a number an anything else to undefined.\r\n     * @param array\r\n     * @return {*}\r\n     */\r\n    const numarize = array => array.map(v => /^(|\\d+)\\.\\d+|\\d+$/.test(v) ? Number(v) : undefined);\r\n\r\n    let match;\r\n    invalid: for (const type in regex) {\r\n\r\n        // Check if current scheme passed\r\n        if (!(match = regex[type].exec(str))) {\r\n            continue;\r\n        }\r\n\r\n        // Match[2] does only contain a truly value if rgba, hsla, or hsla got matched\r\n        const alphaValid = a => (!!match[2] === (typeof a === 'number'));\r\n\r\n        // Try to convert\r\n        switch (type) {\r\n            case 'cmyk': {\r\n                const [, c, m, y, k] = numarize(match);\r\n\r\n                if (c > 100 || m > 100 || y > 100 || k > 100) {\r\n                    break invalid;\r\n                }\r\n\r\n                return {values: cmykToHsv(c, m, y, k), type};\r\n            }\r\n            case 'rgba': {\r\n                const [, , , r, g, b, a] = numarize(match);\r\n\r\n                if (r > 255 || g > 255 || b > 255 || a < 0 || a > 1 || !alphaValid(a)) {\r\n                    break invalid;\r\n                }\r\n\r\n                return {values: [...rgbToHsv(r, g, b), a], a, type};\r\n            }\r\n            case 'hexa': {\r\n                let [, hex] = match;\r\n\r\n                if (hex.length === 4 || hex.length === 3) {\r\n                    hex = hex.split('').map(v => v + v).join('');\r\n                }\r\n\r\n                const raw = hex.substring(0, 6);\r\n                let a = hex.substring(6);\r\n\r\n                // Convert 0 - 255 to 0 - 1 for opacity\r\n                a = a ? (parseInt(a, 16) / 255) : undefined;\r\n\r\n                return {values: [...hexToHsv(raw), a], a, type};\r\n            }\r\n            case 'hsla': {\r\n                const [, , , h, s, l, a] = numarize(match);\r\n\r\n                if (h > 360 || s > 100 || l > 100 || a < 0 || a > 1 || !alphaValid(a)) {\r\n                    break invalid;\r\n                }\r\n\r\n                return {values: [...hslToHsv(h, s, l), a], a, type};\r\n            }\r\n            case 'hsva': {\r\n                const [, , , h, s, v, a] = numarize(match);\r\n\r\n                if (h > 360 || s > 100 || v > 100 || a < 0 || a > 1 || !alphaValid(a)) {\r\n                    break invalid;\r\n                }\r\n\r\n                return {values: [h, s, v, a], a, type};\r\n            }\r\n        }\r\n    }\r\n\r\n    return {values: null, type: null};\r\n}\r\n","import {hsvToCmyk, hsvToHex, hsvToHsl, hsvToRgb} from './color';\r\n\r\n/**\r\n * Simple class which holds the properties\r\n * of the color represention model hsla (hue saturation lightness alpha)\r\n */\r\nexport function HSVaColor(h = 0, s = 0, v = 0, a = 1) {\r\n    const mapper = (original, next) => (precision = -1) => {\r\n        return next(~precision ? original.map(v => Number(v.toFixed(precision))) : original);\r\n    };\r\n\r\n    const that = {\r\n        h, s, v, a,\r\n\r\n        toHSVA() {\r\n            const hsva = [that.h, that.s, that.v, that.a];\r\n            hsva.toString = mapper(hsva, arr => `hsva(${arr[0]}, ${arr[1]}%, ${arr[2]}%, ${that.a})`);\r\n            return hsva;\r\n        },\r\n\r\n        toHSLA() {\r\n            const hsla = [...hsvToHsl(that.h, that.s, that.v), that.a];\r\n            hsla.toString = mapper(hsla, arr => `hsla(${arr[0]}, ${arr[1]}%, ${arr[2]}%, ${that.a})`);\r\n            return hsla;\r\n        },\r\n\r\n        toRGBA() {\r\n            const rgba = [...hsvToRgb(that.h, that.s, that.v), that.a];\r\n            rgba.toString = mapper(rgba, arr => `rgba(${arr[0]}, ${arr[1]}, ${arr[2]}, ${that.a})`);\r\n            return rgba;\r\n        },\r\n\r\n        toCMYK() {\r\n            const cmyk = hsvToCmyk(that.h, that.s, that.v);\r\n            cmyk.toString = mapper(cmyk, arr => `cmyk(${arr[0]}%, ${arr[1]}%, ${arr[2]}%, ${arr[3]}%)`);\r\n            return cmyk;\r\n        },\r\n\r\n        toHEXA() {\r\n            const hex = hsvToHex(that.h, that.s, that.v);\r\n\r\n            // Check if alpha channel make sense, convert it to 255 number space, convert\r\n            // To hex and pad it with zeros if needet.\r\n            const alpha = that.a >= 1 ? '' : Number((that.a * 255).toFixed(0))\r\n                .toString(16)\r\n                .toUpperCase().padStart(2, '0');\r\n\r\n            alpha && hex.push(alpha);\r\n            hex.toString = () => `#${hex.join('').toUpperCase()}`;\r\n            return hex;\r\n        },\r\n\r\n        clone: () => HSVaColor(that.h, that.s, that.v, that.a)\r\n    };\r\n\r\n    return that;\r\n}\r\n","import * as _ from '../utils/utils';\r\n\r\nconst clamp = v => Math.max(Math.min(v, 1), 0);\r\nexport default function Moveable(opt) {\r\n\r\n    const that = {\r\n\r\n        // Assign default values\r\n        options: Object.assign({\r\n            lock: null,\r\n            onchange: () => 0,\r\n            onstop: () => 0\r\n        }, opt),\r\n\r\n        _keyboard(e) {\r\n            const {options} = that;\r\n            const {type, key} = e;\r\n\r\n            // Check to see if the Movable is focused and then move it based on arrow key inputs\r\n            // For improved accessibility\r\n            if (document.activeElement === options.wrapper) {\r\n                const {lock} = that.options;\r\n                const up = key === 'ArrowUp';\r\n                const right = key === 'ArrowRight';\r\n                const down = key === 'ArrowDown';\r\n                const left = key === 'ArrowLeft';\r\n\r\n                if (type === 'keydown' && (up || right || down || left)) {\r\n                    let xm = 0;\r\n                    let ym = 0;\r\n\r\n                    if (lock === 'v') {\r\n                        xm = (up || right) ? 1 : -1;\r\n                    } else if (lock === 'h') {\r\n                        xm = (up || right) ? -1 : 1;\r\n                    } else {\r\n                        ym = up ? -1 : (down ? 1 : 0);\r\n                        xm = left ? -1 : (right ? 1 : 0);\r\n                    }\r\n\r\n                    that.update(\r\n                        clamp(that.cache.x + (0.01 * xm)),\r\n                        clamp(that.cache.y + (0.01 * ym))\r\n                    );\r\n                    e.preventDefault();\r\n                } else if (key.startsWith('Arrow')) {\r\n                    that.options.onstop();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        },\r\n\r\n        _tapstart(evt) {\r\n            _.on(document, ['mouseup', 'touchend', 'touchcancel'], that._tapstop);\r\n            _.on(document, ['mousemove', 'touchmove'], that._tapmove);\r\n\r\n            if (evt.cancelable) {\r\n                evt.preventDefault();\r\n            }\r\n\r\n            // Trigger\r\n            that._tapmove(evt);\r\n        },\r\n\r\n        _tapmove(evt) {\r\n            const {options, cache} = that;\r\n            const {lock, element, wrapper} = options;\r\n            const b = wrapper.getBoundingClientRect();\r\n\r\n            let x = 0, y = 0;\r\n            if (evt) {\r\n                const touch = evt && evt.touches && evt.touches[0];\r\n                x = evt ? (touch || evt).clientX : 0;\r\n                y = evt ? (touch || evt).clientY : 0;\r\n\r\n                // Reset to bounds\r\n                if (x < b.left) {\r\n                    x = b.left;\r\n                } else if (x > b.left + b.width) {\r\n                    x = b.left + b.width;\r\n                }\r\n                if (y < b.top) {\r\n                    y = b.top;\r\n                } else if (y > b.top + b.height) {\r\n                    y = b.top + b.height;\r\n                }\r\n\r\n                // Normalize\r\n                x -= b.left;\r\n                y -= b.top;\r\n            } else if (cache) {\r\n                x = cache.x * b.width;\r\n                y = cache.y * b.height;\r\n            }\r\n\r\n            if (lock !== 'h') {\r\n                element.style.left = `calc(${x / b.width * 100}% - ${element.offsetWidth / 2}px)`;\r\n            }\r\n\r\n            if (lock !== 'v') {\r\n                element.style.top = `calc(${y / b.height * 100}% - ${element.offsetHeight / 2}px)`;\r\n            }\r\n\r\n            that.cache = {x: x / b.width, y: y / b.height};\r\n            const cx = clamp(x / b.width);\r\n            const cy = clamp(y / b.height);\r\n\r\n            switch (lock) {\r\n                case 'v':\r\n                    return options.onchange(cx);\r\n                case 'h':\r\n                    return options.onchange(cy);\r\n                default:\r\n                    return options.onchange(cx, cy);\r\n            }\r\n        },\r\n\r\n        _tapstop() {\r\n            that.options.onstop();\r\n            _.off(document, ['mouseup', 'touchend', 'touchcancel'], that._tapstop);\r\n            _.off(document, ['mousemove', 'touchmove'], that._tapmove);\r\n        },\r\n\r\n        trigger() {\r\n            that._tapmove();\r\n        },\r\n\r\n        update(x = 0, y = 0) {\r\n            const {left, top, width, height} = that.options.wrapper.getBoundingClientRect();\r\n\r\n            if (that.options.lock === 'h') {\r\n                y = x;\r\n            }\r\n\r\n            that._tapmove({\r\n                clientX: left + width * x,\r\n                clientY: top + height * y\r\n            });\r\n        },\r\n\r\n        destroy() {\r\n            const {options, _tapstart, _keyboard} = that;\r\n            _.off(document, ['keydown', 'keyup'], _keyboard);\r\n            _.off([options.wrapper, options.element], 'mousedown', _tapstart);\r\n            _.off([options.wrapper, options.element], 'touchstart', _tapstart, {\r\n                passive: false\r\n            });\r\n        }\r\n    };\r\n\r\n    // Initilize\r\n    const {options, _tapstart, _keyboard} = that;\r\n    _.on([options.wrapper, options.element], 'mousedown', _tapstart);\r\n    _.on([options.wrapper, options.element], 'touchstart', _tapstart, {\r\n        passive: false\r\n    });\r\n\r\n    _.on(document, ['keydown', 'keyup'], _keyboard);\r\n\r\n    return that;\r\n}\r\n","import * as _ from '../utils/utils';\n\nexport default function Selectable(opt = {}) {\n    opt = Object.assign({\n        onchange: () => 0,\n        className: '',\n        elements: []\n    }, opt);\n\n    const onTap = _.on(opt.elements, 'click', evt => {\n        opt.elements.forEach(e =>\n            e.classList[evt.target === e ? 'add' : 'remove'](opt.className)\n        );\n\n        opt.onchange(evt);\n\n        // Fix for https://github.com/Simonwep/pickr/issues/243\n        evt.stopPropagation();\n    });\n\n    return {\n        destroy: () => _.off(...onTap)\n    };\n}\n","import * as _ from './utils/utils';\r\n\r\nexport default instance => {\r\n\r\n    const {\r\n        components,\r\n        useAsButton,\r\n        inline,\r\n        appClass,\r\n        theme,\r\n        lockOpacity\r\n    } = instance.options;\r\n\r\n    // Utils\r\n    const hidden = con => con ? '' : 'style=\"display:none\" hidden';\r\n    const t = str => instance._t(str);\r\n\r\n    const root = _.createFromTemplate(`\r\n      <div :ref=\"root\" class=\"pickr\">\r\n\r\n        ${useAsButton ? '' : '<button type=\"button\" :ref=\"button\" class=\"pcr-button\"></button>'}\r\n\r\n        <div :ref=\"app\" class=\"pcr-app ${appClass || ''}\" data-theme=\"${theme}\" ${inline ? 'style=\"position: unset\"' : ''} aria-label=\"${t('ui:dialog', 'color picker dialog')}\" role=\"window\">\r\n          <div class=\"pcr-selection\" ${hidden(components.palette)}>\r\n            <div :obj=\"preview\" class=\"pcr-color-preview\" ${hidden(components.preview)}>\r\n              <button type=\"button\" :ref=\"lastColor\" class=\"pcr-last-color\" aria-label=\"${t('btn:last-color')}\"></button>\r\n              <div :ref=\"currentColor\" class=\"pcr-current-color\"></div>\r\n            </div>\r\n\r\n            <div :obj=\"palette\" class=\"pcr-color-palette\">\r\n              <div :ref=\"picker\" class=\"pcr-picker\"></div>\r\n              <div :ref=\"palette\" class=\"pcr-palette\" tabindex=\"0\" aria-label=\"${t('aria:palette')}\" role=\"listbox\"></div>\r\n            </div>\r\n\r\n            <div :obj=\"hue\" class=\"pcr-color-chooser\" ${hidden(components.hue)}>\r\n              <div :ref=\"picker\" class=\"pcr-picker\"></div>\r\n              <div :ref=\"slider\" class=\"pcr-hue pcr-slider\" tabindex=\"0\" aria-label=\"${t('aria:hue')}\" role=\"slider\"></div>\r\n            </div>\r\n\r\n            <div :obj=\"opacity\" class=\"pcr-color-opacity\" ${hidden(components.opacity)}>\r\n              <div :ref=\"picker\" class=\"pcr-picker\"></div>\r\n              <div :ref=\"slider\" class=\"pcr-opacity pcr-slider\" tabindex=\"0\" aria-label=\"${t('aria:opacity', 'opacity selection slider')}\" role=\"slider\"></div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"pcr-swatches ${components.palette ? '' : 'pcr-last'}\" :ref=\"swatches\"></div>\r\n\r\n          <div :obj=\"interaction\" class=\"pcr-interaction\" ${hidden(Object.keys(components.interaction).length)}>\r\n            <input :ref=\"result\" class=\"pcr-result\" type=\"text\" spellcheck=\"false\" ${hidden(components.interaction.input)} aria-label=\"${t('aria:input', 'color input field')}\">\r\n\r\n            <input :arr=\"options\" class=\"pcr-type\" data-type=\"HEXA\" value=\"${lockOpacity ? 'HEX' : 'HEXA'}\" type=\"button\" ${hidden(components.interaction.hex)}>\r\n            <input :arr=\"options\" class=\"pcr-type\" data-type=\"RGBA\" value=\"${lockOpacity ? 'RGB' : 'RGBA'}\" type=\"button\" ${hidden(components.interaction.rgba)}>\r\n            <input :arr=\"options\" class=\"pcr-type\" data-type=\"HSLA\" value=\"${lockOpacity ? 'HSL' : 'HSLA'}\" type=\"button\" ${hidden(components.interaction.hsla)}>\r\n            <input :arr=\"options\" class=\"pcr-type\" data-type=\"HSVA\" value=\"${lockOpacity ? 'HSV' : 'HSVA'}\" type=\"button\" ${hidden(components.interaction.hsva)}>\r\n            <input :arr=\"options\" class=\"pcr-type\" data-type=\"CMYK\" value=\"CMYK\" type=\"button\" ${hidden(components.interaction.cmyk)}>\r\n\r\n            <input :ref=\"save\" class=\"pcr-save\" value=\"${t('btn:save')}\" type=\"button\" ${hidden(components.interaction.save)} aria-label=\"${t('aria:btn:save')}\">\r\n            <input :ref=\"cancel\" class=\"pcr-cancel\" value=\"${t('btn:cancel')}\" type=\"button\" ${hidden(components.interaction.cancel)} aria-label=\"${t('aria:btn:cancel')}\">\r\n            <input :ref=\"clear\" class=\"pcr-clear\" value=\"${t('btn:clear')}\" type=\"button\" ${hidden(components.interaction.clear)} aria-label=\"${t('aria:btn:clear')}\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `);\r\n\r\n    const int = root.interaction;\r\n\r\n    // Select option which is not hidden\r\n    int.options.find(o => !o.hidden && !o.classList.add('active'));\r\n\r\n    // Append method to find currently active option\r\n    int.type = () => int.options.find(e => e.classList.contains('active'));\r\n    return root;\r\n};\r\n","type Direction = 'top' | 'left' | 'bottom' | 'right';\n\nexport type VariantFlipOrder = {\n    start: string;\n    middle: string;\n    end: string;\n};\n\nexport type PositionFlipOrder = {\n    top: string;\n    right: string;\n    bottom: string;\n    left: string;\n};\n\nexport type NanoPopPosition =\n    'top-start' | 'top-middle' | 'top-end' |\n    'left-start' | 'left-middle' | 'left-end' |\n    'right-start' | 'right-middle' | 'right-end' |\n    'bottom-start' | 'bottom-middle' | 'bottom-end' | Direction;\n\nexport type NanoPopOptions = {\n    container: DOMRect;\n    position: NanoPopPosition;\n    variantFlipOrder: VariantFlipOrder;\n    positionFlipOrder: PositionFlipOrder;\n    margin: number;\n    reference?: HTMLElement;\n    popper?: HTMLElement;\n};\n\ntype AvailablePositions = {\n    t: number;\n    b: number;\n    l: number;\n    r: number;\n};\n\ntype AvailableVariants = {\n    vs: number;\n    vm: number;\n    ve: number;\n    hs: number;\n    hm: number;\n    he: number;\n};\n\ntype PositionPairs = [Direction, Direction];\nexport type PositionMatch = 'ts' | 'tm' | 'te' | 'bs' | 'bm' | 'be' | 'ls' | 'lm' | 'le' | 'rs' | 'rm' | 're';\n\nexport interface NanoPop {\n    update(updatedOptions?: Partial<NanoPopOptions>): PositionMatch | null;\n}\n\nexport interface NanoPopConstructor {\n\n    /**\n     * @param reference Reference element\n     * @param popper Actual popper element\n     * @param options Optional options\n     */\n    (reference: HTMLElement, popper: HTMLElement, options?: Partial<NanoPopOptions>): NanoPop;\n\n    /**\n     * @param options Partial options which get merged with the current one\n     */\n    (options?: Partial<NanoPopOptions>): NanoPop;\n}\n\n// Export current version\nexport const version = VERSION;\n\n// Export default\nexport const defaults = {\n    variantFlipOrder: {start: 'sme', middle: 'mse', end: 'ems'},\n    positionFlipOrder: {top: 'tbrl', right: 'rltb', bottom: 'btrl', left: 'lrbt'},\n    position: 'bottom',\n    margin: 8\n};\n\n/**\n * Repositions an element once using the provided options and elements.\n * @param reference Reference element\n * @param popper Popper element\n * @param opt Optional, additional options\n */\nexport const reposition = (\n    reference: HTMLElement,\n    popper: HTMLElement,\n    opt?: Partial<NanoPopOptions>\n): PositionMatch | null => {\n    const {\n        container,\n        margin,\n        position,\n        variantFlipOrder,\n        positionFlipOrder\n    } = {\n        container: document.documentElement.getBoundingClientRect(),\n        ...defaults,\n        ...opt\n    };\n\n    /**\n     * Reset position to resolve viewport\n     * See https://developer.mozilla.org/en-US/docs/Web/CSS/position#fixed\n     */\n    const {left: originalLeft, top: originalTop} = popper.style;\n    popper.style.left = '0';\n    popper.style.top = '0';\n\n    const refBox = reference.getBoundingClientRect();\n    const popBox = popper.getBoundingClientRect();\n\n    /**\n     * Holds coordinates of top, left, bottom and right alignment\n     */\n    const positionStore: AvailablePositions = {\n        t: refBox.top - popBox.height - margin,\n        b: refBox.bottom + margin,\n        r: refBox.right + margin,\n        l: refBox.left - popBox.width - margin\n    };\n\n    /**\n     * Holds corresponding variants (start, middle, end).\n     * The values depend on horizontal / vertical orientation\n     */\n    const variantStore: AvailableVariants = {\n        vs: refBox.left,\n        vm: refBox.left + refBox.width / 2 + -popBox.width / 2,\n        ve: refBox.left + refBox.width - popBox.width,\n        hs: refBox.top,\n        hm: refBox.bottom - refBox.height / 2 - popBox.height / 2,\n        he: refBox.bottom - popBox.height\n    };\n\n    // Extract position and variant\n    // Top-start -> top is \"position\" and \"start\" is the variant\n    const [posKey, varKey = 'middle'] = position.split('-');\n    const positions = positionFlipOrder[posKey as keyof PositionFlipOrder];\n    const variants = variantFlipOrder[varKey as keyof VariantFlipOrder];\n\n    // Try out all possible combinations, starting with the preferred one.\n    const {top, left, bottom, right} = container;\n\n    for (const p of positions) {\n        const vertical = (p === 't' || p === 'b');\n\n        // The position-value\n        const positionVal = positionStore[p as keyof AvailablePositions];\n\n        // Which property has to be changes.\n        const [positionKey, variantKey] = (vertical ? ['top', 'left'] : ['left', 'top']) as PositionPairs;\n\n        /**\n         * box refers to the size of the popper element. Depending on the orientation this is width or height.\n         * The limit is the corresponding, maximum value for this position.\n         */\n        const [positionSize, variantSize] = vertical ? [popBox.height, popBox.width] : [popBox.width, popBox.height];\n        const [positionMaximum, variantMaximum] = vertical ? [bottom, right] : [right, bottom];\n        const [positionMinimum, variantMinimum] = vertical ? [top, left] : [left, top];\n\n        // Skip pre-clipped values\n        if (positionVal < positionMinimum || (positionVal + positionSize) > positionMaximum) {\n            continue;\n        }\n\n        for (const v of variants) {\n\n            // The position-value, the related size value of the popper and the limit\n            const variantVal = variantStore[((vertical ? 'v' : 'h') + v) as keyof AvailableVariants];\n\n            if (variantVal < variantMinimum || (variantVal + variantSize) > variantMaximum) {\n                continue;\n            }\n\n            // Apply styles and normalize viewport\n            popper.style[variantKey] = `${variantVal - popBox[variantKey]}px`;\n            popper.style[positionKey] = `${positionVal - popBox[positionKey]}px`;\n            return (p + v) as PositionMatch;\n        }\n    }\n\n    // Revert style values (won't work with styled-elements or similar systems)\n    // \"Fix\" for https://github.com/Simonwep/nanopop/issues/7\n    popper.style.left = originalLeft;\n    popper.style.top = originalTop;\n\n    return null;\n};\n\n/**\n * Creates a stateful popper.\n * You can either...\n * ... pass an options object: createPopper(<options>)\n * ... pass both the reference and popper: create(<ref>, <el>, <?options>)\n * ... pass nothing, in this case you'll have to set at least both a reference and a popper in update.\n *\n * @param reference | options Reference element or options\n * @param popper Popper element\n * @param options Optional additional options\n */\nexport const createPopper: NanoPopConstructor = (\n    reference?: HTMLElement | Partial<NanoPopOptions>,\n    popper?: HTMLElement,\n    options?: Partial<NanoPopOptions>\n): NanoPop => {\n\n    // Resolve options\n    const baseOptions: Partial<NanoPopOptions> = typeof reference === 'object' && !(reference instanceof HTMLElement) ?\n        reference : {reference, popper, ...options};\n\n    return {\n\n        /**\n         * Repositions the current popper.\n         * @param options Optional options which get merged with the current ones.\n         */\n        update(options: Partial<NanoPopOptions> = baseOptions): PositionMatch | null {\n            const {reference, popper} = Object.assign(baseOptions, options);\n\n            if (!popper || !reference) {\n                throw new Error('Popper- or reference-element missing.');\n            }\n\n            return reposition(reference, popper, baseOptions);\n        }\n    };\n};\n","import * as _ from './utils/utils';\nimport {parseToHSVA} from './utils/color';\nimport {HSVaColor} from './utils/hsvacolor';\nimport Moveable from './libs/moveable';\nimport Selectable from './libs/selectable';\nimport buildPickr from './template';\nimport {createPopper} from 'nanopop';\n\nexport default class Pickr {\n\n    // Expose pickr utils\n    static utils = _;\n\n    // Assign version and export\n    static version = VERSION;\n\n    // Default strings\n    static I18N_DEFAULTS = {\n\n        // Strings visible in the UI\n        'ui:dialog': 'color picker dialog',\n        'btn:toggle': 'toggle color picker dialog',\n        'btn:swatch': 'color swatch',\n        'btn:last-color': 'use previous color',\n        'btn:save': 'Save',\n        'btn:cancel': 'Cancel',\n        'btn:clear': 'Clear',\n\n        // Strings used for aria-labels\n        'aria:btn:save': 'save and close',\n        'aria:btn:cancel': 'cancel and close',\n        'aria:btn:clear': 'clear and close',\n        'aria:input': 'color input field',\n        'aria:palette': 'color selection area',\n        'aria:hue': 'hue selection slider',\n        'aria:opacity': 'selection slider'\n    };\n\n    // Default options\n    static DEFAULT_OPTIONS = {\n        appClass: null,\n        theme: 'classic',\n        useAsButton: false,\n        padding: 8,\n        disabled: false,\n        comparison: true,\n        closeOnScroll: false,\n        outputPrecision: 0,\n        lockOpacity: false,\n        autoReposition: true,\n        container: 'body',\n\n        components: {\n            interaction: {}\n        },\n\n        i18n: {},\n        swatches: null,\n        inline: false,\n        sliders: null,\n\n        default: '#42445a',\n        defaultRepresentation: null,\n        position: 'bottom-middle',\n        adjustableNumbers: true,\n        showAlways: false,\n\n        closeWithKey: 'Escape'\n    };\n\n    // Will be used to prevent specific actions during initilization\n    _initializingActive = true;\n\n    // If the current color value should be recalculated\n    _recalc = true;\n\n    // Positioning engine and DOM-Tree\n    _nanopop = null;\n    _root = null;\n\n    // Current and last color for comparison\n    _color = HSVaColor();\n    _lastColor = HSVaColor();\n    _swatchColors = [];\n\n    // Animation frame used for setup.\n    // Will be cancelled in case of destruction.\n    _setupAnimationFrame = null;\n\n    // Evenlistener name: [callbacks]\n    _eventListener = {\n        init: [],\n        save: [],\n        hide: [],\n        show: [],\n        clear: [],\n        change: [],\n        changestop: [],\n        cancel: [],\n        swatchselect: []\n    };\n\n    constructor(opt) {\n\n        // Assign default values\n        this.options = opt = Object.assign({...Pickr.DEFAULT_OPTIONS}, opt);\n\n        const {swatches, components, theme, sliders, lockOpacity, padding} = opt;\n\n        if (['nano', 'monolith'].includes(theme) && !sliders) {\n            opt.sliders = 'h';\n        }\n\n        // Check interaction section\n        if (!components.interaction) {\n            components.interaction = {};\n        }\n\n        // Overwrite palette if preview, opacity or hue are true\n        const {preview, opacity, hue, palette} = components;\n        components.opacity = (!lockOpacity && opacity);\n        components.palette = palette || preview || opacity || hue;\n\n        // Initialize picker\n        this._preBuild();\n        this._buildComponents();\n        this._bindEvents();\n        this._finalBuild();\n\n        // Append pre-defined swatch colors\n        if (swatches && swatches.length) {\n            swatches.forEach(color => this.addSwatch(color));\n        }\n\n        // Initialize positioning engine\n        const {button, app} = this._root;\n        this._nanopop = createPopper(button, app, {\n            margin: padding\n        });\n\n        // Initialize accessibility\n        button.setAttribute('role', 'button');\n        button.setAttribute('aria-label', this._t('btn:toggle'));\n\n        // Initilization is finish, pickr is visible and ready for usage\n        const that = this;\n        this._setupAnimationFrame = requestAnimationFrame((function cb() {\n\n            // TODO: Performance issue due to high call-rate?\n            if (!app.offsetWidth) {\n                return requestAnimationFrame(cb);\n            }\n\n            // Apply default color\n            that.setColor(opt.default);\n            that._rePositioningPicker();\n\n            // Initialize color representation\n            if (opt.defaultRepresentation) {\n                that._representation = opt.defaultRepresentation;\n                that.setColorRepresentation(that._representation);\n            }\n\n            // Show pickr if locked\n            if (opt.showAlways) {\n                that.show();\n            }\n\n            // Initialization is done - pickr is usable, fire init event\n            that._initializingActive = false;\n            that._emit('init');\n        }));\n    }\n\n    // Create instance via method\n    static create = options => new Pickr(options);\n\n    // Does only the absolutly basic thing to initialize the components\n    _preBuild() {\n        const {options} = this;\n\n        // Resolve elements\n        for (const type of ['el', 'container']) {\n            options[type] = _.resolveElement(options[type]);\n        }\n\n        // Create element and append it to body to\n        // Prevent initialization errors\n        this._root = buildPickr(this);\n\n        // Check if a custom button is used\n        if (options.useAsButton) {\n            this._root.button = options.el; // Replace button with customized button\n        }\n\n        options.container.appendChild(this._root.root);\n    }\n\n    _finalBuild() {\n        const opt = this.options;\n        const root = this._root;\n\n        // Remove from body\n        opt.container.removeChild(root.root);\n\n        if (opt.inline) {\n            const parent = opt.el.parentElement;\n\n            if (opt.el.nextSibling) {\n                parent.insertBefore(root.app, opt.el.nextSibling);\n            } else {\n                parent.appendChild(root.app);\n            }\n        } else {\n            opt.container.appendChild(root.app);\n        }\n\n        // Don't replace the the element if a custom button is used\n        if (!opt.useAsButton) {\n\n            // Replace element with actual color-picker\n            opt.el.parentNode.replaceChild(root.root, opt.el);\n        } else if (opt.inline) {\n            opt.el.remove();\n        }\n\n        // Check if it should be immediatly disabled\n        if (opt.disabled) {\n            this.disable();\n        }\n\n        // Check if color comparison is disabled, if yes - remove transitions so everything keeps smoothly\n        if (!opt.comparison) {\n            root.button.style.transition = 'none';\n\n            if (!opt.useAsButton) {\n                root.preview.lastColor.style.transition = 'none';\n            }\n        }\n\n        this.hide();\n    }\n\n    _buildComponents() {\n\n        // Instance reference\n        const inst = this;\n        const cs = this.options.components;\n        const sliders = (inst.options.sliders || 'v').repeat(2);\n        const [so, sh] = sliders.match(/^[vh]+$/g) ? sliders : [];\n\n        // Re-assign if null\n        const getColor = () =>\n            this._color || (this._color = this._lastColor.clone());\n\n        const components = {\n\n            palette: Moveable({\n                element: inst._root.palette.picker,\n                wrapper: inst._root.palette.palette,\n\n                onstop: () => inst._emit('changestop', 'slider', inst),\n                onchange(x, y) {\n                    if (!cs.palette) {\n                        return;\n                    }\n\n                    const color = getColor();\n                    const {_root, options} = inst;\n                    const {lastColor, currentColor} = _root.preview;\n\n                    // Update the input field only if the user is currently not typing\n                    if (inst._recalc) {\n\n                        // Calculate saturation based on the position\n                        color.s = x * 100;\n\n                        // Calculate the value\n                        color.v = 100 - y * 100;\n\n                        // Prevent falling under zero\n                        color.v < 0 ? color.v = 0 : 0;\n                        inst._updateOutput('slider');\n                    }\n\n                    // Set picker and gradient color\n                    const cssRGBaString = color.toRGBA().toString(0);\n                    this.element.style.background = cssRGBaString;\n                    this.wrapper.style.background = `\n                        linear-gradient(to top, rgba(0, 0, 0, ${color.a}), transparent),\n                        linear-gradient(to left, hsla(${color.h}, 100%, 50%, ${color.a}), rgba(255, 255, 255, ${color.a}))\n                    `;\n\n                    // Check if color is locked\n                    if (!options.comparison) {\n                        _root.button.style.setProperty('--pcr-color', cssRGBaString);\n\n                        // If the user changes the color, remove the cleared icon\n                        _root.button.classList.remove('clear');\n                    } else if (!options.useAsButton && !inst._lastColor) {\n\n                        // Apply color to both the last and current color since the current state is cleared\n                        lastColor.style.setProperty('--pcr-color', cssRGBaString);\n                    }\n\n                    // Check if there's a swatch which color matches the current one\n                    const hexa = color.toHEXA().toString();\n                    for (const {el, color} of inst._swatchColors) {\n                        el.classList[hexa === color.toHEXA().toString() ? 'add' : 'remove']('pcr-active');\n                    }\n\n                    // Change current color\n                    currentColor.style.setProperty('--pcr-color', cssRGBaString);\n                }\n            }),\n\n            hue: Moveable({\n                lock: sh === 'v' ? 'h' : 'v',\n                element: inst._root.hue.picker,\n                wrapper: inst._root.hue.slider,\n\n                onstop: () => inst._emit('changestop', 'slider', inst),\n                onchange(v) {\n                    if (!cs.hue || !cs.palette) {\n                        return;\n                    }\n\n                    const color = getColor();\n\n                    // Calculate hue\n                    if (inst._recalc) {\n                        color.h = v * 360;\n                    }\n\n                    // Update color\n                    this.element.style.backgroundColor = `hsl(${color.h}, 100%, 50%)`;\n                    components.palette.trigger();\n                }\n            }),\n\n            opacity: Moveable({\n                lock: so === 'v' ? 'h' : 'v',\n                element: inst._root.opacity.picker,\n                wrapper: inst._root.opacity.slider,\n\n                onstop: () => inst._emit('changestop', 'slider', inst),\n                onchange(v) {\n                    if (!cs.opacity || !cs.palette) {\n                        return;\n                    }\n\n                    const color = getColor();\n\n                    // Calculate opacity\n                    if (inst._recalc) {\n                        color.a = Math.round(v * 1e2) / 100;\n                    }\n\n                    // Update color\n                    this.element.style.background = `rgba(0, 0, 0, ${color.a})`;\n                    components.palette.trigger();\n                }\n            }),\n\n            selectable: Selectable({\n                elements: inst._root.interaction.options,\n                className: 'active',\n\n                onchange(e) {\n                    inst._representation = e.target.getAttribute('data-type').toUpperCase();\n                    inst._recalc && inst._updateOutput('swatch');\n                }\n            })\n        };\n\n        this._components = components;\n    }\n\n    _bindEvents() {\n        const {_root, options} = this;\n\n        const eventBindings = [\n\n            // Clear color\n            _.on(_root.interaction.clear, 'click', () => this._clearColor()),\n\n            // Select last color on click\n            _.on([\n                _root.interaction.cancel,\n                _root.preview.lastColor\n            ], 'click', () => {\n                this.setHSVA(...(this._lastColor || this._color).toHSVA(), true);\n                this._emit('cancel');\n            }),\n\n            // Save color\n            _.on(_root.interaction.save, 'click', () => {\n                !this.applyColor() && !options.showAlways && this.hide();\n            }),\n\n            // User input\n            _.on(_root.interaction.result, ['keyup', 'input'], e => {\n\n                // Fire listener if initialization is finish and changed color was valid\n                if (this.setColor(e.target.value, true) && !this._initializingActive) {\n                    this._emit('change', this._color, 'input', this);\n                    this._emit('changestop', 'input', this);\n                }\n\n                e.stopImmediatePropagation();\n            }),\n\n            // Detect user input and disable auto-recalculation\n            _.on(_root.interaction.result, ['focus', 'blur'], e => {\n                this._recalc = e.type === 'blur';\n                this._recalc && this._updateOutput(null);\n            }),\n\n            // Cancel input detection on color change\n            _.on([\n                _root.palette.palette,\n                _root.palette.picker,\n                _root.hue.slider,\n                _root.hue.picker,\n                _root.opacity.slider,\n                _root.opacity.picker\n            ], ['mousedown', 'touchstart'], () => this._recalc = true, {passive: true})\n        ];\n\n        // Provide hiding / showing abilities only if showAlways is false\n        if (!options.showAlways) {\n            const ck = options.closeWithKey;\n\n            eventBindings.push(\n\n                // Save and hide / show picker\n                _.on(_root.button, 'click', () => this.isOpen() ? this.hide() : this.show()),\n\n                // Close with escape key\n                _.on(document, 'keyup', e => this.isOpen() && (e.key === ck || e.code === ck) && this.hide()),\n\n                // Cancel selecting if the user taps behind the color picker\n                _.on(document, ['touchstart', 'mousedown'], e => {\n                    if (this.isOpen() && !_.eventPath(e).some(el => el === _root.app || el === _root.button)) {\n                        this.hide();\n                    }\n                }, {capture: true})\n            );\n        }\n\n        // Make input adjustable if enabled\n        if (options.adjustableNumbers) {\n            const ranges = {\n                rgba: [255, 255, 255, 1],\n                hsva: [360, 100, 100, 1],\n                hsla: [360, 100, 100, 1],\n                cmyk: [100, 100, 100, 100]\n            };\n\n            _.adjustableInputNumbers(_root.interaction.result, (o, step, index) => {\n                const range = ranges[this.getColorRepresentation().toLowerCase()];\n\n                if (range) {\n                    const max = range[index];\n\n                    // Calculate next reasonable number\n                    const nv = o + (max >= 100 ? step * 1000 : step);\n\n                    // Apply range of zero up to max, fix floating-point issues\n                    return nv <= 0 ? 0 : Number((nv < max ? nv : max).toPrecision(3));\n                }\n\n                return o;\n            });\n        }\n\n        if (options.autoReposition && !options.inline) {\n            let timeout = null;\n            const that = this;\n\n            // Re-calc position on window resize, scroll and wheel\n            eventBindings.push(\n                _.on(window, ['scroll', 'resize'], () => {\n                    if (that.isOpen()) {\n\n                        if (options.closeOnScroll) {\n                            that.hide();\n                        }\n\n                        if (timeout === null) {\n                            timeout = setTimeout(() => timeout = null, 100);\n\n                            // Update position on every frame\n                            requestAnimationFrame(function rs() {\n                                that._rePositioningPicker();\n                                (timeout !== null) && requestAnimationFrame(rs);\n                            });\n                        } else {\n                            clearTimeout(timeout);\n                            timeout = setTimeout(() => timeout = null, 100);\n                        }\n                    }\n                }, {capture: true})\n            );\n        }\n\n        // Save bindings\n        this._eventBindings = eventBindings;\n    }\n\n    _rePositioningPicker() {\n        const {options} = this;\n\n        // No repositioning needed if inline\n        if (!options.inline) {\n            const success = this._nanopop.update({\n                container: document.body.getBoundingClientRect(),\n                position: options.position\n            });\n\n            if (!success) {\n                const el = this._root.app;\n                const eb = el.getBoundingClientRect();\n                el.style.top = `${(window.innerHeight - eb.height) / 2}px`;\n                el.style.left = `${(window.innerWidth - eb.width) / 2}px`;\n            }\n        }\n    }\n\n    _updateOutput(eventSource) {\n        const {_root, _color, options} = this;\n\n        // Check if component is present\n        if (_root.interaction.type()) {\n\n            // Construct function name and call if present\n            const method = `to${_root.interaction.type().getAttribute('data-type')}`;\n            _root.interaction.result.value = typeof _color[method] === 'function' ?\n                _color[method]().toString(options.outputPrecision) : '';\n        }\n\n        // Fire listener if initialization is finish\n        if (!this._initializingActive && this._recalc) {\n            this._emit('change', _color, eventSource, this);\n        }\n    }\n\n    _clearColor(silent = false) {\n        const {_root, options} = this;\n\n        // Change only the button color if it isn't customized\n        if (!options.useAsButton) {\n            _root.button.style.setProperty('--pcr-color', 'rgba(0, 0, 0, 0.15)');\n        }\n\n        _root.button.classList.add('clear');\n\n        if (!options.showAlways) {\n            this.hide();\n        }\n\n        this._lastColor = null;\n        if (!this._initializingActive && !silent) {\n\n            // Fire listener\n            this._emit('save', null);\n            this._emit('clear');\n        }\n    }\n\n    _parseLocalColor(str) {\n        const {values, type, a} = parseToHSVA(str);\n        const {lockOpacity} = this.options;\n        const alphaMakesAChange = a !== undefined && a !== 1;\n\n        // If no opacity is applied, add undefined at the very end which gets\n        // Set to 1 in setHSVA\n        if (values && values.length === 3) {\n            values[3] = undefined;\n        }\n\n        return {\n            values: (!values || (lockOpacity && alphaMakesAChange)) ? null : values,\n            type\n        };\n    }\n\n    _t(key) {\n        return this.options.i18n[key] || Pickr.I18N_DEFAULTS[key];\n    }\n\n    _emit(event, ...args) {\n        this._eventListener[event].forEach(cb => cb(...args, this));\n    }\n\n    on(event, cb) {\n        this._eventListener[event].push(cb);\n        return this;\n    }\n\n    off(event, cb) {\n        const callBacks = (this._eventListener[event] || []);\n        const index = callBacks.indexOf(cb);\n\n        if (~index) {\n            callBacks.splice(index, 1);\n        }\n\n        return this;\n    }\n\n    /**\n     * Appends a color to the swatch palette\n     * @param color\n     * @returns {boolean}\n     */\n    addSwatch(color) {\n        const {values} = this._parseLocalColor(color);\n\n        if (values) {\n            const {_swatchColors, _root} = this;\n            const color = HSVaColor(...values);\n\n            // Create new swatch HTMLElement\n            const el = _.createElementFromString(\n                `<button type=\"button\" style=\"--pcr-color: ${color.toRGBA().toString(0)}\" aria-label=\"${this._t('btn:swatch')}\"/>`\n            );\n\n            // Append element and save swatch data\n            _root.swatches.appendChild(el);\n            _swatchColors.push({el, color});\n\n            // Bind event\n            this._eventBindings.push(\n                _.on(el, 'click', () => {\n                    this.setHSVA(...color.toHSVA(), true);\n                    this._emit('swatchselect', color);\n                    this._emit('change', color, 'swatch', this);\n                })\n            );\n\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Removes a swatch color by it's index\n     * @param index\n     * @returns {boolean}\n     */\n    removeSwatch(index) {\n        const swatchColor = this._swatchColors[index];\n\n        // Check swatch data\n        if (swatchColor) {\n            const {el} = swatchColor;\n\n            // Remove HTML child and swatch data\n            this._root.swatches.removeChild(el);\n            this._swatchColors.splice(index, 1);\n            return true;\n        }\n\n        return false;\n    }\n\n    applyColor(silent = false) {\n        const {preview, button} = this._root;\n\n        // Change preview and current color\n        const cssRGBaString = this._color.toRGBA().toString(0);\n        preview.lastColor.style.setProperty('--pcr-color', cssRGBaString);\n\n        // Change only the button color if it isn't customized\n        if (!this.options.useAsButton) {\n            button.style.setProperty('--pcr-color', cssRGBaString);\n        }\n\n        // User changed the color so remove the clear clas\n        button.classList.remove('clear');\n\n        // Save last color\n        this._lastColor = this._color.clone();\n\n        // Fire listener\n        if (!this._initializingActive && !silent) {\n            this._emit('save', this._color);\n        }\n\n        return this;\n    }\n\n    /**\n     * Destroy's all functionalitys\n     */\n    destroy() {\n\n        // Cancel setup-frame if set\n        cancelAnimationFrame(this._setupAnimationFrame);\n\n        // Unbind events\n        this._eventBindings.forEach(args => _.off(...args));\n\n        // Destroy sub-components\n        Object.keys(this._components)\n            .forEach(key => this._components[key].destroy());\n    }\n\n    /**\n     * Destroy's all functionalitys and removes\n     * the pickr element.\n     */\n    destroyAndRemove() {\n        this.destroy();\n        const {root, app} = this._root;\n\n        // Remove element\n        if (root.parentElement) {\n            root.parentElement.removeChild(root);\n        }\n\n        // Remove .pcr-app\n        app.parentElement.removeChild(app);\n\n        // There are references to various DOM elements stored in the pickr instance\n        // This cleans all of them to avoid detached DOMs\n        Object.keys(this)\n            .forEach(key => this[key] = null);\n    }\n\n    /**\n     * Hides the color-picker ui.\n     */\n    hide() {\n        if (this.isOpen()) {\n            this._root.app.classList.remove('visible');\n            this._emit('hide');\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Shows the color-picker ui.\n     */\n    show() {\n        if (!this.options.disabled && !this.isOpen()) {\n            this._root.app.classList.add('visible');\n            this._rePositioningPicker();\n            this._emit('show', this._color);\n            return this;\n        }\n\n        return false;\n    }\n\n    /**\n     * @return {boolean} If the color picker is currently open\n     */\n    isOpen() {\n        return this._root.app.classList.contains('visible');\n    }\n\n    /**\n     * Set a specific color.\n     * @param h Hue\n     * @param s Saturation\n     * @param v Value\n     * @param a Alpha channel (0 - 1)\n     * @param silent If the button should not change the color\n     * @return boolean if the color has been accepted\n     */\n    setHSVA(h = 360, s = 0, v = 0, a = 1, silent = false) {\n\n        // Deactivate color calculation\n        const recalc = this._recalc; // Save state\n        this._recalc = false;\n\n        // Validate input\n        if (h < 0 || h > 360 || s < 0 || s > 100 || v < 0 || v > 100 || a < 0 || a > 1) {\n            return false;\n        }\n\n        // Override current color and re-active color calculation\n        this._color = HSVaColor(h, s, v, a);\n\n        // Update slider and palette\n        const {hue, opacity, palette} = this._components;\n        hue.update((h / 360));\n        opacity.update(a);\n        palette.update(s / 100, 1 - (v / 100));\n\n        // Check if call is silent\n        if (!silent) {\n            this.applyColor();\n        }\n\n        // Update output if recalculation is enabled\n        if (recalc) {\n            this._updateOutput();\n        }\n\n        // Restore old state\n        this._recalc = recalc;\n        return true;\n    }\n\n    /**\n     * Tries to parse a string which represents a color.\n     * Examples: #fff\n     *           rgb 10 10 200\n     *           hsva 10 20 5 0.5\n     * @param string\n     * @param silent\n     */\n    setColor(string, silent = false) {\n\n        // Check if null\n        if (string === null) {\n            this._clearColor(silent);\n            return true;\n        }\n\n        const {values, type} = this._parseLocalColor(string);\n\n        // Check if color is ok\n        if (values) {\n\n            // Change selected color format\n            const utype = type.toUpperCase();\n            const {options} = this._root.interaction;\n            const target = options.find(el => el.getAttribute('data-type') === utype);\n\n            // Auto select only if not hidden\n            if (target && !target.hidden) {\n                for (const el of options) {\n                    el.classList[el === target ? 'add' : 'remove']('active');\n                }\n            }\n\n            // Update color (fires 'save' event if silent is 'false')\n            if (!this.setHSVA(...values, silent)) {\n                return false;\n            }\n\n            // Update representation (fires 'change' event)\n            return this.setColorRepresentation(utype);\n        }\n\n        return false;\n    }\n\n    /**\n     * Changes the color _representation.\n     * Allowed values are HEX, RGB, HSV, HSL and CMYK\n     * @param type\n     * @returns {boolean} if the selected type was valid.\n     */\n    setColorRepresentation(type) {\n\n        // Force uppercase to allow a case-sensitiv comparison\n        type = type.toUpperCase();\n\n        // Find button with given type and trigger click event\n        return !!this._root.interaction.options\n            .find(v => v.getAttribute('data-type').startsWith(type) && !v.click());\n    }\n\n    /**\n     * Returns the current color representaion. See setColorRepresentation\n     * @returns {*}\n     */\n    getColorRepresentation() {\n        return this._representation;\n    }\n\n    /**\n     * @returns HSVaColor Current HSVaColor object.\n     */\n    getColor() {\n        return this._color;\n    }\n\n    /**\n     * Returns the currently selected color.\n     * @returns {{a, toHSVA, toHEXA, s, v, h, clone, toCMYK, toHSLA, toRGBA}}\n     */\n    getSelectedColor() {\n        return this._lastColor;\n    }\n\n    /**\n     * @returns The root HTMLElement with all his components.\n     */\n    getRoot() {\n        return this._root;\n    }\n\n    /**\n     * Disable pickr\n     */\n    disable() {\n        this.hide();\n        this.options.disabled = true;\n        this._root.button.classList.add('disabled');\n        return this;\n    }\n\n    /**\n     * Enable pickr\n     */\n    enable() {\n        this.options.disabled = false;\n        this._root.button.classList.remove('disabled');\n        return this;\n    }\n}\n","/* canvas-toBlob.js\n * A canvas.toBlob() implementation.\n * 2016-05-26\n * \n * By Eli Grey, http://eligrey.com and Devin Samarin, https://github.com/eboyjr\n * License: MIT\n *   See https://github.com/eligrey/canvas-toBlob.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,\n  plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */\n\n(function(view) {\n\"use strict\";\nvar\n\t  Uint8Array = view.Uint8Array\n\t, HTMLCanvasElement = view.HTMLCanvasElement\n\t, canvas_proto = HTMLCanvasElement && HTMLCanvasElement.prototype\n\t, is_base64_regex = /\\s*;\\s*base64\\s*(?:;|$)/i\n\t, to_data_url = \"toDataURL\"\n\t, base64_ranks\n\t, decode_base64 = function(base64) {\n\t\tvar\n\t\t\t  len = base64.length\n\t\t\t, buffer = new Uint8Array(len / 4 * 3 | 0)\n\t\t\t, i = 0\n\t\t\t, outptr = 0\n\t\t\t, last = [0, 0]\n\t\t\t, state = 0\n\t\t\t, save = 0\n\t\t\t, rank\n\t\t\t, code\n\t\t\t, undef\n\t\t;\n\t\twhile (len--) {\n\t\t\tcode = base64.charCodeAt(i++);\n\t\t\trank = base64_ranks[code-43];\n\t\t\tif (rank !== 255 && rank !== undef) {\n\t\t\t\tlast[1] = last[0];\n\t\t\t\tlast[0] = code;\n\t\t\t\tsave = (save << 6) | rank;\n\t\t\t\tstate++;\n\t\t\t\tif (state === 4) {\n\t\t\t\t\tbuffer[outptr++] = save >>> 16;\n\t\t\t\t\tif (last[1] !== 61 /* padding character */) {\n\t\t\t\t\t\tbuffer[outptr++] = save >>> 8;\n\t\t\t\t\t}\n\t\t\t\t\tif (last[0] !== 61 /* padding character */) {\n\t\t\t\t\t\tbuffer[outptr++] = save;\n\t\t\t\t\t}\n\t\t\t\t\tstate = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 2/3 chance there's going to be some null bytes at the end, but that\n\t\t// doesn't really matter with most image formats.\n\t\t// If it somehow matters for you, truncate the buffer up outptr.\n\t\treturn buffer;\n\t}\n;\nif (Uint8Array) {\n\tbase64_ranks = new Uint8Array([\n\t\t  62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1\n\t\t, -1, -1,  0, -1, -1, -1,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9\n\t\t, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25\n\t\t, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35\n\t\t, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n\t]);\n}\nif (HTMLCanvasElement && (!canvas_proto.toBlob || !canvas_proto.toBlobHD)) {\n\tif (!canvas_proto.toBlob)\n\tcanvas_proto.toBlob = function(callback, type /*, ...args*/) {\n\t\t  if (!type) {\n\t\t\ttype = \"image/png\";\n\t\t} if (this.mozGetAsFile) {\n\t\t\tcallback(this.mozGetAsFile(\"canvas\", type));\n\t\t\treturn;\n\t\t} if (this.msToBlob && /^\\s*image\\/png\\s*(?:$|;)/i.test(type)) {\n\t\t\tcallback(this.msToBlob());\n\t\t\treturn;\n\t\t}\n\n\t\tvar\n\t\t\t  args = Array.prototype.slice.call(arguments, 1)\n\t\t\t, dataURI = this[to_data_url].apply(this, args)\n\t\t\t, header_end = dataURI.indexOf(\",\")\n\t\t\t, data = dataURI.substring(header_end + 1)\n\t\t\t, is_base64 = is_base64_regex.test(dataURI.substring(0, header_end))\n\t\t\t, blob\n\t\t;\n\t\tif (Blob.fake) {\n\t\t\t// no reason to decode a data: URI that's just going to become a data URI again\n\t\t\tblob = new Blob\n\t\t\tif (is_base64) {\n\t\t\t\tblob.encoding = \"base64\";\n\t\t\t} else {\n\t\t\t\tblob.encoding = \"URI\";\n\t\t\t}\n\t\t\tblob.data = data;\n\t\t\tblob.size = data.length;\n\t\t} else if (Uint8Array) {\n\t\t\tif (is_base64) {\n\t\t\t\tblob = new Blob([decode_base64(data)], {type: type});\n\t\t\t} else {\n\t\t\t\tblob = new Blob([decodeURIComponent(data)], {type: type});\n\t\t\t}\n\t\t}\n\t\tcallback(blob);\n\t};\n\n\tif (!canvas_proto.toBlobHD && canvas_proto.toDataURLHD) {\n\t\tcanvas_proto.toBlobHD = function() {\n\t\t\tto_data_url = \"toDataURLHD\";\n\t\t\tvar blob = this.toBlob();\n\t\t\tto_data_url = \"toDataURL\";\n\t\t\treturn blob;\n\t\t}\n\t} else {\n\t\tcanvas_proto.toBlobHD = canvas_proto.toBlob;\n\t}\n}\n}(typeof self !== \"undefined\" && self || typeof window !== \"undefined\" && window || this.content || this));\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ls\"] = factory();\n\telse\n\t\troot[\"ls\"] = factory();\n})(this, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export const NOOP = (...args: unknown[]): unknown => undefined;\n\nexport const escapeRegExp = (text: string): string => text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n\nexport const isObject = (item: any): boolean => {\n  return item !== null && item.constructor.name === 'Object';\n};\n","/*\n * https://github.com/niketpathak/localstorage-slim\n * Copyright (c) 2021 Niket Pathak\n * MIT License\n */\n\nimport { isObject, NOOP } from './helpers';\nimport type { Encrypter, Decrypter, LocalStorageConfig } from './types';\n\n// private flags\nlet hasLS: boolean;\n\nconst supportsLS = (): boolean => {\n  if (hasLS !== undefined) return hasLS;\n  hasLS = true;\n\n  try {\n    if (!localStorage) {\n      hasLS = false;\n    }\n  } catch (e) {\n    // some browsers throw an error if you try to access local storage (e.g. brave browser)\n    // and some like Safari do not allow access to LS in incognito mode\n    hasLS = false;\n  }\n\n  // flush once on init\n  flush();\n\n  return hasLS;\n};\n\n// Apex\nconst APX = String.fromCharCode(0);\n\n// tiny obsfuscator\nconst obfus: Encrypter | Decrypter = (str, key, encrypt = true) =>\n  encrypt\n    ? [...((JSON.stringify(str) as unknown) as string[])]\n      .map((x) => String.fromCharCode(x.charCodeAt(0) + (key as number)))\n      .join('')\n    : JSON.parse([...(str as string[])].map((x) => String.fromCharCode(x.charCodeAt(0) - (key as number))).join(''));\n\nconst decrypter: Decrypter = (str, key) => {\n  return obfus(str, key, false);\n};\n\nconst config: LocalStorageConfig = {\n  ttl: null,\n  encrypt: false,\n  encrypter: obfus,\n  decrypter,\n  secret: 75,\n};\n\nconst set = <T = unknown>(key: string, value: T, localConfig: LocalStorageConfig = {}): void | boolean => {\n  if (!supportsLS()) return false;\n\n  const _conf = {\n    ...config,\n    ...localConfig,\n    encrypt: localConfig.encrypt === false ? false : localConfig.encrypt || config.encrypt,\n    ttl: localConfig.ttl === null ? null : localConfig.ttl || config.ttl,\n  };\n\n  try {\n    let val = _conf.ttl && _conf.ttl > 0 ? { [APX]: value, ttl: Date.now() + _conf.ttl * 1e3 } : value;\n\n    if (_conf.encrypt) {\n      // if ttl exists, only encrypt the value\n      if (_conf.ttl && APX in (val as Record<string, unknown>)) {\n        (val as Record<string, unknown>)[APX] = (_conf.encrypter || NOOP)(\n          (val as Record<string, unknown>)[APX],\n          _conf.secret\n        ) as string;\n      } else {\n        val = (_conf.encrypter || NOOP)(val, _conf.secret) as T;\n      }\n    }\n\n    localStorage.setItem(key, JSON.stringify(val));\n  } catch (e) {\n    // Sometimes stringify fails due to circular refs\n    return false;\n  }\n};\n\nconst get = <T = unknown>(key: string, localConfig: LocalStorageConfig = {}): T | null => {\n  if (!supportsLS()) return null;\n\n  const str = localStorage.getItem(key);\n\n  if (!str) {\n    return null;\n  }\n\n  const _conf = {\n    ...config,\n    ...localConfig,\n    encrypt: localConfig.encrypt === false ? false : localConfig.encrypt || config.encrypt,\n    ttl: localConfig.ttl === null ? null : localConfig.ttl || config.ttl,\n  };\n\n  let item = JSON.parse(str);\n  const hasTTL = isObject(item) && APX in item;\n\n  if (_conf.decrypt || _conf.encrypt) {\n    try {\n      if (hasTTL) {\n        item[APX] = (_conf.decrypter || NOOP)(item[APX], _conf.secret) as string;\n      } else {\n        item = (_conf.decrypter || NOOP)(item, _conf.secret) as string;\n      }\n    } catch (e) {\n      // Either the secret is incorrect or there was a parsing error\n      // do nothing [returns the encrypted/unparsed value]\n    }\n  }\n\n  // if not using ttl, return immediately\n  if (!hasTTL) {\n    return item;\n  }\n\n  if (Date.now() > item.ttl) {\n    localStorage.removeItem(key);\n    return null;\n  }\n\n  return item[APX];\n};\n\nconst flush = (force = false): false | void => {\n  if (!supportsLS()) return false;\n  Object.keys(localStorage).forEach((key) => {\n    const str = localStorage.getItem(key);\n    if (!str) return; // continue iteration\n    let item;\n    try {\n      item = JSON.parse(str);\n    } catch (e) {\n      // Some packages write strings to localStorage that are not converted by JSON.stringify(), so we need to ignore it\n      return;\n    }\n    // flush only if ttl was set and is/is not expired\n    if (isObject(item) && APX in item && (Date.now() > item.ttl || force)) {\n      localStorage.removeItem(key);\n    }\n  });\n};\n\nconst remove = (key: string): undefined | false => {\n  if (!supportsLS()) return false;\n  localStorage.removeItem(key);\n};\n\nconst clear = (): undefined | false => {\n  if (!supportsLS()) return false;\n  localStorage.clear();\n};\n\nexport default {\n  config,\n  set,\n  get,\n  flush,\n  clear,\n  remove,\n};\n"],"sourceRoot":""}